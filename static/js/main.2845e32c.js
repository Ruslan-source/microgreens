/*! For license information please see main.2845e32c.js.LICENSE.txt */
!function(){var e={4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},693:function(e,t,n){var r=n(9713);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach((function(t){r(e,t,n[t])}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){e.exports=n(9727)},4339:function(e,t,n){var r=n(3867).w_;e.exports.x=function(e){return r({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]})(e)}},2090:function(e,t,n){var r=n(3867).w_;e.exports.B=function(e){return r({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 306.9c-113.5 0-205.1 91.6-205.1 205.1S398.5 717.1 512 717.1 717.1 625.5 717.1 512 625.5 306.9 512 306.9zm0 338.4c-73.4 0-133.3-59.9-133.3-133.3S438.6 378.7 512 378.7 645.3 438.6 645.3 512 585.4 645.3 512 645.3zm213.5-394.6c-26.5 0-47.9 21.4-47.9 47.9s21.4 47.9 47.9 47.9 47.9-21.3 47.9-47.9a47.84 47.84 0 0 0-47.9-47.9zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zm-88 235.8c-7.3 18.2-16.1 31.8-30.2 45.8-14.1 14.1-27.6 22.9-45.8 30.2C695.2 844.7 570.3 840 512 840c-58.3 0-183.3 4.7-235.9-16.1-18.2-7.3-31.8-16.1-45.8-30.2-14.1-14.1-22.9-27.6-30.2-45.8C179.3 695.2 184 570.3 184 512c0-58.3-4.7-183.3 16.1-235.9 7.3-18.2 16.1-31.8 30.2-45.8s27.6-22.9 45.8-30.2C328.7 179.3 453.7 184 512 184s183.3-4.7 235.9 16.1c18.2 7.3 31.8 16.1 45.8 30.2 14.1 14.1 22.9 27.6 30.2 45.8C844.7 328.7 840 453.7 840 512c0 58.3 4.7 183.2-16.2 235.8z"}}]})(e)}},3588:function(e,t,n){var r=n(3867).w_;e.exports.y=function(e){return r({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]})(e)}},973:function(e,t,n){var r=n(3867).w_;e.exports.N=function(e){return r({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M877.1 238.7L770.6 132.3c-13-13-30.4-20.3-48.8-20.3s-35.8 7.2-48.8 20.3L558.3 246.8c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l89.6 89.7a405.46 405.46 0 0 1-86.4 127.3c-36.7 36.9-79.6 66-127.2 86.6l-89.6-89.7c-13-13-30.4-20.3-48.8-20.3a68.2 68.2 0 0 0-48.8 20.3L132.3 673c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l106.4 106.4c22.2 22.2 52.8 34.9 84.2 34.9 6.5 0 12.8-.5 19.2-1.6 132.4-21.8 263.8-92.3 369.9-198.3C818 606 888.4 474.6 910.4 342.1c6.3-37.6-6.3-76.3-33.3-103.4zm-37.6 91.5c-19.5 117.9-82.9 235.5-178.4 331s-213 158.9-330.9 178.4c-14.8 2.5-30-2.5-40.8-13.2L184.9 721.9 295.7 611l119.8 120 .9.9 21.6-8a481.29 481.29 0 0 0 285.7-285.8l8-21.6-120.8-120.7 110.8-110.9 104.5 104.5c10.8 10.8 15.8 26 13.3 40.8z"}}]})(e)}},8069:function(e,t,n){var r=n(3867).w_;e.exports.L=function(e){return r({tag:"svg",attr:{t:"1551322312294",style:"",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"defs",attr:{},child:[]},{tag:"path",attr:{d:"M474 152m8 0l60 0q8 0 8 8l0 704q0 8-8 8l-60 0q-8 0-8-8l0-704q0-8 8-8Z"}},{tag:"path",attr:{d:"M168 474m8 0l672 0q8 0 8 8l0 60q0 8-8 8l-672 0q-8 0-8-8l0-60q0-8 8-8Z"}}]})(e)}},2414:function(e,t,n){var r=n(3867).w_;e.exports.y=function(e){return r({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]})(e)}},8690:function(e,t,n){var r=n(3867).w_;e.exports.F=function(e){return r({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 014.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 01-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 011.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 012.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 012.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 011.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 01-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 018.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 001.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 00.52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 00-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 00-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 00-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 00-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 00.52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 001.255-.52l.094-.319z",clipRule:"evenodd"}},{tag:"path",attr:{fillRule:"evenodd",d:"M8 5.754a2.246 2.246 0 100 4.492 2.246 2.246 0 000-4.492zM4.754 8a3.246 3.246 0 116.492 0 3.246 3.246 0 01-6.492 0z",clipRule:"evenodd"}}]})(e)}},2353:function(e,t,n){var r=n(3867).w_;e.exports.M=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"}}]})(e)}},842:function(e,t,n){var r=n(3867).w_;e.exports.A=function(e){return r({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"}}]})(e)}},7215:function(e,t,n){var r=n(3867).w_;e.exports.u=function(e){return r({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"}}]})(e)}},1641:function(e,t,n){var r=n(3867).w_;e.exports.h=function(e){return r({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"}}]})(e)}},8987:function(e,t,n){var r=n(3867).w_;e.exports.Q=function(e){return r({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"}}]})(e)}},3867:function(e,t,n){"use strict";n.d(t,{w_:function(){return c}});var r=n(2791),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(i),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function s(e){return e&&e.map((function(e,t){return r.createElement(e.tag,o({key:t},e.attr),s(e.child))}))}function c(e){return function(t){return r.createElement(l,o({attr:o({},e.attr)},t),s(e.child))}}function l(e){var t=function(t){var n,i=e.attr,a=e.size,s=e.title,c=u(e,["attr","size","title"]),l=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:n,style:o(o({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==a?r.createElement(a.Consumer,null,(function(e){return t(e)})):t(i)}},3375:function(e,t,n){var r=n(3867).w_;e.exports.F=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}},3288:function(e,t,n){var r=n(3867).w_;e.exports.v=function(e){return r({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}}]})(e)}},6213:function(e,t,n){var r=n(3867).w_;e.exports.b=function(e){return r({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M20.756 5.345c-.191-.219-.466-.345-.756-.345h-13.819l-.195-1.164c-.08-.482-.497-.836-.986-.836h-2.25c-.553 0-1 .447-1 1s.447 1 1 1h1.403l1.86 11.164.045.124.054.151.12.179.095.112.193.13.112.065c.116.047.238.075.367.075h11.001c.553 0 1-.447 1-1s-.447-1-1-1h-10.153l-.166-1h11.319c.498 0 .92-.366.99-.858l1-7c.041-.288-.045-.579-.234-.797zm-1.909 1.655l-.285 2h-3.562v-2h3.847zm-4.847 0v2h-3v-2h3zm0 3v2h-3v-2h3zm-4-3v2h-3l-.148.03-.338-2.03h3.486zm-2.986 3h2.986v2h-2.653l-.333-2zm7.986 2v-2h3.418l-.285 2h-3.133z"}},{tag:"circle",attr:{cx:"8.5",cy:"19.5",r:"1.5"}},{tag:"circle",attr:{cx:"17.5",cy:"19.5",r:"1.5"}}]}]})(e)}},6867:function(e,t,n){"use strict";n.d(t,{$:function(){return ae},A:function(){return L},B:function(){return y},C:function(){return j},D:function(){return b},E:function(){return c},F:function(){return U},G:function(){return H},H:function(){return R},I:function(){return Y},J:function(){return V},K:function(){return $},L:function(){return ue},M:function(){return le},N:function(){return ie},O:function(){return he},P:function(){return D},Q:function(){return P},R:function(){return M},S:function(){return B},T:function(){return O},U:function(){return ye},V:function(){return ne},W:function(){return Z},X:function(){return X},Y:function(){return J},Z:function(){return ee},_:function(){return te},a:function(){return F},a0:function(){return oe},a1:function(){return se},a2:function(){return ce},a3:function(){return fe},a4:function(){return de},a5:function(){return pe},a6:function(){return ve},a7:function(){return me},b:function(){return q},d:function(){return z},e:function(){return A},f:function(){return W},g:function(){return K},h:function(){return G},i:function(){return g},j:function(){return I},k:function(){return u},l:function(){return E},m:function(){return k},n:function(){return N},o:function(){return d},p:function(){return l},q:function(){return m},r:function(){return h},s:function(){return x},t:function(){return s},u:function(){return f},v:function(){return S},y:function(){return _},z:function(){return w}});var r=n(7408),i=n(7462),a=n(5609);var o=function(e,t){var n;void 0===t&&(t=!0);var i=new Promise((function(r){n=setTimeout(r,e,t)}));return i[r.n1]=function(){clearTimeout(n)},i},u=function(e){return function(){return e}}(!0),s=function(){};var c=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var l=function(e,t){(0,i.Z)(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))},f=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))};function h(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function d(e){var t=!1;return function(){t||(t=!0,e())}}var p=function(e){throw e},v=function(e){return{value:e,done:!0}};function m(e,t,n){void 0===t&&(t=p),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:v,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function y(e,t){var n=t.sagaStack;console.error(e),console.error(n)}var g=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},k=function(e){return Array.apply(null,new Array(e))},b=function(e){return function(t){return e(Object.defineProperty(t,r.Nm,{value:!0}))}},w=function(e){return e===r.EO},_=function(e){return e===r.Wd},x=function(e){return w(e)||_(e)};function E(e,t){var n=Object.keys(e),r=n.length;var i,o=0,u=(0,a.IX)(e)?k(r):{},c={};return n.forEach((function(e){var n=function(n,a){i||(a||x(n)?(t.cancel(),t(n,a)):(u[e]=n,++o===r&&(i=!0,t(u))))};n.cancel=s,c[e]=n})),t.cancel=function(){i||(i=!0,n.forEach((function(e){return c[e].cancel()})))},c}function I(e){return{name:e.name||"anonymous",location:S(e)}}function S(e){return e[r.b_]}var C={isEmpty:u,put:s,take:s};function T(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,i=0,a=0,o=function(t){n[i]=t,i=(i+1)%e,r++},u=function(){if(0!=r){var t=n[a];return n[a]=null,r--,a=(a+1)%e,t}},s=function(){for(var e=[];r;)e.push(u());return e};return{isEmpty:function(){return 0==r},put:function(u){var c;if(r<e)o(u);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[i]=u,a=i=(i+1)%e;break;case 4:c=2*e,n=s(),r=n.length,i=n.length,a=0,n.length=c,e=c,o(u)}},take:u,flush:s}}var N=function(){return C},P=function(e){return T(e,3)},A=function(e){return T(e,4)},R=Object.freeze({__proto__:null,none:N,fixed:function(e){return T(e,1)},dropping:function(e){return T(e,2)},sliding:P,expanding:A}),O="TAKE",D="PUT",L="ALL",M="RACE",j="CALL",F="CPS",U="FORK",V="JOIN",q="CANCEL",B="SELECT",z="ACTION_CHANNEL",W="CANCELLED",K="FLUSH",H="GET_CONTEXT",G="SET_CONTEXT",Z=Object.freeze({__proto__:null,TAKE:O,PUT:D,ALL:L,RACE:M,CALL:j,CPS:F,FORK:U,JOIN:V,CANCEL:q,SELECT:B,ACTION_CHANNEL:z,CANCELLED:W,FLUSH:K,GET_CONTEXT:H,SET_CONTEXT:G}),Q=function(e,t){var n;return(n={})[r.IO]=!0,n.combinator=!1,n.type=e,n.payload=t,n},Y=function(e){return Q(U,(0,i.Z)({},e.payload,{detached:!0}))};function $(e,t){return void 0===e&&(e="*"),(0,a.uj)(e)?Q(O,{pattern:e}):(0,a.Om)(e)&&(0,a.d5)(t)&&(0,a.uj)(t)?Q(O,{channel:e,pattern:t}):(0,a.CE)(e)?Q(O,{channel:e}):void 0}var X=function(){var e=$.apply(void 0,arguments);return e.payload.maybe=!0,e};function J(e,t){return(0,a.sR)(t)&&(t=e,e=void 0),Q(D,{channel:e,action:t})}var ee=function(){var e=J.apply(void 0,arguments);return e.payload.resolve=!0,e};function te(e){var t=Q(L,e);return t.combinator=!0,t}function ne(e){var t=Q(M,e);return t.combinator=!0,t}function re(e,t){var n,r=null;return(0,a.Yl)(e)?n=e:((0,a.IX)(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&(0,a.Z_)(n)&&(0,a.Yl)(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q(j,re(e,n))}function ae(e,t,n){void 0===n&&(n=[]);return Q(j,re([e,t],n))}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q(F,re(e,n))}function ue(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q(U,re(e,n))}function se(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Y(ue.apply(void 0,[e].concat(n)))}function ce(e){return Q(V,e)}function le(e){return void 0===e&&(e=r.sC),Q(q,e)}function fe(e){void 0===e&&(e=c);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q(B,{selector:e,args:n})}function he(e,t){return Q(z,{pattern:e,buffer:t})}function de(){return Q(W,{})}function pe(e){return Q(K,e)}function ve(e){return Q(H,e)}function me(e){return Q(G,e)}var ye=ie.bind(null,o)},5609:function(e,t,n){"use strict";n.d(t,{CE:function(){return h},IX:function(){return s},MC:function(){return c},NA:function(){return p},Om:function(){return v},Yl:function(){return o},Z_:function(){return u},d5:function(){return a},eR:function(){return d},hZ:function(){return l},sR:function(){return i},uj:function(){return f}});var r=n(7408),i=function(e){return null===e||void 0===e},a=function(e){return null!==e&&void 0!==e},o=function(e){return"function"===typeof e},u=function(e){return"string"===typeof e},s=Array.isArray,c=function(e){return e&&o(e.then)},l=function(e){return e&&o(e.next)&&o(e.throw)},f=function e(t){return t&&(u(t)||p(t)||o(t)||s(t)&&t.every(e))},h=function(e){return e&&o(e.take)&&o(e.close)},d=function(e){return o(e)&&e.hasOwnProperty("toString")},p=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},v=function(e){return h(e)&&e[r.AS]}},7408:function(e,t,n){"use strict";n.d(t,{AS:function(){return s},Cs:function(){return f},EO:function(){return d},IO:function(){return o},Nm:function(){return c},Wd:function(){return h},b_:function(){return p},n1:function(){return i},sC:function(){return l},sZ:function(){return a},uq:function(){return u}});var r=function(e){return"@@redux-saga/"+e},i=r("CANCEL_PROMISE"),a=r("CHANNEL_END"),o=r("IO"),u=r("MATCH"),s=r("MULTICAST"),c=r("SAGA_ACTION"),l=r("SELF_CANCELLATION"),f=r("TASK"),h=r("TASK_CANCEL"),d=r("TERMINATE"),p=r("LOCATION")},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2110:function(e,t,n){"use strict";var r=n(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},2176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},3573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}return(0,a.default)(r)};var r,i=n(6054),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},6054:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var u=i||"<<anonymous>>",s=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+s+"` was not specified in `"+u+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),f=6;f<c;f++)l[f-6]=arguments[f];return e.apply(void 0,[n,r,u,a,s].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Ie(e){if(e=mi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Ce(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Te(e,t){return e(t)}function Ne(){}var Pe=!1;function Ae(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==xe||null!==Ee)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,je=null,Fe=!1,Ue=null,Ve={onError:function(e){Me=!0,je=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,je=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,_t,xt,Et,It=!1,St=[],Ct=null,Tt=null,Nt=null,Pt=new Map,At=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=mi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=mi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){jt(e)&&n.delete(t)}function Ut(){It=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Tt&&jt(Tt)&&(Tt=null),null!==Nt&&jt(Nt)&&(Nt=null),Pt.forEach(Ft),At.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Tt&&Vt(Tt,e),null!==Nt&&Vt(Nt,e),Pt.forEach(t),At.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Bt=b.ReactCurrentBatchConfig;function zt(e,t,n,r){var i=gt,a=Bt.transition;Bt.transition=null;try{gt=1,Kt(e,t,n,r)}finally{gt=i,Bt.transition=a}}function Wt(e,t,n,r){var i=gt,a=Bt.transition;Bt.transition=null;try{gt=4,Kt(e,t,n,r)}finally{gt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=Gt(e,t,n,r);if(null===i)Br(e,t,r,Ht,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=mi(i);if(null!==a&&bt(a),null===(a=Gt(e,t,n,r))&&Br(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Br(e,t,r,null,n)}var Ht=null;function Gt(e,t,n,r){if(Ht=null,null!==(e=vi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Yt=null,$t=null;function Xt(){if($t)return $t;var e,t,n=Yt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=j({},un,{view:0,detail:0}),ln=nn(cn),fn=j({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=nn(fn),dn=nn(j({},fn,{dataTransfer:0})),pn=nn(j({},cn,{relatedTarget:0})),vn=nn(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=nn(mn),gn=nn(j({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function xn(){return _n}var En=j({},cn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=nn(En),Sn=nn(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=nn(j({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Tn=nn(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=nn(Nn),An=[9,13,27,32],Rn=l&&"CompositionEvent"in window,On=null;l&&"documentMode"in document&&(On=document.documentMode);var Dn=l&&"TextEvent"in window&&!On,Ln=l&&(!Rn||On&&8<On&&11>=On),Mn=String.fromCharCode(32),jn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function zn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Hn(e){Mr(e,0)}function Gn(e){if(G(yi(e)))return e}function Zn(e,t){if("change"===e)return t}var Qn=!1;if(l){var Yn;if(l){var $n="oninput"in document;if(!$n){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),$n="function"===typeof Xn.oninput}Yn=$n}else Yn=!1;Qn=Yn&&(!document.documentMode||9<document.documentMode)}function Jn(){Wn&&(Wn.detachEvent("onpropertychange",er),Kn=Wn=null)}function er(e){if("value"===e.propertyName&&Gn(Kn)){var t=[];zn(t,Kn,e,we(e)),Ae(Hn,t)}}function tr(e,t,n){"focusin"===e?(Jn(),Kn=n,(Wn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Jn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Kn)}function rr(e,t){if("click"===e)return Gn(t)}function ir(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,mr=null,yr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==pr||pr!==Z(r)||("selectionStart"in(r=pr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&or(mr,r)||(mr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},wr={},_r={};function xr(e){if(wr[e])return wr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return wr[e]=n[t];return e}l&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Er=xr("animationend"),Ir=xr("animationiteration"),Sr=xr("animationstart"),Cr=xr("transitionend"),Tr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Tr.set(e,t),s(t,[e])}for(var Ar=0;Ar<Nr.length;Ar++){var Rr=Nr[Ar];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(Sr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=je;Me=!1,je=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function jr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Zt(t)){case 1:var i=zt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Br(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Tr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===Jt(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Er:case Ir:case Sr:s=vn;break;case Cr:s=Tn;break;case"scroll":s=ln;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Sn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(zr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Sn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:yi(s),d=null==c?u:yi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Kr(d))p++;for(d=0,v=h;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)h=Kr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Kr(l),h=Kr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?yi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Zn;else if(Bn(u))if(Qn)m=ir;else{m=nr;var y=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=rr);switch(m&&(m=m(e,r))?zn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?yi(r):window,e){case"focusin":(Bn(y)||"true"===y.contentEditable)&&(pr=y,vr=r,mr=null);break;case"focusout":mr=vr=pr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vn?Fn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Vn&&(g=Xt()):(Yt="value"in(Qt=i)?Qt.value:Qt.textContent,Vn=!0)),0<(y=Wr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Un(n))&&(k.data=g))),(g=Dn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(jn=!0,Mn);case"textInput":return(e=t.data)===Mn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Rn&&Fn(e,t)?(e=Xt(),$t=Yt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(zr(e,a,i)),null!=(a=Re(e,t))&&r.push(zr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(zr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(zr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Zr,"")}function Yr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function $r(){}var Xr=null;function Jr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,fi="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function mi(e){return!(e=e[ci]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var ki=[],bi=-1;function wi(e){return{current:e}}function _i(e){0>bi||(e.current=ki[bi],ki[bi]=null,bi--)}function xi(e,t){bi++,ki[bi]=e.current,e.current=t}var Ei={},Ii=wi(Ei),Si=wi(!1),Ci=Ei;function Ti(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){_i(Si),_i(Ii)}function Ai(e,t,n){if(Ii.current!==Ei)throw Error(a(168));xi(Ii,t),xi(Si,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return j({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ci=Ii.current,xi(Ii,e),xi(Si,Si.current),!0}function Di(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Ci),r.__reactInternalMemoizedMergedChildContext=e,_i(Si),_i(Ii),xi(Ii,e)):_i(Si),xi(Si,n)}var Li=null,Mi=!1,ji=!1;function Fi(e){null===Li?Li=[e]:Li.push(e)}function Ui(){if(!ji&&null!==Li){ji=!0;var e=0,t=gt;try{var n=Li;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Mi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),Ge(Je,Ui),i}finally{gt=t,ji=!1}}return null}var Vi=b.ReactCurrentBatchConfig;function qi(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Bi=wi(null),zi=null,Wi=null,Ki=null;function Hi(){Ki=Wi=zi=null}function Gi(e){var t=Bi.current;_i(Bi),e._currentValue=t}function Zi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Qi(e,t){zi=e,Ki=Wi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yu=!0),e.firstContext=null)}function Yi(e){var t=e._currentValue;if(Ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Wi){if(null===zi)throw Error(a(308));Wi=e,zi.dependencies={lanes:0,firstContext:e}}else Wi=Wi.next=e;return t}var $i=null,Xi=!1;function Ji(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ys)?(null===(e=n.interleaved)?(t.next=t,null===$i?$i=[n]:$i.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Xi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=j({},f,h);break e;case 2:Xi=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Is|=o,e.lanes=o,e.memoizedState=f}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bs(),i=zs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ws(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bs(),i=zs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ws(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bs(),r=zs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ws(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function fa(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Yi(a):(i=Ni(t)?Ci:Ii.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ti(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,Ji(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Yi(a):(a=Ni(t)?Ci:Ii.current,i.context=Ti(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ma=null,ya=0,ga=[],ka=0,ba=null,wa=1,_a="";function xa(e,t){pa[va++]=ya,pa[va++]=ma,ma=e,ya=t}function Ea(e,t,n){ga[ka++]=wa,ga[ka++]=_a,ga[ka++]=ba,ba=e;var r=wa;e=_a;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wa=1<<32-ot(t)+i|n<<i|r,_a=a+e}else wa=1<<a|n<<i|r,_a=e}function Ia(e){null!==e.return&&(xa(e,1),Ea(e,1,0))}function Sa(e){for(;e===ma;)ma=pa[--va],pa[va]=null,ya=pa[--va],pa[va]=null;for(;e===ba;)ba=ga[--ka],ga[ka]=null,_a=ga[--ka],ga[ka]=null,wa=ga[--ka],ga[ka]=null}var Ca=null,Ta=null,Na=!1,Pa=null;function Aa(e,t){var n=bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ra(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ca=e,Ta=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ca=e,Ta=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ba?{id:wa,overflow:_a}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=bc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ca=e,Ta=null,!0);default:return!1}}function Oa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Da(e){if(Na){var t=Ta;if(t){var n=t;if(!Ra(e,t)){if(Oa(e))throw Error(a(418));t=oi(n.nextSibling);var r=Ca;t&&Ra(e,t)?Aa(r,n):(e.flags=-4097&e.flags|2,Na=!1,Ca=e)}}else{if(Oa(e))throw Error(a(418));e.flags=-4097&e.flags|2,Na=!1,Ca=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ca=e}function Ma(e){if(e!==Ca)return!1;if(!Na)return La(e),Na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Jr(e.type,e.memoizedProps)),t&&(t=Ta)){if(Oa(e)){for(e=Ta;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Aa(e,t),t=oi(t.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ta=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ta=null}}else Ta=Ca?oi(e.stateNode.nextSibling):null;return!0}function ja(){Ta=Ca=null,Na=!1}function Fa(e){null===Pa?Pa=[e]:Pa.push(e)}function Ua(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){return(0,e._init)(e._payload)}function Ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=_c(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Sc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&qa(a)===t.type)?((r=i(t,n.props)).ref=Ua(e,t,n),r.return=e,r):((r=xc(n.type,n.key,n.props,null,e.mode,r)).ref=Ua(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Cc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ec(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Sc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=xc(t.type,t.key,t.props,null,e.mode,n)).ref=Ua(e,null,t),n.return=e,n;case _:return(t=Cc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ec(t,e.mode,n,null)).return=e,t;Va(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Va(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Va(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),Na&&xa(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Na&&xa(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),Na&&xa(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),Na&&xa(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return Na&&xa(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Na&&xa(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ua(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Ec(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=xc(o.type,o.key,o.props,null,r.mode,s)).ref=Ua(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Cc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Sc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var za=Ba(!0),Wa=Ba(!1),Ka={},Ha=wi(Ka),Ga=wi(Ka),Za=wi(Ka);function Qa(e){if(e===Ka)throw Error(a(174));return e}function Ya(e,t){switch(xi(Za,t),xi(Ga,e),xi(Ha,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Ha),xi(Ha,t)}function $a(){_i(Ha),_i(Ga),_i(Za)}function Xa(e){Qa(Za.current);var t=Qa(Ha.current),n=se(t,e.type);t!==n&&(xi(Ga,e),xi(Ha,n))}function Ja(e){Ga.current===e&&(_i(Ha),_i(Ga))}var eo=wi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=b.ReactCurrentDispatcher,ao=b.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,fo=!1,ho=0,po=0;function vo(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function yo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Jo:eu,e=n(r,i),fo){o=0;do{if(fo=!1,ho=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(fo)}if(io.current=Xo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==ho;return ho=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function bo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((oo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,uo.lanes|=f,Is|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(yu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Is|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(yu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function Io(e,t){var n=uo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,yu=!0),r=r.queue,Mo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Ao(9,Co.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Ws(e,1,-1)}function To(e,t,n){return n((function(){No(t)&&Ws(e,1,-1)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Po(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,uo,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return bo().memoizedState}function Oo(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ao(t,n,a,r))}uo.flags|=e,i.memoizedState=Ao(1|t,n,a,r)}function Lo(e,t){return Oo(8390656,8,e,t)}function Mo(e,t){return Do(2048,8,e,t)}function jo(e,t){return Do(4,2,e,t)}function Fo(e,t){return Do(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Uo.bind(null,t,e),n)}function qo(){}function Bo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Ko(){return bo().memoizedState}function Ho(e,t,n){var r=zs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e)?Qo(t,n):(Yo(e,t,n),null!==(e=Ws(e,r,n=Bs()))&&$o(e,t,r))}function Go(e,t,n){var r=zs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))Qo(t,i);else{Yo(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ws(e,r,n=Bs()))&&$o(e,t,r)}}function Zo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Qo(e,t){fo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ys)?(null===(e=t.interleaved)?(n.next=n,null===$i?$i=[t]:$i.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xo={readContext:Yi,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Jo={readContext:Yi,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Yi,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Po,useDebugValue:qo,useDeferredValue:function(e){var t=Po(e),n=t[0],r=t[1];return Lo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=Po(!1),t=e[0];return e=Wo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Na){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(To.bind(null,r,o,e),[e]),r.flags|=2048,Ao(9,Co.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Na){var n=_a;t=":"+t+"R"+(n=(wa&~(1<<32-ot(wa)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Yi,useCallback:Bo,useContext:Yi,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:zo,useReducer:_o,useRef:Ro,useState:function(){return _o(wo)},useDebugValue:qo,useDeferredValue:function(e){var t=_o(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[_o(wo)[0],bo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Io,useId:Ko,unstable_isNewReconciler:!1},tu={readContext:Yi,useCallback:Bo,useContext:Yi,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:zo,useReducer:xo,useRef:Ro,useState:function(){return xo(wo)},useDebugValue:qo,useDeferredValue:function(e){var t=xo(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Io,useId:Ko,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,Os=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Ds?Ds=new Set([this]):Ds.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function fu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(Sa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ni(t.type)&&Pi(),pu(t),null;case 3:return r=t.stateNode,$a(),_i(Si),_i(Ii),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Pa&&(Qs(Pa),Pa=null))),pu(t),null;case 5:Ja(t);var i=Qa(Za.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=Qa(Ha.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)jr(Or[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(Yr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)jr(Or[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Qa(Za.current),Qa(Ha.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Ca))switch(s=0!==(1&e.mode),e.tag){case 3:Yr(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&Yr(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(_i(eo),r=t.memoizedState,Na&&null!==Ta&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ta;r;)r=oi(r.nextSibling);return ja(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else ja(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Pa&&(Qs(Pa),Pa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===xs&&(xs=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return $a(),null===e&&Vr(t.stateNode.containerInfo),pu(t),null;case 10:return Gi(t.type._context),pu(t),null;case 19:if(_i(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==xs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>As&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Na)return pu(t),null}else 2*$e()-o.renderingStartTime>As&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=eo.current,xi(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ws)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qa(Ha.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var mu=b.ReactCurrentOwner,yu=!1;function gu(e,t,n,r){t.child=null===e?Wa(t,null,n,r):za(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return Qi(t,i),r=yo(e,t,n,r,a,i),n=go(),null===e||yu?(Na&&n&&Ia(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function bu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||wc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=xc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Uu(e,t,i)}return t.flags|=1,(e=_c(a,r)).ref=t.ref,e.return=t,t.child=e}function wu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(yu=!1,0===(e.lanes&i))return t.lanes=e.lanes,Uu(e,t,i);0!==(131072&e.flags)&&(yu=!0)}return Eu(e,t,n,r,i)}function _u(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},xi(_s,ws),ws|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,xi(_s,ws),ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,xi(_s,ws),ws|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xi(_s,ws),ws|=r;return gu(e,t,i,n),t.child}function xu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eu(e,t,n,r,i){var a=Ni(n)?Ci:Ii.current;return a=Ti(t,a),Qi(t,i),n=yo(e,t,n,r,a,i),r=go(),null===e||yu?(Na&&r&&Ia(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function Iu(e,t,n,r,i){if(Ni(n)){var a=!0;Oi(t)}else a=!1;if(Qi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Yi(c):c=Ti(t,c=Ni(n)?Ci:Ii.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ha(t,o,r,c),Xi=!1;var h=t.memoizedState;o.state=h,aa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Si.current||Xi?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Xi||la(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:qi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Yi(s):s=Ti(t,s=Ni(n)?Ci:Ii.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ha(t,o,r,s),Xi=!1,h=t.memoizedState,o.state=h,aa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Si.current||Xi?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Xi||la(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Su(e,t,n,r,a,i)}function Su(e,t,n,r,i,a){xu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Di(t,n,!1),Uu(e,t,a);r=t.stateNode,mu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=za(t,e.child,null,a),t.child=za(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Di(t,n,!0),t.child}function Cu(e){var t=e.stateNode;t.pendingContext?Ai(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ai(0,t.context,!1),Ya(e,t.containerInfo)}function Tu(e,t,n,r,i){return ja(),Fa(i),t.flags|=256,gu(e,t,n,r),t.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Pu(e){return{baseLanes:e,cachePool:null}}function Au(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(eo,1&o),null===e)return Da(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Ic(o,i,0,null),e=Ec(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Pu(n),t.memoizedState=Nu,e):Ru(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Lu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Ic({mode:"visible",children:i.children},o,0,null),(u=Ec(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&za(t,e.child,null,n),t.child.memoizedState=Pu(n),t.memoizedState=Nu,u);if(0===(1&t.mode))t=Lu(e,t,n,null);else if("$!"===r.data)t=Lu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),yu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ws(e,i,-1))}ic(),t=Lu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=mc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ta=oi(r.nextSibling),Ca=t,Na=!0,Pa=null,null!==n&&(ga[ka++]=wa,ga[ka++]=_a,ga[ka++]=ba,wa=n.id,_a=n.overflow,ba=t),(t=Ru(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Du(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Pu(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Ou(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Du(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Pu(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Ou(e,t,i.children,n),t.memoizedState=null,n)}function Ru(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ou(e,t,n,r){var i=e.child;return e=i.sibling,n=_c(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Du(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=_c(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=_c(o,r):(r=Ec(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Lu(e,t,n,r){return null!==r&&Fa(r),za(t,e.child,null,n),(e=Ru(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Zi(e.return,t,n)}function ju(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Fu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ju(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ju(t,!0,n,null,a);break;case"together":ju(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Is|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=_c(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=_c(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vu(e,t){switch(Sa(t),t.tag){case 1:return Ni(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $a(),_i(Si),_i(Ii),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ja(t),null;case 13:if(_i(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ja()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(eo),null;case 4:return $a(),null;case 10:return Gi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var qu=!1,Bu=!1,zu="function"===typeof WeakSet?WeakSet:Set,Wu=null;function Ku(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Hu(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Gu=!1;function Zu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Hu(t,n,a)}i=i.next}while(i!==r)}}function Qu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function $u(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Hu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Ku(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Ku(t,n);break;case 4:is(e,t,n)}}function Xu(e){var t=e.alternate;null!==t&&(e.alternate=null,Xu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[hi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ju(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ju(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if(Ju(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,f=c;;)if($u(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),qt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if($u(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Zu(3,t,t.return),Qu(3,t),void Zu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&$(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?me(n,s):"dangerouslySetInnerHTML"===u?fe(n,s):"children"===u?he(n,s):k(n,u,s,t)}switch(e){case"input":X(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&qt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new zu),t.forEach((function(t){var r=yc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Wu=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Wu;){var i=Wu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||qu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Bu;u=qu;var c=Bu;if(qu=o,(Bu=s)&&!c)for(Wu=i;null!==Wu;)s=(o=Wu).child,22===o.tag&&null!==o.memoizedState?fs(i):null!==s?(s.return=o,Wu=s):fs(i);for(;null!==a;)Wu=a,ss(a,t,n),a=a.sibling;Wu=i,qu=u,Bu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Wu=a):cs(e)}}function cs(e){for(;null!==Wu;){var t=Wu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Bu||Qu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Bu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:qi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Bu||512&t.flags&&Yu(t)}catch(d){dc(t,t.return,d)}}if(t===e){Wu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Wu=n;break}Wu=t.return}}function ls(e){for(;null!==Wu;){var t=Wu;if(t===e){Wu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Wu=n;break}Wu=t.return}}function fs(e){for(;null!==Wu;){var t=Wu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qu(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{Yu(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{Yu(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Wu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Wu=u;break}Wu=t.return}}var hs,ds=Math.ceil,ps=b.ReactCurrentDispatcher,vs=b.ReactCurrentOwner,ms=b.ReactCurrentBatchConfig,ys=0,gs=null,ks=null,bs=0,ws=0,_s=wi(0),xs=0,Es=null,Is=0,Ss=0,Cs=0,Ts=null,Ns=null,Ps=0,As=1/0,Rs=!1,Os=null,Ds=null,Ls=!1,Ms=null,js=0,Fs=0,Us=null,Vs=-1,qs=0;function Bs(){return 0!==(6&ys)?$e():-1!==Vs?Vs:Vs=$e()}function zs(e){return 0===(1&e.mode)?1:0!==(2&ys)&&0!==bs?bs&-bs:null!==Vi.transition?(0===qs&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),qs=e),qs):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function Ws(e,t,n){if(50<Fs)throw Fs=0,Us=null,Error(a(185));var r=Ks(e,t);return null===r?null:(mt(r,t,n),0!==(2&ys)&&r===gs||(r===gs&&(0===(2&ys)&&(Ss|=t),4===xs&&Ys(r,bs)),Hs(r,n),1===t&&0===ys&&0===(1&e.mode)&&(As=$e()+500,Mi&&Ui())),r)}function Ks(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Hs(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===gs?bs:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Mi=!0,Fi(e)}($s.bind(null,e)):Fi($s.bind(null,e)),ri((function(){0===ys&&Ui()})),n=null;else{switch(kt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Gs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gs(e,t){if(Vs=-1,qs=0,0!==(6&ys))throw Error(a(327));var n=e.callbackNode;if(fc()&&e.callbackNode!==n)return null;var r=ht(e,e===gs?bs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ys;ys|=2;var o=rc();for(gs===e&&bs===t||(As=$e()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Hi(),ps.current=o,ys=i,null!==ks?t=0:(gs=null,bs=0,t=xs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Zs(e,i))),1===t)throw n=Es,tc(e,0),Ys(e,r),Hs(e,$e()),n;if(6===t)Ys(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Zs(e,o))),1===t))throw n=Es,tc(e,0),Ys(e,r),Hs(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,Ns);break;case 3:if(Ys(e,r),(130023424&r)===r&&10<(t=Ps+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Bs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,Ns),t);break}lc(e,Ns);break;case 4:if(Ys(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,Ns),r);break}lc(e,Ns);break;default:throw Error(a(329))}}}return Hs(e,$e()),e.callbackNode===n?Gs.bind(null,e):null}function Zs(e,t){var n=Ts;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=Ns,Ns=n,null!==t&&Qs(t)),e}function Qs(e){null===Ns?Ns=e:Ns.push.apply(Ns,e)}function Ys(e,t){for(t&=~Cs,t&=~Ss,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function $s(e){if(0!==(6&ys))throw Error(a(327));fc();var t=ht(e,0);if(0===(1&t))return Hs(e,$e()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Zs(e,r))}if(1===n)throw n=Es,tc(e,0),Ys(e,t),Hs(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,Ns),Hs(e,$e()),null}function Xs(e,t){var n=ys;ys|=1;try{return e(t)}finally{0===(ys=n)&&(As=$e()+500,Mi&&Ui())}}function Js(e){null!==Ms&&0===Ms.tag&&0===(6&ys)&&fc();var t=ys;ys|=1;var n=ms.transition,r=gt;try{if(ms.transition=null,gt=1,e)return e()}finally{gt=r,ms.transition=n,0===(6&(ys=t))&&Ui()}}function ec(){ws=_s.current,_i(_s)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Sa(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:$a(),_i(Si),_i(Ii),ro();break;case 5:Ja(r);break;case 4:$a();break;case 13:case 19:_i(eo);break;case 10:Gi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,ks=e=_c(e.current,null),bs=ws=t,xs=0,Es=null,Cs=Ss=Is=0,Ns=Ts=null,null!==$i){for(t=0;t<$i.length;t++)if(null!==(r=(n=$i[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}$i=null}return e}function nc(e,t){for(;;){var n=ks;try{if(Hi(),io.current=Xo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,fo=!1,ho=0,vs.current=null,null===n||null===n.return){xs=1,Es=t,ks=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=bs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=fu(u);if(null!==p){p.flags&=-257,hu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Na&&1&s.mode){var y=fu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),hu(y,u,s,0,t),Fa(c);break e}}o=c,4!==xs&&(xs=2),null===Ts?Ts=[o]:Ts.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ds||!Ds.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(b){t=b,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Xo,null===e?Xo:e}function ic(){0!==xs&&3!==xs&&2!==xs||(xs=4),null===gs||0===(268435455&Is)&&0===(268435455&Ss)||Ys(gs,bs)}function ac(e,t){var n=ys;ys|=2;var r=rc();for(gs===e&&bs===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Hi(),ys=n,ps.current=r,null!==ks)throw Error(a(261));return gs=null,bs=0,xs}function oc(){for(;null!==ks;)sc(ks)}function uc(){for(;null!==ks&&!Qe();)sc(ks)}function sc(e){var t=hs(e.alternate,e,ws);e.memoizedProps=e.pendingProps,null===t?cc(e):ks=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,ws)))return void(ks=n)}else{if(null!==(n=Vu(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return xs=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===xs&&(xs=5)}function lc(e,t){var n=gt,r=ms.transition;try{ms.transition=null,gt=1,function(e,t,n){do{fc()}while(null!==Ms);if(0!==(6&ys))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,bs=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Ls||(Ls=!0,gc(tt,(function(){return fc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ms.transition,ms.transition=null;var u=gt;gt=1;var s=ys;ys|=4,vs.current=null,function(e,t){if(fr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xr={focusedElem:e,selectionRange:n},Wu=t;null!==Wu;)if(e=(t=Wu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Wu=e;else for(;null!==Wu;){t=Wu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:qi(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(_){dc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Wu=e;break}Wu=t.return}v=Gu,Gu=!1}(e,r),function(e,t){for(Wu=t;null!==Wu;){var n=(t=Wu).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(E){dc(i,t,E)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Wu=n;else for(;null!==Wu;){t=Wu;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(Ps=$e())}break;case 22:var l=null!==t.memoizedState,f=t.alternate,h=null!==f&&null!==f.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var m=v.style;"function"===typeof m.setProperty?m.setProperty("display","none","important"):m.display="none"}else{var y=p.stateNode,g=p.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;y.style.display=ve("display",k)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!h&&0!==(1&n.mode)){Wu=n;for(var b=n.child;null!==b;){for(n=Wu=b;null!==Wu;){var w=(r=Wu).child;switch(r.tag){case 0:case 11:case 14:case 15:Zu(4,r,r.return);break;case 1:Ku(r,r.return);var _=r.stateNode;if("function"===typeof _.componentWillUnmount){var x=r.return;try{_.props=r.memoizedProps,_.state=r.memoizedState,_.componentWillUnmount()}catch(E){dc(r,x,E)}}break;case 5:Ku(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==w?(w.return=r,Wu=w):ls(n)}b=b.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(E){dc(t,t.return,E)}if(null!==(n=t.sibling)){n.return=t.return,Wu=n;break}Wu=t.return}}}(e,r),hr(Xr),Xr=null,e.current=r,us(r,e,i),Ye(),ys=s,gt=u,ms.transition=o}else e.current=r;if(Ls&&(Ls=!1,Ms=e,js=i),0===(o=e.pendingLanes)&&(Ds=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Hs(e,$e()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Rs)throw Rs=!1,e=Os,Os=null,e;0!==(1&js)&&0!==e.tag&&fc(),0!==(1&(o=e.pendingLanes))?e===Us?Fs++:(Fs=0,Us=e):Fs=0,Ui()}(e,t,n)}finally{ms.transition=r,gt=n}return null}function fc(){if(null!==Ms){var e=kt(js),t=ms.transition,n=gt;try{if(ms.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,js=0,0!==(6&ys))throw Error(a(331));var i=ys;for(ys|=4,Wu=e.current;null!==Wu;){var o=Wu,u=o.child;if(0!==(16&Wu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Wu=l;null!==Wu;){var f=Wu;switch(f.tag){case 0:case 11:case 15:Zu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Wu=h;else for(;null!==Wu;){var d=(f=Wu).sibling,p=f.return;if(Xu(f),f===l){Wu=null;break}if(null!==d){d.return=p,Wu=d;break}Wu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Wu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Wu=u;else e:for(;null!==Wu;){if(0!==(2048&(o=Wu).flags))switch(o.tag){case 0:case 11:case 15:Zu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Wu=g;break e}Wu=o.return}}var k=e.current;for(Wu=k;null!==Wu;){var b=(u=Wu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Wu=b;else e:for(u=k;null!==Wu;){if(0!==(2048&(s=Wu).flags))try{switch(s.tag){case 0:case 11:case 15:Qu(9,s)}}catch(_){dc(s,s.return,_)}if(s===u){Wu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Wu=w;break e}Wu=s.return}}if(ys=i,Ui(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{gt=n,ms.transition=t}}return!1}function hc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=Bs(),null!==(e=Ks(e,1))&&(mt(e,1,t),Hs(e,t))}function dc(e,t,n){if(3===e.tag)hc(e,e,n);else for(;null!==t;){if(3===t.tag){hc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ds||!Ds.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=Bs(),null!==(t=Ks(t,1))&&(mt(t,1,e),Hs(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Bs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(bs&n)===n&&(4===xs||3===xs&&(130023424&bs)===bs&&500>$e()-Ps?tc(e,0):Cs|=n),Hs(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Bs();null!==(e=Ks(e,t))&&(mt(e,t,n),Hs(e,n))}function mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function yc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return Ge(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bc(e,t,n,r){return new kc(e,t,n,r)}function wc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _c(e,t){var n=e.alternate;return null===n?((n=bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)wc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Ec(n.children,i,o,t);case E:u=8,i|=8;break;case I:return(e=bc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=bc(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=bc(19,n,t,i)).elementType=P,e.lanes=o,e;case O:return Ic(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case T:u=11;break e;case A:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=bc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ec(e,t,n,r){return(e=bc(7,e,r,t)).lanes=n,e}function Ic(e,t,n,r){return(e=bc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={},e}function Sc(e,t,n){return(e=bc(6,e,null,t)).lanes=n,e}function Cc(e,t,n){return(t=bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,a,o,u,s){return e=new Tc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=bc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Ji(a),e}function Pc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ac(e){if(!e)return Ei;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Ri(e,n,t)}return t}function Rc(e,t,n,r,i,a,o,u,s){return(e=Nc(n,r,!0,e,0,a,0,u,s)).context=Ac(null),n=e.current,(a=ta(r=Bs(),i=zs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,mt(e,i,r),Hs(e,r),e}function Oc(e,t,n,r){var i=t.current,a=Bs(),o=zs(i);return n=Ac(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ws(i,o,a))&&ra(e,i,o),o}function Dc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Si.current)yu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yu=!1,function(e,t,n){switch(t.tag){case 3:Cu(t),ja();break;case 5:Xa(t);break;case 1:Ni(t.type)&&Oi(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(Bi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Au(e,t,n):(xi(eo,1&eo.current),null!==(e=Uu(e,t,n))?e.sibling:null);xi(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Fu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,_u(e,t,n)}return Uu(e,t,n)}(e,t,n);yu=0!==(131072&e.flags)}else yu=!1,Na&&0!==(1048576&t.flags)&&Ea(t,ya,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ti(t,Ii.current);Qi(t,n),i=yo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ji(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Su(null,t,r,!0,o,n)):(t.tag=0,Na&&o&&Ia(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return wc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=qi(r,e),i){case 0:t=Eu(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=bu(null,t,r,qi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 3:e:{if(Cu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Tu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Tu(e,t,r,n,i=Error(a(424)));break e}for(Ta=oi(t.stateNode.containerInfo.firstChild),Ca=t,Na=!0,Pa=null,n=Wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ja(),r===i){t=Uu(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&Da(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Jr(r,i)?u=null:null!==o&&Jr(r,o)&&(t.flags|=32),xu(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&Da(t),null;case 13:return Au(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=za(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,xi(Bi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Si.current){t=Uu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Zi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Zi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Qi(t,n),r=r(i=Yi(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=qi(r=t.type,t.pendingProps),bu(e,t,r,i=qi(r.type,i),n);case 15:return wu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ni(r)?(e=!0,Oi(t)):e=!1,Qi(t,n),fa(t,r,i),da(t,r,i,n),Su(null,t,r,!0,e,n);case 19:return Fu(e,t,n);case 22:return _u(e,t,n)}throw Error(a(156,t.tag))};var jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Fc(e){this._internalRoot=e}function Uc(e){this._internalRoot=e}function Vc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Bc(){}function zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Dc(o);u.call(e)}}Oc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Dc(o);a.call(e)}}var o=Rc(t,r,e,0,null,!1,0,"",Bc);return e._reactRootContainer=o,e[fi]=o.current,Vr(8===e.nodeType?e.parentNode:e),Js(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Dc(s);u.call(e)}}var s=Nc(e,0,!1,null,0,!1,0,"",Bc);return e._reactRootContainer=s,e[fi]=s.current,Vr(8===e.nodeType?e.parentNode:e),Js((function(){Oc(t,s,n,r)})),s}(n,t,e,i,r);return Dc(o)}Uc.prototype.render=Fc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Oc(e,t,null,null)},Uc.prototype.unmount=Fc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Js((function(){Oc(null,e,null,null)})),t[fi]=null}},Uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),Hs(t,$e()),0===(6&ys)&&(As=$e()+500,Ui()))}break;case 13:var r=Bs();Js((function(){return Ws(e,1,r)})),Mc(e,1)}},wt=function(e){13===e.tag&&(Ws(e,134217728,Bs()),Mc(e,134217728))},_t=function(e){if(13===e.tag){var t=Bs(),n=zs(e);Ws(e,n,t),Mc(e,n)}},xt=function(){return gt},Et=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=Xs,Ne=Js;var Wc={usingClientEntryPoint:!1,Events:[mi,yi,gi,Se,Ce,Xs]},Kc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Hc={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{it=Gc.inject(Hc),at=Gc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vc(t))throw Error(a(200));return Pc(e,t,null,n)},t.createRoot=function(e,t){if(!Vc(e))throw Error(a(299));var n=!1,r="",i=jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Fc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return Js(e)},t.hydrate=function(e,t,n){if(!qc(t))throw Error(a(200));return zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Vc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Rc(t,null,e,1,null!=n?n:null,i,0,o,u),e[fi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Uc(t)},t.render=function(e,t,n){if(!qc(t))throw Error(a(200));return zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qc(e))throw Error(a(40));return!!e._reactRootContainer&&(Js((function(){zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Xs,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return zc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},1250:function(e,t,n){"use strict";var r=n(4164);t.s=r.createRoot,r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},7441:function(e,t,n){"use strict";e.exports=n(1372)},8459:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,m=60117,y=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),u=k("react.provider"),s=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),m=k("react.fundamental"),y=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case d:case h:case u:return e;default:return t}}case r:return t}}}},6900:function(e,t,n){"use strict";n(8459)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+T(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+T(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+T(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},5484:function(e,t,n){"use strict";var r=n(7781).qC;t.Uo="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?r:r.apply(null,arguments)},"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__},8106:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){0};t.default=n},8952:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7757)),a=n(2544),o=n(7780),u=i.default.mark(T),s=i.default.mark(N),c=i.default.mark(P),l=i.default.mark(A),f=i.default.mark(R),h=i.default.mark(O),d=i.default.mark(D),p=i.default.mark(L),v=i.default.mark(M),m=i.default.mark(j),y=i.default.mark(F),g=i.default.mark(U),k=i.default.mark(V),b=i.default.mark(q),w=i.default.mark(B),_=i.default.mark(z),x=i.default.mark(W),E=i.default.mark(K),I=i.default.mark(H),S=i.default.mark(G),C=i.default.mark(Z);function T(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.applyActionCode],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),u,this)}function N(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.confirmPasswordReset],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),s,this)}function P(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.createUserWithEmailAndPassword],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),c,this)}function A(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e.currentUser,e.currentUser.delete]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),l,this)}function R(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.linkWithPopup],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),f,this)}function O(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.linkWithRedirect],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),h,this)}function D(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.sendEmailVerification],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),d,this)}function L(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.sendPasswordResetEmail],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),p,this)}function M(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInAndRetrieveDataWithCredential],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),v,this)}function j(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e,e.signInAnonymously]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),m,this)}function F(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithCredential],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),y,this)}function U(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithCustomToken],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),g,this)}function V(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.signInWithEmailAndPassword],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),k,this)}function q(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.app.auth(),r.next=3,(0,o.call)([n,n.signInWithPhoneNumber],e,t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),b,this)}function B(e){var t,n,r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.app.auth(),i.next=3,(0,o.call)([t,t.signInWithPopup],e);case 3:return n=i.sent,r=n.credential,i.abrupt("return",r);case 6:case"end":return i.stop()}}),w,this)}function z(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t,t.signInWithRedirect],e);case 3:case"end":return n.stop()}}),_,this)}function W(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.app.auth(),t.next=3,(0,o.call)([e,e.signOut]);case 3:case"end":return t.stop()}}),x,this)}function K(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.unlink],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),E,this)}function H(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updateEmail],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),I,this)}function G(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updatePassword],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),S,this)}function Z(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.app.auth(),n.next=3,(0,o.call)([t.currentUser,t.currentUser.updateProfile],e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),C,this)}var Q={applyActionCode:T,channel:function(){if(this._authChannel)return this._authChannel;var e=this.app.auth(),t=(0,a.eventChannel)((function(t){return e.onAuthStateChanged((function(e){return t({user:e})}),(function(e){return t({error:e})}))}));return this._authChannel=t,t},confirmPasswordReset:N,createUserWithEmailAndPassword:P,deleteProfile:A,linkWithPopup:R,linkWithRedirect:O,sendEmailVerification:D,sendPasswordResetEmail:L,signInAndRetrieveDataWithCredential:M,signInAnonymously:j,signInWithCredential:F,signInWithCustomToken:U,signInWithEmailAndPassword:V,signInWithPhoneNumber:q,signInWithPopup:B,signInWithRedirect:z,signOut:W,unlink:K,updateEmail:H,updatePassword:G,updateProfile:Z};t.default=Q},5966:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getRef=void 0;var i=r(n(693)),a=r(n(7757)),o=n(2544),u=n(7780),s=n(2133),c=a.default.mark(m),l=a.default.mark(y),f=a.default.mark(g),h=a.default.mark(k),d=a.default.mark(b),p=a.default.mark(_),v=function(e,t){return"string"===typeof t?e.app.database().ref(t):t};function m(e){var t,n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=v(this,e),r.next=3,(0,u.call)([t,t.once],"value");case 3:return n=r.sent,r.abrupt("return",n.val());case 5:case"end":return r.stop()}}),c,this)}function y(e,t){var n,r;return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=v(this,e),i.next=3,(0,u.call)([n,n.push],t);case 3:return r=i.sent,i.abrupt("return",r.key);case 5:case"end":return i.stop()}}),l,this)}function g(e,t){var n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=v(this,e),r.next=3,(0,u.call)([n,n.set],t);case 3:case"end":return r.stop()}}),f,this)}function k(e,t){var n;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=v(this,e),r.next=3,(0,u.call)([n,n.update],t);case 3:case"end":return r.stop()}}),h,this)}function b(e){var t;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=v(this,e),n.next=3,(0,u.call)([t,t.remove]);case 3:case"end":return n.stop()}}),d,this)}t.getRef=v;var w=function(e){return e.value};function _(e,t,n){var r;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,u.call)(this.database.channel,e,n);case 2:return r=a.sent,a.next=5,(0,u.fork)(s.syncChannel,r,(0,i.default)({transform:w},t));case 5:case"end":return a.stop()}}),p,this)}var x={read:m,create:y,update:g,patch:k,delete:b,channel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.buffers.none(),r=v(this,e),i=(0,o.eventChannel)((function(e){var n=r.on(t,(function(t){return e({snapshot:t,value:t.val()})}));return function(){return r.off(t,n)}}),n);return i},sync:_};t.default=x},9282:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getDocumentRef=t.getCollectionRef=void 0;var i=r(n(7757)),a=n(2544),o=n(7780),u=r(n(8106)),s=n(2133),c=i.default.mark(k),l=i.default.mark(b),f=i.default.mark(w),h=i.default.mark(_),d=i.default.mark(x),p=i.default.mark(E),v=i.default.mark(I),m=i.default.mark(S),y=function(e,t){return(0,u.default)(!!e.app.firestore,"Firestore isn't installed. Did you forget to `import '@firebase/firestore'`? See https://redux-saga-firebase.js.org/ for more information."),"string"===typeof t?e.app.firestore().collection(t):t};t.getCollectionRef=y;var g=function(e,t){return(0,u.default)(!!e.app.firestore,"Firestore isn't installed. Did you forget to `import '@firebase/firestore'`? See https://redux-saga-firebase.js.org/ for more information."),"string"===typeof t?e.app.firestore().doc(t):t};function k(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=y(this,e),r.next=3,(0,o.call)([n,n.add],t);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),c,this)}function b(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=g(this,e),n.next=3,(0,o.call)([t,t.delete]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),l,this)}function w(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=y(this,e),n.next=3,(0,o.call)([t,t.get]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),f,this)}function _(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=g(this,e),n.next=3,(0,o.call)([t,t.get]);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),h,this)}function x(e,t,n){var r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=g(this,e),i.next=3,(0,o.call)([r,r.set],t,n);case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}}),d,this)}function E(e){var t,n,r,a,u=arguments;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:for(t=g(this,e),n=u.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=u[a];return i.next=4,o.call.apply(void 0,[[t,t.update]].concat(r));case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}}),p,this)}function I(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.call)(this.firestore.channel,e,"collection",void 0,t.snapshotListenOptions);case 2:return n=r.sent,r.next=5,(0,o.fork)(s.syncChannel,n,t);case 5:case"end":return r.stop()}}),v,this)}function S(e,t){var n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.call)(this.firestore.channel,e,"document",void 0,t.snapshotListenOptions);case 2:return n=r.sent,r.next=5,(0,o.fork)(s.syncChannel,n,t);case 5:case"end":return r.stop()}}),m,this)}t.getDocumentRef=g;var C={addDocument:k,channel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collection",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.buffers.none(),r=arguments.length>3?arguments[3]:void 0,i="collection"===t?y(this,e):g(this,e),o=(0,a.eventChannel)((function(e){return r?i.onSnapshot(r,e):i.onSnapshot(e)}),n);return o},deleteDocument:b,getCollection:w,getDocument:_,setDocument:x,syncCollection:I,syncDocument:S,updateDocument:E};t.default=C},8622:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionURL=u,t.default=void 0;var i=r(n(7757)),a=n(7780),o=i.default.mark(s);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=/^https?:\/\//.test(e)?e:"https://".concat(this.region,"-").concat(this.projectId(),".cloudfunctions.net/").concat(e),r=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join("&");return r?"".concat(n,"?").concat(r):n}function s(e){var t,n,r,s,c,l,f,h=arguments;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=h.length>1&&void 0!==h[1]?h[1]:{},n=h.length>2&&void 0!==h[2]?h[2]:{},r=u.call(this,e,t),i.next=5,(0,a.call)(fetch,r,n);case 5:if((s=i.sent).ok){i.next=8;break}throw s;case 8:return c=s.headers.get("Content-Type"),l=c.startsWith("application/json")?s.json:s.text,i.next=12,(0,a.call)([s,l]);case 12:return f=i.sent,i.abrupt("return",f);case 14:case"end":return i.stop()}}),o,this)}var c={call:s};t.default=c},9969:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(8952)),u=r(n(5966)),s=r(n(9282)),c=r(n(8622)),l=r(n(230)),f=r(n(6692)),h=function(){function e(t){(0,i.default)(this,e),this.app=t,this.region="us-central1",this.auth={applyActionCode:o.default.applyActionCode.bind(this),channel:o.default.channel.bind(this),confirmPasswordReset:o.default.confirmPasswordReset.bind(this),createUserWithEmailAndPassword:o.default.createUserWithEmailAndPassword.bind(this),deleteProfile:o.default.deleteProfile.bind(this),linkWithPopup:o.default.linkWithPopup.bind(this),linkWithRedirect:o.default.linkWithRedirect.bind(this),sendEmailVerification:o.default.sendEmailVerification.bind(this),sendPasswordResetEmail:o.default.sendPasswordResetEmail.bind(this),signInAndRetrieveDataWithCredential:o.default.signInAndRetrieveDataWithCredential.bind(this),signInAnonymously:o.default.signInAnonymously.bind(this),signInWithCredential:o.default.signInWithCredential.bind(this),signInWithCustomToken:o.default.signInWithCustomToken.bind(this),signInWithEmailAndPassword:o.default.signInWithEmailAndPassword.bind(this),signInWithPopup:o.default.signInWithPopup.bind(this),signInWithPhoneNumber:o.default.signInWithPhoneNumber.bind(this),signInWithRedirect:o.default.signInWithRedirect.bind(this),signOut:o.default.signOut.bind(this),unlink:o.default.unlink.bind(this),updateEmail:o.default.updateEmail.bind(this),updatePassword:o.default.updatePassword.bind(this),updateProfile:o.default.updateProfile.bind(this)},this.database={read:u.default.read.bind(this),create:u.default.create.bind(this),update:u.default.update.bind(this),patch:u.default.patch.bind(this),delete:u.default.delete.bind(this),channel:u.default.channel.bind(this),sync:u.default.sync.bind(this)},this.firestore={addDocument:s.default.addDocument.bind(this),channel:s.default.channel.bind(this),deleteDocument:s.default.deleteDocument.bind(this),getCollection:s.default.getCollection.bind(this),getDocument:s.default.getDocument.bind(this),setDocument:s.default.setDocument.bind(this),syncCollection:s.default.syncCollection.bind(this),syncDocument:s.default.syncDocument.bind(this),updateDocument:s.default.updateDocument.bind(this)},this.functions={call:c.default.call.bind(this)},this.messaging={channel:l.default.channel.bind(this),syncMessages:l.default.syncMessages.bind(this),syncToken:l.default.syncToken.bind(this),tokenRefreshChannel:l.default.tokenRefreshChannel.bind(this)},this.storage={uploadFile:f.default.uploadFile.bind(this),uploadString:f.default.uploadString.bind(this),getDownloadURL:f.default.getDownloadURL.bind(this),getFileMetadata:f.default.getFileMetadata.bind(this),updateFileMetadata:f.default.updateFileMetadata.bind(this),deleteFile:f.default.deleteFile.bind(this)}}return(0,a.default)(e,[{key:"projectId",value:function(){if(this._projectId)return this._projectId;var e=this.app.options.authDomain.match(/^([a-z0-9-]+)\.firebaseapp\.com$/)[1];return this._projectId=e,e}}]),e}();t.Z=h},230:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7757)),a=n(2544),o=n(7780),u=n(2133),s=i.default.mark(l),c=i.default.mark(f);function l(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.call)(this.messaging.channel);case 2:return t=n.sent,n.next=5,(0,o.fork)(u.syncChannel,t,e);case 5:case"end":return n.stop()}}),s,this)}function f(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,o.call)(this.messaging.tokenRefreshChannel);case 2:return t=n.sent,n.next=5,(0,o.fork)(u.syncChannel,t,e);case 5:case"end":return n.stop()}}),c,this)}var h={channel:function(){if(this._messageChannel)return this._messageChannel;var e=this.app.messaging(),t=(0,a.eventChannel)((function(t){return e.onMessage(t)}));return this._messageChannel=t,t},syncMessages:l,syncToken:f,tokenRefreshChannel:function(){if(this._tokenRefreshChannel)return this._tokenRefreshChannel;var e=this.app.messaging(),t=(0,a.eventChannel)((function(t){return e.onTokenRefresh((function(){e.getToken().then(t)}))}));return this._tokenRefreshChannel=t,t}};t.default=h},6692:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getRef=void 0;var i=r(n(7757)),a=n(7780),o=i.default.mark(f),u=i.default.mark(h),s=i.default.mark(d),c=i.default.mark(p),l=function(e,t){return"string"===typeof t?e.app.storage().ref(t):t};function f(e){var t,n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=l(this,e),r.next=3,(0,a.call)([t,t.getDownloadURL]);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),o,this)}function h(e){var t,n;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=l(this,e),r.next=3,(0,a.call)([t,t.getMetadata]);case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),u,this)}function d(e,t){var n,r;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=l(this,e),i.next=3,(0,a.call)([n,n.updateMetadata],t);case 3:return r=i.sent,i.abrupt("return",r);case 5:case"end":return i.stop()}}),s,this)}function p(e){var t;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=l(this,e),n.next=3,(0,a.call)([t,t.delete]);case 3:case"end":return n.stop()}}),c,this)}t.getRef=l;var v={uploadFile:function(e,t,n){return l(this,e).put(t,n)},uploadString:function(e,t,n,r){return l(this,e).putString(t,n,r)},getDownloadURL:f,getFileMetadata:h,updateFileMetadata:d,deleteFile:p};t.default=v},2133:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.syncChannel=u;var i=r(n(7757)),a=n(7780),o=i.default.mark(u);function u(e,t){var n,r,u,s,c;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=t.successActionCreator,r=t.failureActionCreator,u=t.transform,i.prev=1;case 2:return i.next=5,(0,a.take)(e);case 5:return s=i.sent,c=u?u(s):s,i.next=9,(0,a.put)(n(c));case 9:i.next=2;break;case 11:i.next=21;break;case 13:if(i.prev=13,i.t0=i.catch(1),!r){i.next=20;break}return i.next=18,(0,a.put)(r(i.t0));case 18:i.next=21;break;case 20:console.error("The following error has been ignored because no `failureActionCreator` has been set:",i.t0);case 21:return i.prev=21,i.next=24,(0,a.cancelled)();case 24:if(!i.sent){i.next=26;break}e.close();case 26:return i.finish(21);case 27:case"end":return i.stop()}}),o,this,[[1,13,21,27]])}},2544:function(e,t,n){"use strict";n.r(t),n.d(t,{CANCEL:function(){return r.n1},END:function(){return S},SAGA_LOCATION:function(){return r.b_},buffers:function(){return u.H},channel:function(){return T},default:function(){return Y},detach:function(){return u.I},eventChannel:function(){return N},isEnd:function(){return C},multicastChannel:function(){return P},runSaga:function(){return Z},stdChannel:function(){return A}});var r=n(7408),i=n(7462),a=n(3366),o=n(5609),u=n(6867);"function"===typeof Symbol&&Symbol.observable;var s=function(){return Math.random().toString(36).substring(7).split("").join(".")};s(),s();function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function l(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var f=l,h=[],d=0;function p(e){try{y(),e()}finally{g()}}function v(e){h.push(e),d||(y(),k())}function m(e){try{return y(),e()}finally{k()}}function y(){d++}function g(){d--}function k(){var e;for(g();!d&&void 0!==(e=h.shift());)p(e)}var b=function(e){return function(t){return e.some((function(e){return I(e)(t)}))}},w=function(e){return function(t){return e(t)}},_=function(e){return function(t){return t.type===String(e)}},x=function(e){return function(t){return t.type===e}},E=function(){return u.k};function I(e){var t="*"===e?E:(0,o.Z_)(e)?_:(0,o.IX)(e)?b:(0,o.eR)(e)?_:(0,o.Yl)(e)?w:(0,o.NA)(e)?x:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var S={type:r.sZ},C=function(e){return e&&e.type===r.sZ};function T(e){void 0===e&&(e=(0,u.e)());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(S):e.isEmpty()?(n.push(r),r.cancel=function(){(0,u.r)(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(S):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,i=e.length;r<i;r++){(0,e[r])(S)}}}}}function N(e,t){void 0===t&&(t=(0,u.n)());var n,r=!1,i=T(t),a=function(){r||(r=!0,(0,o.Yl)(n)&&n(),i.close())};return n=e((function(e){C(e)?a():i.put(e)})),n=(0,u.o)(n),r&&n(),{take:i.take,flush:i.flush,close:a}}function P(){var e,t=!1,n=[],i=n;var a=function(){i===n&&(i=n.slice())},o=function(){t=!0;var e=n=i;i=[],e.forEach((function(e){e(S)}))};return(e={})[r.AS]=!0,e.put=function(e){if(!t)if(C(e))o();else for(var a=n=i,u=0,s=a.length;u<s;u++){var c=a[u];c[r.uq](e)&&(c.cancel(),c(e))}},e.take=function(e,n){void 0===n&&(n=E),t?e(S):(e[r.uq]=n,a(),i.push(e),e.cancel=(0,u.o)((function(){a(),(0,u.r)(i,e)})))},e.close=o,e}function A(){var e=P(),t=e.put;return e.put=function(e){e[r.Nm]?t(e):v((function(){t(e)}))},e}function R(e,t){var n=e[r.n1];(0,o.Yl)(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var O,D=0,L=function(){return++D};function M(e){e.isRunning()&&e.cancel()}var j=((O={})[u.T]=function(e,t,n){var i=t.channel,a=void 0===i?e.channel:i,u=t.pattern,s=t.maybe,c=function(e){e instanceof Error?n(e,!0):!C(e)||s?n(e):n(r.EO)};try{a.take(c,(0,o.d5)(u)?I(u):null)}catch(l){return void n(l,!0)}n.cancel=c.cancel},O[u.P]=function(e,t,n){var r=t.channel,i=t.action,a=t.resolve;v((function(){var t;try{t=(r?r.put:e.dispatch)(i)}catch(u){return void n(u,!0)}a&&(0,o.MC)(t)?R(t,n):n(t)}))},O[u.A]=function(e,t,n,r){var i=r.digestEffect,a=D,s=Object.keys(t);if(0!==s.length){var c=(0,u.l)(t,n);s.forEach((function(e){i(t[e],a,c[e],e)}))}else n((0,o.IX)(t)?[]:{})},O[u.R]=function(e,t,n,r){var i=r.digestEffect,a=D,s=Object.keys(t),c=(0,o.IX)(t)?(0,u.m)(s.length):{},l={},f=!1;s.forEach((function(e){var t=function(t,r){f||(r||(0,u.s)(t)?(n.cancel(),n(t,r)):(n.cancel(),f=!0,c[e]=t,n(c)))};t.cancel=u.t,l[e]=t})),n.cancel=function(){f||(f=!0,s.forEach((function(e){return l[e].cancel()})))},s.forEach((function(e){f||i(t[e],a,l[e],e)}))},O[u.C]=function(e,t,n,r){var i=t.context,a=t.fn,s=t.args,c=r.task;try{var l=a.apply(i,s);if((0,o.MC)(l))return void R(l,n);if((0,o.hZ)(l))return void G(e,l,c.context,D,(0,u.j)(a),!1,n);n(l)}catch(f){n(f,!0)}},O[u.a]=function(e,t,n){var r=t.context,i=t.fn,a=t.args;try{var u=function(e,t){(0,o.sR)(e)?n(t):n(e,!0)};i.apply(r,a.concat(u)),u.cancel&&(n.cancel=u.cancel)}catch(s){n(s,!0)}},O[u.F]=function(e,t,n,r){var i=t.context,a=t.fn,s=t.args,c=t.detached,l=r.task,f=function(e){var t=e.context,n=e.fn,r=e.args;try{var i=n.apply(t,r);if((0,o.hZ)(i))return i;var a=!1;return(0,u.q)((function(e){return a?{value:e,done:!0}:(a=!0,{value:i,done:!(0,o.MC)(i)})}))}catch(s){return(0,u.q)((function(){throw s}))}}({context:i,fn:a,args:s}),h=function(e,t){return e.isSagaIterator?{name:e.meta.name}:(0,u.j)(t)}(f,a);m((function(){var t=G(e,f,l.context,D,h,c,void 0);c?n(t):t.isRunning()?(l.queue.addTask(t),n(t)):t.isAborted()?l.queue.abort(t.error()):n(t)}))},O[u.J]=function(e,t,n,r){var i=r.task,a=function(e,t){if(e.isRunning()){var n={task:i,cb:t};t.cancel=function(){e.isRunning()&&(0,u.r)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if((0,o.IX)(t)){if(0===t.length)return void n([]);var s=(0,u.l)(t,n);t.forEach((function(e,t){a(e,s[t])}))}else a(t,n)},O[u.b]=function(e,t,n,i){var a=i.task;t===r.sC?M(a):(0,o.IX)(t)?t.forEach(M):M(t),n()},O[u.S]=function(e,t,n){var r=t.selector,i=t.args;try{n(r.apply(void 0,[e.getState()].concat(i)))}catch(a){n(a,!0)}},O[u.d]=function(e,t,n){var r=t.pattern,i=T(t.buffer),a=I(r),o=function t(n){C(n)||e.channel.take(t,a),i.put(n)},u=i.close;i.close=function(){o.cancel(),u()},e.channel.take(o,a),n(i)},O[u.f]=function(e,t,n,r){n(r.task.isCancelled())},O[u.g]=function(e,t,n){t.flush(n)},O[u.G]=function(e,t,n,r){n(r.task.context[t])},O[u.h]=function(e,t,n,r){var i=r.task;(0,u.p)(i.context,t),n()},O);function F(e,t){return e+"?"+t}function U(e){var t=e.name,n=e.location;return n?t+"  "+F(n.fileName,n.lineNumber):t}function V(e){var t=(0,u.u)((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var q=null,B=[],z=function(e){e.crashedEffect=q,B.push(e)},W=function(){q=null,B.length=0},K=function(){var e=B[0],t=B.slice(1),n=e.crashedEffect?function(e){var t=(0,u.v)(e);return t?t.code+"  "+F(t.fileName,t.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+U(e.meta)+(n?" \n when executing effect "+n:"")].concat(t.map((function(e){return"    created by "+U(e.meta)})),[V(B)]).join("\n")};function H(e,t,n,i,a,o,s){var c;void 0===s&&(s=u.t);var l,h,d=0,p=null,v=[],m=Object.create(n),y=function(e,t,n){var r,i=[],a=!1;function o(e){t(),c(),n(e,!0)}function s(t){i.push(t),t.cont=function(s,c){a||((0,u.r)(i,t),t.cont=u.t,c?o(s):(t===e&&(r=s),i.length||(a=!0,n(r))))}}function c(){a||(a=!0,i.forEach((function(e){e.cont=u.t,e.cancel()})),i=[])}return s(e),{addTask:s,cancelAll:c,abort:o,getTasks:function(){return i}}}(t,(function(){v.push.apply(v,y.getTasks().map((function(e){return e.meta.name})))}),g);function g(t,n){if(n){if(d=2,z({meta:a,cancelledTasks:v}),k.isRoot){var i=K();W(),e.onError(t,{sagaStack:i})}h=t,p&&p.reject(t)}else t===r.Wd?d=1:1!==d&&(d=3),l=t,p&&p.resolve(t);k.cont(t,n),k.joiners.forEach((function(e){e.cb(t,n)})),k.joiners=null}var k=((c={})[r.Cs]=!0,c.id=i,c.meta=a,c.isRoot=o,c.context=m,c.joiners=[],c.queue=y,c.cancel=function(){0===d&&(d=1,y.cancelAll(),g(r.Wd,!1))},c.cont=s,c.end=g,c.setContext=function(e){(0,u.p)(m,e)},c.toPromise=function(){return p||(p=f(),2===d?p.reject(h):0!==d&&p.resolve(l)),p.promise},c.isRunning=function(){return 0===d},c.isCancelled=function(){return 1===d||0===d&&1===t.status},c.isAborted=function(){return 2===d},c.result=function(){return l},c.error=function(){return h},c);return k}function G(e,t,n,i,a,s,c){var l=e.finalizeRunEffect((function(t,n,i){if((0,o.MC)(t))R(t,i);else if((0,o.hZ)(t))G(e,t,h.context,n,a,!1,i);else if(t&&t[r.IO]){(0,j[t.type])(e,t.payload,i,d)}else i(t)}));p.cancel=u.t;var f={meta:a,cancel:function(){0===f.status&&(f.status=1,p(r.Wd))},status:0},h=H(e,f,n,i,a,s,c),d={task:h,digestEffect:v};return c&&(c.cancel=h.cancel),p(),h;function p(e,n){try{var a;n?(a=t.throw(e),W()):(0,u.y)(e)?(f.status=1,p.cancel(),a=(0,o.Yl)(t.return)?t.return(r.Wd):{done:!0,value:r.Wd}):a=(0,u.z)(e)?(0,o.Yl)(t.return)?t.return():{done:!0}:t.next(e),a.done?(1!==f.status&&(f.status=3),f.cont(a.value)):v(a.value,i,p)}catch(s){if(1===f.status)throw s;f.status=2,f.cont(s,!0)}}function v(t,n,r,i){void 0===i&&(i="");var a,o=L();function s(n,i){a||(a=!0,r.cancel=u.t,e.sagaMonitor&&(i?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),i&&function(e){q=e}(t),r(n,i))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:i,effect:t}),s.cancel=u.t,r.cancel=function(){a||(a=!0,s.cancel(),s.cancel=u.t,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},l(t,o,s)}}function Z(e,t){var n=e.channel,r=void 0===n?A():n,i=e.dispatch,a=e.getState,o=e.context,s=void 0===o?{}:o,l=e.sagaMonitor,f=e.effectMiddlewares,h=e.onError,d=void 0===h?u.B:h;for(var p=arguments.length,v=new Array(p>2?p-2:0),y=2;y<p;y++)v[y-2]=arguments[y];var g=t.apply(void 0,v);var k,b=L();if(l&&(l.rootSagaStarted=l.rootSagaStarted||u.t,l.effectTriggered=l.effectTriggered||u.t,l.effectResolved=l.effectResolved||u.t,l.effectRejected=l.effectRejected||u.t,l.effectCancelled=l.effectCancelled||u.t,l.actionDispatched=l.actionDispatched||u.t,l.rootSagaStarted({effectId:b,saga:t,args:v})),f){var w=c.apply(void 0,f);k=function(e){return function(t,n,r){return w((function(t){return e(t,n,r)}))(t)}}}else k=u.E;var _={channel:r,dispatch:(0,u.D)(i),getState:a,sagaMonitor:l,onError:d,finalizeRunEffect:k};return m((function(){var e=G(_,g,s,b,(0,u.j)(t),!0,void 0);return l&&l.effectResolved(b,e),e}))}var Q=function(e){var t,n=void 0===e?{}:e,r=n.context,o=void 0===r?{}:r,s=n.channel,c=void 0===s?A():s,l=n.sagaMonitor,f=(0,a.Z)(n,["context","channel","sagaMonitor"]);function h(e){var n=e.getState,r=e.dispatch;return t=Z.bind(null,(0,i.Z)({},f,{context:o,channel:c,dispatch:r,getState:n,sagaMonitor:l})),function(e){return function(t){l&&l.actionDispatched&&l.actionDispatched(t);var n=e(t);return c.put(t),n}}}return h.run=function(){return t.apply(void 0,arguments)},h.setContext=function(e){(0,u.p)(o,e)},h},Y=Q},7780:function(e,t,n){"use strict";n.r(t),n.d(t,{actionChannel:function(){return i.O},all:function(){return i._},apply:function(){return i.$},call:function(){return i.N},cancel:function(){return i.M},cancelled:function(){return i.a4},cps:function(){return i.a0},debounce:function(){return b},delay:function(){return i.U},effectTypes:function(){return i.W},flush:function(){return i.a5},fork:function(){return i.L},getContext:function(){return i.a6},join:function(){return i.a2},put:function(){return i.Y},putResolve:function(){return i.Z},race:function(){return i.V},retry:function(){return k},select:function(){return i.a3},setContext:function(){return i.a7},spawn:function(){return i.a1},take:function(){return i.K},takeEvery:function(){return v},takeLatest:function(){return m},takeLeading:function(){return y},takeMaybe:function(){return i.X},throttle:function(){return g}});var r=n(5609),i=n(6867),a=function(e){return{done:!0,value:e}},o={};function u(e){return(0,r.CE)(e)?"channel":(0,r.eR)(e)?String(e):(0,r.Yl)(e)?e.name:String(e)}function s(e,t,n){var r,u,s,c=t;function l(t,n){if(c===o)return a(t);if(n&&!u)throw c=o,n;r&&r(t);var i=n?e[u](n):e[c]();return c=i.nextState,s=i.effect,r=i.stateUpdater,u=i.errorState,c===o?a(t):s}return(0,i.q)(l,(function(e){return l(null,e)}),n)}function c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c={done:!1,value:(0,i.K)(e)},l=function(e){return{done:!1,value:i.L.apply(void 0,[t].concat(r,[e]))}},f=function(e){return o=e};return s({q1:function(){return{nextState:"q2",effect:c,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:l(o)}}},"q1","takeEvery("+u(e)+", "+t.name+")")}function l(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c,l={done:!1,value:(0,i.K)(e)},f=function(e){return{done:!1,value:i.L.apply(void 0,[t].concat(r,[e]))}},h=function(e){return{done:!1,value:(0,i.M)(e)}},d=function(e){return o=e},p=function(e){return c=e};return s({q1:function(){return{nextState:"q2",effect:l,stateUpdater:p}},q2:function(){return o?{nextState:"q3",effect:h(o)}:{nextState:"q1",effect:f(c),stateUpdater:d}},q3:function(){return{nextState:"q1",effect:f(c),stateUpdater:d}}},"q1","takeLatest("+u(e)+", "+t.name+")")}function f(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o,c={done:!1,value:(0,i.K)(e)},l=function(e){return{done:!1,value:i.N.apply(void 0,[t].concat(r,[e]))}},f=function(e){return o=e};return s({q1:function(){return{nextState:"q2",effect:c,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:l(o)}}},"q1","takeLeading("+u(e)+", "+t.name+")")}function h(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];var c,l,f={done:!1,value:(0,i.O)(t,(0,i.Q)(1))},h=function(){return{done:!1,value:(0,i.K)(l)}},d=function(e){return{done:!1,value:i.L.apply(void 0,[n].concat(a,[e]))}},p={done:!1,value:(0,i.U)(e)},v=function(e){return c=e},m=function(e){return l=e};return s({q1:function(){return{nextState:"q2",effect:f,stateUpdater:m}},q2:function(){return{nextState:"q3",effect:h(),stateUpdater:v}},q3:function(){return{nextState:"q4",effect:d(c)}},q4:function(){return{nextState:"q2",effect:p}}},"q1","throttle("+u(t)+", "+n.name+")")}function d(e,t,n){for(var r=e,a=arguments.length,u=new Array(a>3?a-3:0),c=3;c<a;c++)u[c-3]=arguments[c];var l={done:!1,value:i.N.apply(void 0,[n].concat(u))},f={done:!1,value:(0,i.U)(t)};return s({q1:function(){return{nextState:"q2",effect:l,errorState:"q10"}},q2:function(){return{nextState:o}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:f}}},"q1","retry("+n.name+")")}function p(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];var c,l,f={done:!1,value:(0,i.K)(t)},h={done:!1,value:(0,i.V)({action:(0,i.K)(t),debounce:(0,i.U)(e)})},d=function(e){return{done:!1,value:i.L.apply(void 0,[n].concat(a,[e]))}},p=function(e){return{done:!1,value:e}},v=function(e){return c=e},m=function(e){return l=e};return s({q1:function(){return{nextState:"q2",effect:f,stateUpdater:v}},q2:function(){return{nextState:"q3",effect:h,stateUpdater:m}},q3:function(){return l.debounce?{nextState:"q1",effect:d(c)}:{nextState:"q2",effect:p(l.action),stateUpdater:v}}},"q1","debounce("+u(t)+", "+n.name+")")}function v(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[c,e,t].concat(r))}function m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[l,e,t].concat(r))}function y(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return i.L.apply(void 0,[f,e,t].concat(r))}function g(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.L.apply(void 0,[h,e,t,n].concat(a))}function k(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.N.apply(void 0,[d,e,t,n].concat(a))}function b(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return i.L.apply(void 0,[p,e,t,n].concat(a))}},7781:function(e,t,n){"use strict";n.d(t,{MT:function(){return c},UY:function(){return l},md:function(){return h},qC:function(){return f}});var r=n(1413);function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var a="function"===typeof Symbol&&Symbol.observable||"@@observable",o=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(i(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(i(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(i(2));var o=e,l=t,f=[],h=f,d=!1;function p(){h===f&&(h=f.slice())}function v(){if(d)throw new Error(i(3));return l}function m(e){if("function"!==typeof e)throw new Error(i(4));if(d)throw new Error(i(5));var t=!0;return p(),h.push(e),function(){if(t){if(d)throw new Error(i(6));t=!1,p();var n=h.indexOf(e);h.splice(n,1),f=null}}}function y(e){if(!s(e))throw new Error(i(7));if("undefined"===typeof e.type)throw new Error(i(8));if(d)throw new Error(i(9));try{d=!0,l=o(l,e)}finally{d=!1}for(var t=f=h,n=0;n<t.length;n++){(0,t[n])()}return e}function g(e){if("function"!==typeof e)throw new Error(i(10));o=e,y({type:u.REPLACE})}function k(){var e,t=m;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(v())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e}return y({type:u.INIT}),(r={dispatch:y,subscribe:m,getState:v,replaceReducer:g})[a]=k,r}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:u.INIT}))throw new Error(i(12));if("undefined"===typeof n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(n)}catch(c){o=c}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},u=0;u<s.length;u++){var c=s[u],l=n[c],f=e[c],h=l(f,t);if("undefined"===typeof h){t&&t.type;throw new Error(i(14))}a[c]=h,r=r||h!==f}return(r=r||s.length!==Object.keys(e).length)?a:e}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(i(15))},o={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map((function(e){return e(o)}));return a=f.apply(void 0,u)(n.dispatch),(0,r.Z)((0,r.Z)({},n),{},{dispatch:a})}}}},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=g.prototype=m.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return y.prototype=g,s(_,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,I=null,S=-1,C=5,T=-1;function N(){return!(t.unstable_now()-T<C)}function P(){if(null!==I){var e=t.unstable_now();T=e;var n=!0;try{n=I(!0,e)}finally{n?x():(E=!1,I=null)}}else E=!1}if("function"===typeof k)x=function(){k(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=P,x=function(){R.postMessage(null)}}else x=function(){y(P,0)};function O(e){I=e,E||(E=!0,x())}function D(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".037aa8de.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={};n.l=function(t,r,i,a){if(e[t])e[t].push(r);else{var o,u;if(void 0!==i)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var l=s[c];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")=="gt:"+i){o=l;break}}o||(u=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack","gt:"+i),o.src=t),e[t]=[r];var f=function(n,r){o.onerror=o.onload=null,clearTimeout(h);var i=e[t];if(delete e[t],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(e){return e(r)})),n)return n(r)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),u&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/microgreens/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkgt=self.webpackChunkgt||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return G},SDK_VERSION:function(){return at},_DEFAULT_ENTRY_NAME:function(){return He},_addComponent:function(){return Ye},_addOrOverwriteComponent:function(){return $e},_apps:function(){return Ze},_clearComponents:function(){return tt},_components:function(){return Qe},_getProvider:function(){return Je},_registerComponent:function(){return Xe},_removeServiceInstance:function(){return et},deleteApp:function(){return ct},getApp:function(){return ut},getApps:function(){return st},initializeApp:function(){return ot},onLog:function(){return ht},registerVersion:function(){return ft},setLogLevel:function(){return dt}});var t=n(2791),r=n(4164),i=n(4942);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function f(e){if(Array.isArray(e))return e}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return f(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||c(e,t)||h()}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(_k){return!1}}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function b(e,t){if(t&&("object"===k(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function w(e){var t=g();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function _(e,t,n){return _=g()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},_.apply(null,arguments)}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},x(e)}var E=n(7757),I=n.n(E),S=!1,C=!1,T="${JSCORE_VERSION}",N=function(e,t){if(!e)throw P(t)},P=function(e){return new Error("Firebase Database ("+T+") INTERNAL ASSERT FAILED: "+e)},A=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},R={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(A(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},O=function(e){var t=A(e);return R.encodeByteArray(t,!0)},D=function(e){return O(e).replace(/\./g,"")},L=function(e){try{return R.decodeString(e,!0)}catch(_k){console.error("base64Decode failed: ",_k)}return null};function M(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=M(e[n],t[n]));return e}var j=function(){function e(){var t=this;a(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return u(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function F(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D(JSON.stringify({alg:"none",type:"JWT"})),D(JSON.stringify(a)),""].join(".")}function U(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function V(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(U())}function q(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(_k){return!1}}function B(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function z(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function W(){var e=U();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function K(){return!0===S||!0===C}function H(){return"object"===typeof indexedDB}var G=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(p(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(p(o),Z.prototype.create),o}return u(n)}(x(Error)),Z=function(){function e(t,n,r){a(this,e),this.service=t,this.serviceName=n,this.errors=r}return u(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Q(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new G(n,a,t);return o}}]),e}();function Q(e,t){return e.replace(Y,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Y=/\{\$([^}]+)}/g;function $(e){return JSON.parse(e)}function X(e){return JSON.stringify(e)}var J=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=$(L(a[0])||""),n=$(L(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(_k){}return{header:t,claims:n,data:r,signature:i}};function ee(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function te(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ne(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function re(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ie(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ae(u)&&ae(s)){if(!ie(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ae(e){return null!==e&&"object"===typeof e}function oe(e){for(var t=[],n=function(){var e=d(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ue(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=d(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function se(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ce=function(){function e(){a(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return u(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function le(e,t){var n=new fe(e,t);return n.subscribe.bind(n)}var fe=function(){function e(t,n){var r=this;a(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return u(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=l(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=he),void 0===r.error&&(r.error=he),void 0===r.complete&&(r.complete=he);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(_k){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(_k){"undefined"!==typeof console&&console.error&&console.error(_k)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function he(){}var de=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function pe(e,t){return"".concat(e," failed: ").concat(t," argument ")}function ve(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(pe(e,t)+"must be a valid function.")}function me(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(pe(e,t)+"must be a valid context object.")}var ye=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ge(e){return e&&e._delegate?e._delegate:e}function ke(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var be=function(){function e(t){a(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return u(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new we(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new _e(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),we=function(){function e(t){var n=this;a(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return u(e,[{key:"objectStore",value:function(e){return new _e(this._transaction.objectStore(e))}}]),e}(),_e=function(){function e(t){a(this,e),this._store=t}return u(e,[{key:"index",value:function(e){return new xe(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new xe(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return ke(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return ke(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return ke(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return ke(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),xe=function(){function e(t){a(this,e),this._index=t}return u(e,[{key:"get",value:function(e){return ke(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function Ee(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ie(e){return function(e){if(Array.isArray(e))return s(e)}(e)||Ee(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(TO){return void n(TO)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Se(a,r,i,o,u,"next",e)}function u(e){Se(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Te=function(){function e(t,n,r){a(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return u(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ne="[DEFAULT]",Pe=function(){function e(t,n){a(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return u(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new j;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(_k){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(_k){if(r)return null;throw _k}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch(_k){}var t,n=l(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(_k){}}}catch(s){n.e(s)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ce(E.mark((function e(){var t;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ie(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ie(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=l(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=d(i.value,2),s=u[0],c=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(ev){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ne?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(ev){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;return this.component?this.component.multipleInstances?e:Ne:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ae,Re,Oe=function(){function e(t){a(this,e),this.name=t,this.providers=new Map}return u(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Pe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),De=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Re||(Re={}));var Le,Me,je={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},Fe=Re.INFO,Ue=(Ae={},(0,i.Z)(Ae,Re.DEBUG,"log"),(0,i.Z)(Ae,Re.VERBOSE,"log"),(0,i.Z)(Ae,Re.INFO,"info"),(0,i.Z)(Ae,Re.WARN,"warn"),(0,i.Z)(Ae,Re.ERROR,"error"),Ae),Ve=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ue[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},qe=function(){function e(t){a(this,e),this.name=t,this._logLevel=Fe,this._logHandler=Ve,this._userLogHandler=null,De.push(this)}return u(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Re))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?je[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.DEBUG].concat(t)),this._logHandler.apply(this,[this,Re.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Re.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.INFO].concat(t)),this._logHandler.apply(this,[this,Re.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.WARN].concat(t)),this._logHandler.apply(this,[this,Re.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.ERROR].concat(t)),this._logHandler.apply(this,[this,Re.ERROR].concat(t))}}]),e}();var Be=function(){function e(t){a(this,e),this.container=t}return u(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ze="@firebase/app",We="0.7.21",Ke=new qe("@firebase/app"),He="[DEFAULT]",Ge=(Le={},(0,i.Z)(Le,ze,"fire-core"),(0,i.Z)(Le,"@firebase/app-compat","fire-core-compat"),(0,i.Z)(Le,"@firebase/analytics","fire-analytics"),(0,i.Z)(Le,"@firebase/analytics-compat","fire-analytics-compat"),(0,i.Z)(Le,"@firebase/app-check","fire-app-check"),(0,i.Z)(Le,"@firebase/app-check-compat","fire-app-check-compat"),(0,i.Z)(Le,"@firebase/auth","fire-auth"),(0,i.Z)(Le,"@firebase/auth-compat","fire-auth-compat"),(0,i.Z)(Le,"@firebase/database","fire-rtdb"),(0,i.Z)(Le,"@firebase/database-compat","fire-rtdb-compat"),(0,i.Z)(Le,"@firebase/functions","fire-fn"),(0,i.Z)(Le,"@firebase/functions-compat","fire-fn-compat"),(0,i.Z)(Le,"@firebase/installations","fire-iid"),(0,i.Z)(Le,"@firebase/installations-compat","fire-iid-compat"),(0,i.Z)(Le,"@firebase/messaging","fire-fcm"),(0,i.Z)(Le,"@firebase/messaging-compat","fire-fcm-compat"),(0,i.Z)(Le,"@firebase/performance","fire-perf"),(0,i.Z)(Le,"@firebase/performance-compat","fire-perf-compat"),(0,i.Z)(Le,"@firebase/remote-config","fire-rc"),(0,i.Z)(Le,"@firebase/remote-config-compat","fire-rc-compat"),(0,i.Z)(Le,"@firebase/storage","fire-gcs"),(0,i.Z)(Le,"@firebase/storage-compat","fire-gcs-compat"),(0,i.Z)(Le,"@firebase/firestore","fire-fst"),(0,i.Z)(Le,"@firebase/firestore-compat","fire-fst-compat"),(0,i.Z)(Le,"fire-js","fire-js"),(0,i.Z)(Le,"firebase","fire-js-all"),Le),Ze=new Map,Qe=new Map;function Ye(e,t){try{e.container.addComponent(t)}catch(_k){Ke.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),_k)}}function $e(e,t){e.container.addOrOverwriteComponent(t)}function Xe(e){var t=e.name;if(Qe.has(t))return Ke.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qe.set(t,e);var n,r=l(Ze.values());try{for(r.s();!(n=r.n()).done;){Ye(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Je(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function et(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:He;Je(e,t).clearInstance(n)}function tt(){Qe.clear()}var nt=(Me={},(0,i.Z)(Me,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,i.Z)(Me,"bad-app-name","Illegal App name: '{$appName}"),(0,i.Z)(Me,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,i.Z)(Me,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,i.Z)(Me,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,i.Z)(Me,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,i.Z)(Me,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,i.Z)(Me,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,i.Z)(Me,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,i.Z)(Me,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Me),rt=new Z("app","Firebase",nt),it=function(){function e(t,n,r){var i=this;a(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Te("app",(function(){return i}),"PUBLIC"))}return u(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw rt.create("app-deleted",{appName:this._name})}}]),e}(),at="9.6.11";function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:He,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw rt.create("bad-app-name",{appName:String(i)});var a=Ze.get(i);if(a){if(ie(e,a.options)&&ie(r,a.config))return a;throw rt.create("duplicate-app",{appName:i})}var o,u=new Oe(i),s=l(Qe.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var f=new it(e,r,u);return Ze.set(i,f),f}function ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=Ze.get(e);if(!t)throw rt.create("no-app",{appName:e});return t}function st(){return Array.from(Ze.values())}function ct(e){return lt.apply(this,arguments)}function lt(){return(lt=Ce(E.mark((function e(t){var n;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ze.has(n)){e.next=6;break}return Ze.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e,t,n){var r,i=null!==(r=Ge[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ke.warn(u.join(" "))}Xe(new Te("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ht(e,t){if(null!==e&&"function"!==typeof e)throw rt.create("invalid-log-argument");!function(e,t){var n,r=l(De);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=je[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Re[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function dt(e){var t;t=e,De.forEach((function(e){e.setLogLevel(t)}))}var pt="firebase-heartbeat-store",vt=null;function mt(){var e,t,n;return vt||(vt=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(pt)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new be(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new be(a.result),e.oldVersion,e.newVersion,new we(a.transaction))}}catch(_k){i("Error opening indexedDB: ".concat(_k.message))}}))).catch((function(e){throw rt.create("storage-open",{originalErrorMessage:e.message})}))),vt}function yt(e){return gt.apply(this,arguments)}function gt(){return gt=Ce(E.mark((function e(t){var n;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt();case 3:return n=e.sent,e.abrupt("return",n.transaction(pt).objectStore(pt).get(wt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),rt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),gt.apply(this,arguments)}function kt(e,t){return bt.apply(this,arguments)}function bt(){return bt=Ce(E.mark((function e(t,n){var r,i,a;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mt();case 3:return r=e.sent,i=r.transaction(pt,"readwrite"),a=i.objectStore(pt),e.next=8,a.put(n,wt(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),rt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),bt.apply(this,arguments)}function wt(e){return"".concat(e.name,"!").concat(e.options.appId)}var _t=function(){function e(t){var n=this;a(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ct(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return u(e,[{key:"triggerHeartbeat",value:function(){var e=Ce(E.mark((function e(){var t,n,r;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=xt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ce(E.mark((function e(){var t,n,r,i,a;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=xt(),n=Et(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=D(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xt(){return(new Date).toISOString().substring(0,10)}function Et(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=l(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Tt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Tt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var It,St,Ct=function(){function e(t){a(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return u(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ce(E.mark((function e(){return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(TO){t(TO)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ce(E.mark((function e(){var t;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,yt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ce(E.mark((function e(t){var n,r;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",kt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ce(E.mark((function e(t){var n,r;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",kt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ie(r.heartbeats),Ie(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Tt(e){return D(JSON.stringify({version:2,heartbeats:e})).length}It="",Xe(new Te("platform-logger",(function(e){return new Be(e)}),"PRIVATE")),Xe(new Te("heartbeat",(function(e){return new _t(e)}),"PRIVATE")),ft(ze,We,It),ft(ze,We,"esm2017"),ft("fire-js","");var Nt=function(){function e(t,n){var r=this;a(this,e),this._delegate=t,this.firebase=n,Ye(t,new Te("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return u(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ct(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ye(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){$e(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Pt=(St={},(0,i.Z)(St,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,i.Z)(St,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),St),At=new Z("app-compat","Firebase",Pt);var Rt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ot(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ee(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ft,setLogLevel:dt,onLog:ht,apps:null,SDK_VERSION:at,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Xe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw At.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&M(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ee(n,e=e||He))throw At.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Nt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){M(n,e)},createSubscribe:le,ErrorFactory:Z,deepExtend:M}),n}(),Ot=new qe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ot.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&Ot.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Lt=Rt;!function(e){ft("@firebase/app-compat","0.1.22",e)}();function Mt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function jt(){return jt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Mt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},jt.apply(this,arguments)}Lt.registerVersion("firebase","9.6.11","app-compat");var Ft,Ut="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Vt={},qt=qt||{},Bt=Ut||self;function zt(){}function Wt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Kt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ht="closure_uid_"+(1e9*Math.random()>>>0),Gt=0;function Zt(e,t,n){return e.call.apply(e.bind,arguments)}function Qt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Yt(e,t,n){return(Yt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zt:Qt).apply(null,arguments)}function $t(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xt(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Jt(){this.s=this.s,this.o=this.o}var en={};Jt.prototype.s=!1,Jt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ht)&&e[Ht]||(e[Ht]=++Gt)}(this);delete en[e]}},Jt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var tn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},nn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function rn(e){return Array.prototype.concat.apply([],arguments)}function an(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function on(e){return/^[\s\xa0]*$/.test(e)}var un,sn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function cn(e,t){return-1!=e.indexOf(t)}function ln(e,t){return e<t?-1:e>t?1:0}e:{var fn=Bt.navigator;if(fn){var hn=fn.userAgent;if(hn){un=hn;break e}}un=""}function dn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function pn(e){var t={};for(var n in e)t[n]=e[n];return t}var vn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<vn.length;a++)n=vn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function yn(e){return yn[" "](e),e}yn[" "]=zt;var gn,kn=cn(un,"Opera"),bn=cn(un,"Trident")||cn(un,"MSIE"),wn=cn(un,"Edge"),_n=wn||bn,xn=cn(un,"Gecko")&&!(cn(un.toLowerCase(),"webkit")&&!cn(un,"Edge"))&&!(cn(un,"Trident")||cn(un,"MSIE"))&&!cn(un,"Edge"),En=cn(un.toLowerCase(),"webkit")&&!cn(un,"Edge");function In(){var e=Bt.document;return e?e.documentMode:void 0}e:{var Sn="",Cn=function(){var e=un;return xn?/rv:([^\);]+)(\)|;)/.exec(e):wn?/Edge\/([\d\.]+)/.exec(e):bn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):En?/WebKit\/(\S+)/.exec(e):kn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Cn&&(Sn=Cn?Cn[1]:""),bn){var Tn=In();if(null!=Tn&&Tn>parseFloat(Sn)){gn=String(Tn);break e}}gn=Sn}var Nn,Pn={};function An(){return function(e){var t=Pn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=sn(String(gn)).split("."),n=sn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=ln(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||ln(0==a[2].length,0==o[2].length)||ln(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Bt.document&&bn){var Rn=In();Nn=Rn||(parseInt(gn,10)||void 0)}else Nn=void 0;var On=Nn,Dn=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Bt.addEventListener("test",zt,t),Bt.removeEventListener("test",zt,t)}catch(Nk){}return e}();function Ln(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Mn(e,t){if(Ln.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xn){e:{try{yn(t.nodeName);var i=!0;break e}catch(Rk){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:jn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Mn.Z.h.call(this)}}Ln.prototype.h=function(){this.defaultPrevented=!0},Xt(Mn,Ln);var jn={2:"touch",3:"pen",4:"mouse"};Mn.prototype.h=function(){Mn.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Fn="closure_listenable_"+(1e6*Math.random()|0),Un=0;function Vn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Un,this.ca=this.fa=!1}function qn(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Bn(e){this.src=e,this.g={},this.h=0}function zn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=tn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(qn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Wn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Bn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Wn(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Vn(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Kn="closure_lm_"+(1e6*Math.random()|0),Hn={};function Gn(e,t,n,r,i){if(r&&r.once)return Qn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Gn(e,t[a],n,r,i);return null}return n=nr(n),e&&e[Fn]?e.N(t,n,Kt(r)?!!r.capture:!!r,i):Zn(e,t,n,!1,r,i)}function Zn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Kt(i)?!!i.capture:!!i,u=er(e);if(u||(e[Kn]=u=new Bn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Jn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Dn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Xn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Qn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Qn(e,t[a],n,r,i);return null}return n=nr(n),e&&e[Fn]?e.O(t,n,Kt(r)?!!r.capture:!!r,i):Zn(e,t,n,!0,r,i)}function Yn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Yn(e,t[a],n,r,i);else r=Kt(r)?!!r.capture:!!r,n=nr(n),e&&e[Fn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Wn(a=e.g[t],n,r,i))&&(qn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=er(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Wn(t,n,r,i)),(n=-1<e?t[e]:null)&&$n(n))}function $n(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Fn])zn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Xn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=er(t))?(zn(n,e),0==n.h&&(n.src=null,t[Kn]=null)):qn(e)}}}function Xn(e){return e in Hn?Hn[e]:Hn[e]="on"+e}function Jn(e,t){if(e.ca)e=!0;else{t=new Mn(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&$n(e),e=n.call(r,t)}return e}function er(e){return(e=e[Kn])instanceof Bn?e:null}var tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function nr(e){return"function"===typeof e?e:(e[tr]||(e[tr]=function(t){return e.handleEvent(t)}),e[tr])}function rr(){Jt.call(this),this.i=new Bn(this),this.P=this,this.I=null}function ir(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ln(t,e);else if(t instanceof Ln)t.target=t.target||e;else{var i=t;mn(t=new Ln(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ar(o,r,!0,t)&&i}if(i=ar(o=t.g=e,r,!0,t)&&i,i=ar(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ar(o=t.g=n[a],r,!1,t)&&i}function ar(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&zn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Xt(rr,Jt),rr.prototype[Fn]=!0,rr.prototype.removeEventListener=function(e,t,n,r){Yn(this,e,t,n,r)},rr.prototype.M=function(){if(rr.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qn(n[r]);delete t.g[e],t.h--}}this.I=null},rr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},rr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var or=Bt.JSON.stringify;function ur(){var e=vr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var sr,cr=function(){function e(){a(this,e),this.h=this.g=null}return u(e,[{key:"add",value:function(e,t){var n=lr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),lr=new(function(){function e(t,n){a(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return u(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new fr}),(function(e){return e.reset()})),fr=function(){function e(){a(this,e),this.next=this.g=this.h=null}return u(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function hr(e){Bt.setTimeout((function(){throw e}),0)}function dr(e,t){sr||function(){var e=Bt.Promise.resolve(void 0);sr=function(){e.then(mr)}}(),pr||(sr(),pr=!0),vr.add(e,t)}var pr=!1,vr=new cr;function mr(){for(var e;e=ur();){try{e.h.call(e.g)}catch(Nk){hr(Nk)}var t=lr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}pr=!1}function yr(e,t){rr.call(this),this.h=e||1,this.g=t||Bt,this.j=Yt(this.kb,this),this.l=Date.now()}function gr(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function kr(e,t,n){if("function"===typeof e)n&&(e=Yt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Yt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Bt.setTimeout(e,t||0)}function br(e){e.g=kr((function(){e.g=null,e.i&&(e.i=!1,br(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Xt(yr,rr),(Ft=yr.prototype).da=!1,Ft.S=null,Ft.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ir(this,"tick"),this.da&&(gr(this),this.start()))}},Ft.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ft.M=function(){yr.Z.M.call(this),gr(this),delete this.g};var wr=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return u(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:br(this)}},{key:"M",value:function(){jt(y(n.prototype),"M",this).call(this),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Jt);function _r(e){Jt.call(this),this.h=e,this.g={}}Xt(_r,Jt);var xr=[];function Er(e,t,n,r){Array.isArray(n)||(n&&(xr[0]=n.toString()),n=xr);for(var i=0;i<n.length;i++){var a=Gn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ir(e){dn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$n(e)}),e),e.g={}}function Sr(){this.g=!0}function Cr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return or(n)}catch(xk){return t}}(e,n)+(r?" "+r:"")}))}_r.prototype.M=function(){_r.Z.M.call(this),Ir(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sr.prototype.Aa=function(){this.g=!1},Sr.prototype.info=function(){};var Tr={},Nr=null;function Pr(){return Nr=Nr||new rr}function Ar(e){Ln.call(this,Tr.Ma,e)}function Rr(e){var t=Pr();ir(t,new Ar(t,e))}function Or(e,t){Ln.call(this,Tr.STAT_EVENT,e),this.stat=t}function Dr(e){var t=Pr();ir(t,new Or(t,e))}function Lr(e,t){Ln.call(this,Tr.Na,e),this.size=t}function Mr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Bt.setTimeout((function(){e()}),t)}Tr.Ma="serverreachability",Xt(Ar,Ln),Tr.STAT_EVENT="statevent",Xt(Or,Ln),Tr.Na="timingevent",Xt(Lr,Ln);var jr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Fr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ur(){}function Vr(e){return e.h||(e.h=e.i())}function qr(){}Ur.prototype.h=null;var Br,zr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Wr(){Ln.call(this,"d")}function Kr(){Ln.call(this,"c")}function Hr(){}function Gr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new _r(this),this.P=Qr,e=_n?125:void 0,this.W=new yr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Zr}function Zr(){this.i=null,this.g="",this.h=!1}Xt(Wr,Ln),Xt(Kr,Ln),Xt(Hr,Ur),Hr.prototype.g=function(){return new XMLHttpRequest},Hr.prototype.i=function(){return{}},Br=new Hr;var Qr=45e3,Yr={},$r={};function Xr(e,t,n){e.K=1,e.v=wi(vi(t)),e.s=n,e.U=!0,Jr(e,null)}function Jr(e,t){e.F=Date.now(),ri(e),e.A=vi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Di(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Zr,e.g=La(e.l,n?t:null,!e.s),0<e.O&&(e.L=new wr(Yt(e.Ia,e,e.g),e.O)),Er(e.V,e.g,"readystatechange",e.gb),t=e.H?pn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Rr(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ei(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function ti(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ni(e,n))==$r){4==t&&(e.o=4,Dr(14),i=!1),Cr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Yr){e.o=4,Dr(15),Cr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Cr(e.j,e.m,r,null),si(e,r)}ei(e)&&r!=$r&&r!=Yr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Dr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ca(t),t.L=!0,Dr(11))):(Cr(e.j,e.m,n,"[Invalid Chunked Response]"),ui(e),oi(e))}function ni(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?$r:(n=Number(t.substring(n,r)),isNaN(n)?Yr:(r+=1)+n>t.length?$r:(t=t.substr(r,n),e.C=r+n,t))}function ri(e){e.Y=Date.now()+e.P,ii(e,e.P)}function ii(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Mr(Yt(e.eb,e),t)}function ai(e){e.B&&(Bt.clearTimeout(e.B),e.B=null)}function oi(e){0==e.l.G||e.I||Pa(e.l,e)}function ui(e){ai(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,gr(e.W),Ir(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function si(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||qi(n.i,e)))if(n.I=e.N,!e.J&&qi(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Na(n),ga(n)}Sa(n),Dr(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Mr(Yt(n.ab,n),6e3));if(1>=Vi(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Ra(n,11)}else if((e.J||n.g==e)&&Na(n),!on(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(cn(l,"spdy")||cn(l,"quic")||cn(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Bi(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,bi(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Da(r,r.H?r.la:null,r.W),d.J){zi(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ai(p),ri(p)),r.g=d}else Ia(r);0<n.l.length&&wa(n)}else"stop"!=a[0]&&"close"!=a[0]||Ra(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ra(n,7):ya(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Rr(4)}catch(a){}}function ci(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wt(e)||"string"===typeof e)nn(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Wt(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Wt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function li(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof li)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function fi(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];hi(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)hi(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function hi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ft=Gr.prototype).setTimeout=function(e){this.P=e},Ft.gb=function(e){e=e.target;var t=this.L;t&&3==ha(e)?t.l():this.Ia(e)},Ft.Ia=function(e){try{if(e==this.g)e:{var t=ha(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||_n||this.g&&(this.h.h||this.g.ga()||da(this.g)))){this.I||4!=t||7==n||Rr(8==n||0>=r?3:2),ai(this);var i=this.g.ba();this.N=i;t:if(ei(this)){var a=da(this.g);e="";var o=a.length,u=4==ha(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ui(this),oi(this);var s="";break t}this.h.i=new Bt.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!on(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Dr(12),ui(this),oi(this);break e}Cr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,si(this,i)}this.U?(ti(this,t,s),_n&&this.i&&3==t&&(Er(this.V,this.W,"tick",this.fb),this.W.start())):(Cr(this.j,this.m,s,null),si(this,s)),4==t&&ui(this),this.i&&!this.I&&(4==t?Pa(this.l,this):(this.i=!1,ri(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Dr(12)):(this.o=0,Dr(13)),ui(this),oi(this)}}}catch(t){}},Ft.fb=function(){if(this.g){var e=ha(this.g),t=this.g.ga();this.C<t.length&&(ai(this),ti(this,e,t),this.i&&4!=e&&ri(this))}},Ft.cancel=function(){this.I=!0,ui(this)},Ft.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Rr(3),Dr(17)),ui(this),this.o=2,oi(this)):ii(this,this.Y-e)},(Ft=li.prototype).R=function(){fi(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Ft.T=function(){return fi(this),this.g.concat()},Ft.get=function(e,t){return hi(this.h,e)?this.h[e]:t},Ft.set=function(e,t){hi(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Ft.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var di=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pi(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof pi){this.g=void 0!==t?t:e.g,mi(this,e.j),this.s=e.s,yi(this,e.i),gi(this,e.m),this.l=e.l,t=e.h;var n=new Pi;n.i=t.i,t.g&&(n.g=new li(t.g),n.h=t.h),ki(this,n),this.o=e.o}else e&&(n=String(e).match(di))?(this.g=!!t,mi(this,n[1]||"",!0),this.s=_i(n[2]||""),yi(this,n[3]||"",!0),gi(this,n[4]),this.l=_i(n[5]||"",!0),ki(this,n[6]||"",!0),this.o=_i(n[7]||"")):(this.g=!!t,this.h=new Pi(null,this.g))}function vi(e){return new pi(e)}function mi(e,t,n){e.j=n?_i(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yi(e,t,n){e.i=n?_i(t,!0):t}function gi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ki(e,t,n){t instanceof Pi?(e.h=t,function(e,t){t&&!e.j&&(Ai(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ri(this,t),Di(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=xi(t,Ti)),e.h=new Pi(t,e.g))}function bi(e,t,n){e.h.set(t,n)}function wi(e){return bi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _i(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ei),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ei(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}pi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xi(t,Ii,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(xi(t,Ii,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(xi(n,"/"==n.charAt(0)?Ci:Si,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xi(n,Ni)),e.join("")};var Ii=/[#\/\?@]/g,Si=/[#\?:]/g,Ci=/[#\?]/g,Ti=/[#\?@]/g,Ni=/#/g;function Pi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ai(e){e.g||(e.g=new li,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ri(e,t){Ai(e),t=Li(e,t),hi(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,hi((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&fi(e)))}function Oi(e,t){return Ai(e),t=Li(e,t),hi(e.g.h,t)}function Di(e,t,n){Ri(e,t),0<n.length&&(e.i=null,e.g.set(Li(e,t),an(n)),e.h+=n.length)}function Li(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ft=Pi.prototype).add=function(e,t){Ai(this),this.i=null,e=Li(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ft.forEach=function(e,t){Ai(this),this.g.forEach((function(n,r){nn(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Ft.T=function(){Ai(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ft.R=function(e){Ai(this);var t=[];if("string"===typeof e)Oi(this,e)&&(t=rn(t,this.g.get(Li(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=rn(t,e[n])}return t},Ft.set=function(e,t){return Ai(this),this.i=null,Oi(this,e=Li(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ft.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Mi=u((function e(t,n){a(this,e),this.h=t,this.g=n}));function ji(e){this.l=e||Fi,Bt.PerformanceNavigationTiming?e=0<(e=Bt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Bt.g&&Bt.g.Ea&&Bt.g.Ea()&&Bt.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fi=10;function Ui(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Vi(e){return e.h?1:e.g?e.g.size:0}function qi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Bi(e,t){e.g?e.g.add(t):e.h=t}function zi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Wi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=l(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return an(e.i)}function Ki(){}function Hi(){this.g=new Ki}function Gi(e,t,n){var r=n||"";try{ci(e,(function(e,n){var i=e;Kt(e)&&(i=or(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(_k){throw t.push(r+"type="+encodeURIComponent("_badmap")),_k}}function Zi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Rk){}}function Qi(e){this.l=e.$b||null,this.j=e.ib||!1}function Yi(e,t){rr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$i,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ji.prototype.cancel=function(){if(this.i=Wi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=l(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ki.prototype.stringify=function(e){return Bt.JSON.stringify(e,void 0)},Ki.prototype.parse=function(e){return Bt.JSON.parse(e,void 0)},Xt(Qi,Ur),Qi.prototype.g=function(){return new Yi(this.l,this.j)},Qi.prototype.i=function(e){return function(){return e}}({}),Xt(Yi,rr);var $i=0;function Xi(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ji(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ea(e)}function ea(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ft=Yi.prototype).open=function(e,t){if(this.readyState!=$i)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ea(this)},Ft.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Bt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ji(this)),this.readyState=$i},Ft.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Bt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xi(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Ft.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ji(this):ea(this),3==this.readyState&&Xi(this)}},Ft.Ua=function(e){this.g&&(this.response=this.responseText=e,Ji(this))},Ft.Ta=function(e){this.g&&(this.response=e,Ji(this))},Ft.ha=function(){this.g&&Ji(this)},Ft.setRequestHeader=function(e,t){this.v.append(e,t)},Ft.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ft.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ta=Bt.JSON.parse;function na(e){rr.call(this),this.headers=new li,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ra,this.K=this.L=!1}Xt(na,rr);var ra="",ia=/^https?$/i,aa=["POST","PUT"];function oa(e){return"content-type"==e.toLowerCase()}function ua(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,sa(e),la(e)}function sa(e){e.D||(e.D=!0,ir(e,"complete"),ir(e,"error"))}function ca(e){if(e.h&&"undefined"!=typeof qt&&(!e.C[1]||4!=ha(e)||2!=e.ba()))if(e.v&&4==ha(e))kr(e.Fa,0,e);else if(ir(e,"readystatechange"),4==ha(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(di)[1]||null;if(!a&&Bt.self&&Bt.self.location){var o=Bt.self.location.protocol;a=o.substr(0,o.length-1)}i=!ia.test(a?a.toLowerCase():"")}t=i}if(t)ir(e,"complete"),ir(e,"success");else{e.m=6;try{var u=2<ha(e)?e.g.statusText:""}catch(Pk){u=""}e.j=u+" ["+e.ba()+"]",sa(e)}}finally{la(e)}}}function la(e,t){if(e.g){fa(e);var n=e.g,r=e.C[0]?zt:null;e.g=null,e.C=null,t||ir(e,"ready");try{n.onreadystatechange=r}catch(_k){}}}function fa(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Bt.clearTimeout(e.A),e.A=null)}function ha(e){return e.g?e.g.readyState:0}function da(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ra:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Uk){return null}}function pa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return dn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bi(e,t,n))}function va(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ma(e){this.za=0,this.l=[],this.h=new Sr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=va("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=va("baseRetryDelayMs",5e3,e),this.$a=va("retryDelaySeedMs",1e4,e),this.Ya=va("forwardChannelMaxRetries",2,e),this.ra=va("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ji(e&&e.concurrentRequestLimit),this.Ca=new Hi,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ya(e){if(ka(e),3==e.G){var t=e.V++,n=vi(e.F);bi(n,"SID",e.J),bi(n,"RID",t),bi(n,"TYPE","terminate"),xa(e,n),(t=new Gr(e,e.h,t,void 0)).K=2,t.v=wi(vi(n)),n=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(n=Bt.navigator.sendBeacon(t.v.toString(),"")),!n&&Bt.Image&&((new Image).src=t.v,n=!0),n||(t.g=La(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ri(t)}Oa(e)}function ga(e){e.g&&(Ca(e),e.g.cancel(),e.g=null)}function ka(e){ga(e),e.u&&(Bt.clearTimeout(e.u),e.u=null),Na(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Bt.clearTimeout(e.m),e.m=null)}function ba(e,t){e.l.push(new Mi(e.Za++,t)),3==e.G&&wa(e)}function wa(e){Ui(e.i)||e.m||(e.m=!0,dr(e.Ha,e),e.C=0)}function _a(e,t){var n;n=t?t.m:e.V++;var r=vi(e.F);bi(r,"SID",e.J),bi(r,"RID",n),bi(r,"AID",e.U),xa(e,r),e.o&&e.s&&pa(r,e.o,e.s),n=new Gr(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ea(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Bi(e.i,n),Xr(n,r,t)}function xa(e,t){e.j&&ci({},(function(e,n){bi(t,n,e)}))}function Ea(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Yt(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Gi(l,o,"req"+c+"_")}catch(co){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ia(e){e.g||e.u||(e.Y=1,dr(e.Ga,e),e.A=0)}function Sa(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Mr(Yt(e.Ga,e),Aa(e,e.A)),e.A++,!0)}function Ca(e){null!=e.B&&(Bt.clearTimeout(e.B),e.B=null)}function Ta(e){e.g=new Gr(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=vi(e.oa);bi(t,"RID","rpc"),bi(t,"SID",e.J),bi(t,"CI",e.N?"0":"1"),bi(t,"AID",e.U),xa(e,t),bi(t,"TYPE","xmlhttp"),e.o&&e.s&&pa(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=wi(vi(t)),n.s=null,n.U=!0,Jr(n,e)}function Na(e){null!=e.v&&(Bt.clearTimeout(e.v),e.v=null)}function Pa(e,t){var n=null;if(e.g==t){Na(e),Ca(e),e.g=null;var r=2}else{if(!qi(e.i,t))return;n=t.D,zi(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ir(r=Pr(),new Lr(r,n,t,i)),wa(e)}else Ia(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Vi(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Mr(Yt(e.Ha,e,t),Aa(e,e.C)),e.C++,!0))}(e,t)||2==r&&Sa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ra(e,5);break;case 4:Ra(e,10);break;case 3:Ra(e,6);break;default:Ra(e,2)}}function Aa(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ra(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Yt(e.jb,e);n||(n=new pi("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||mi(n,"https"),wi(n)),function(e,t){var n=new Sr;if(Bt.Image){var r=new Image;r.onload=$t(Zi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=$t(Zi,n,r,"TestLoadImage: error",!1,t),r.onabort=$t(Zi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=$t(Zi,n,r,"TestLoadImage: timeout",!1,t),Bt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Dr(2);e.G=0,e.j&&e.j.va(t),Oa(e),ka(e)}function Oa(e){e.G=0,e.I=-1,e.j&&(0==Wi(e.i).length&&0==e.l.length||(e.i.i.length=0,an(e.l),e.l.length=0),e.j.ua())}function Da(e,t,n){var r=function(e){return e instanceof pi?vi(e):new pi(e,void 0)}(n);if(""!=r.i)t&&yi(r,t+"."+r.i),gi(r,r.m);else{var i=Bt.location;r=function(e,t,n,r){var i=new pi(null,void 0);return e&&mi(i,e),t&&yi(i,t),n&&gi(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&dn(e.aa,(function(e,t){bi(r,t,e)})),t=e.D,n=e.sa,t&&n&&bi(r,t,n),bi(r,"VER",e.ma),xa(e,r),r}function La(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new na(new Qi({ib:!0})):new na(e.qa)).L=e.H,t}function Ma(){}function ja(){if(bn&&!(10<=Number(On)))throw Error("Environmental error: no available transport.")}function Fa(e,t){rr.call(this),this.g=new ma(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!on(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!on(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new qa(this)}function Ua(e){Wr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Va(){Kr.call(this),this.status=1}function qa(e){this.g=e}(Ft=na.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Br.g(),this.C=this.u?Vr(this.u):Vr(Br),this.g.onreadystatechange=Yt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(Rk){return void ua(this,Rk)}e=n||"";var i=new li(this.headers);r&&ci(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=oa,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Bt.FormData&&e instanceof Bt.FormData,!(0<=tn(aa,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fa(this),0<this.B&&((this.K=function(e){return bn&&An()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yt(this.pa,this)):this.A=kr(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(Rk){ua(this,Rk)}},Ft.pa=function(){"undefined"!=typeof qt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ir(this,"timeout"),this.abort(8))},Ft.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ir(this,"complete"),ir(this,"abort"),la(this))},Ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),la(this,!0)),na.Z.M.call(this)},Ft.Fa=function(){this.s||(this.F||this.v||this.l?ca(this):this.cb())},Ft.cb=function(){ca(this)},Ft.ba=function(){try{return 2<ha(this)?this.g.status:-1}catch(Tk){return-1}},Ft.ga=function(){try{return this.g?this.g.responseText:""}catch(Tk){return""}},Ft.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ta(t)}},Ft.Da=function(){return this.m},Ft.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ft=ma.prototype).ma=8,Ft.G=1,Ft.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(Uk){}},Ft.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Gr(this,this.h,e,void 0),n=this.s;if(this.P&&(n?mn(n=pn(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ea(this,t,r),bi(i=vi(this.F),"RID",e),bi(i,"CVER",22),this.D&&bi(i,"X-HTTP-Session-Id",this.D),xa(this,i),this.o&&n&&pa(i,this.o,n),Bi(this.i,t),this.Ra&&bi(i,"TYPE","init"),this.ja?(bi(i,"$req",r),bi(i,"SID","null"),t.$=!0,Xr(t,i,null)):Xr(t,i,r),this.G=2}}else 3==this.G&&(e?_a(this,e):0==this.l.length||Ui(this.i)||_a(this))},Ft.Ga=function(){if(this.u=null,Ta(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Mr(Yt(this.bb,this),e)}},Ft.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Dr(10),ga(this),Ta(this))},Ft.ab=function(){null!=this.v&&(this.v=null,ga(this),Sa(this),Dr(19))},Ft.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Dr(2)):(this.h.info("Failed to ping google.com"),Dr(1))},(Ft=Ma.prototype).xa=function(){},Ft.wa=function(){},Ft.va=function(){},Ft.ua=function(){},Ft.Oa=function(){},ja.prototype.g=function(e,t){return new Fa(e,t)},Xt(Fa,rr),Fa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),dr(Yt(e.hb,e,t))),Dr(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Da(e,null,e.W),wa(e)},Fa.prototype.close=function(){ya(this.g)},Fa.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,ba(this.g,t)}else this.v?((t={}).__data__=or(e),ba(this.g,t)):ba(this.g,e)},Fa.prototype.M=function(){this.g.j=null,delete this.j,ya(this.g),delete this.g,Fa.Z.M.call(this)},Xt(Ua,Wr),Xt(Va,Kr),Xt(qa,Ma),qa.prototype.xa=function(){ir(this.g,"a")},qa.prototype.wa=function(e){ir(this.g,new Ua(e))},qa.prototype.va=function(e){ir(this.g,new Va(e))},qa.prototype.ua=function(){ir(this.g,"b")},ja.prototype.createWebChannel=ja.prototype.g,Fa.prototype.send=Fa.prototype.u,Fa.prototype.open=Fa.prototype.m,Fa.prototype.close=Fa.prototype.close,jr.NO_ERROR=0,jr.TIMEOUT=8,jr.HTTP_ERROR=6,Fr.COMPLETE="complete",qr.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",rr.prototype.listen=rr.prototype.N,na.prototype.listenOnce=na.prototype.O,na.prototype.getLastError=na.prototype.La,na.prototype.getLastErrorCode=na.prototype.Da,na.prototype.getStatus=na.prototype.ba,na.prototype.getResponseJson=na.prototype.Qa,na.prototype.getResponseText=na.prototype.ga,na.prototype.send=na.prototype.ea;var Ba=Vt.createWebChannelTransport=function(){return new ja},za=Vt.getStatEventTarget=function(){return Pr()},Wa=Vt.ErrorCode=jr,Ka=Vt.EventType=Fr,Ha=Vt.Event=Tr,Ga=Vt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Za=Vt.FetchXmlHttpFactory=Qi,Qa=Vt.WebChannel=qr,Ya=Vt.XhrIo=na,$a="@firebase/firestore",Xa=function(){function e(t){a(this,e),this.uid=t}return u(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Xa.UNAUTHENTICATED=new Xa(null),Xa.GOOGLE_CREDENTIALS=new Xa("google-credentials-uid"),Xa.FIRST_PARTY=new Xa("first-party-uid"),Xa.MOCK_USER=new Xa("mock-user");var Ja="9.6.11",eo=new qe("@firebase/firestore");function to(){return eo.logLevel}function no(e){if(eo.logLevel<=Re.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ao);eo.debug.apply(eo,["Firestore (".concat(Ja,"): ").concat(e)].concat(Ie(i)))}}function ro(e){if(eo.logLevel<=Re.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ao);eo.error.apply(eo,["Firestore (".concat(Ja,"): ").concat(e)].concat(Ie(i)))}}function io(e){if(eo.logLevel<=Re.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ao);eo.warn.apply(eo,["Firestore (".concat(Ja,"): ").concat(e)].concat(Ie(i)))}}function ao(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function oo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ja,") INTERNAL ASSERTION FAILED: ")+e;throw ro(t),new Error(t)}function uo(e,t){e||oo()}function so(e,t){return e}var co={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},lo=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return u(n)}(G),fo=u((function e(){var t=this;a(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ho=u((function e(t,n){a(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),po=function(){function e(){a(this,e)}return u(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xa.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),vo=function(){function e(t){a(this,e),this.token=t,this.changeListener=null}return u(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),mo=function(){function e(t){a(this,e),this.t=t,this.currentUser=Xa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return u(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new fo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new fo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){no("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(no("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(no("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(uo("string"==typeof n.accessToken),new ho(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return uo(null===e||"string"==typeof e),new Xa(e)}}]),e}(),yo=u((function e(t,n,r){a(this,e),this.type="FirstParty",this.user=Xa.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),go=function(){function e(t,n,r){a(this,e),this.h=t,this.l=n,this.m=r}return u(e,[{key:"getToken",value:function(){return Promise.resolve(new yo(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xa.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ko=u((function e(t){a(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),bo=function(){function e(t){a(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return u(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&no("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,no("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){no("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):no("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(uo("string"==typeof t.token),e.p=t.token,new ko(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),wo=function(){function e(t,n){var r=this;a(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return u(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function _o(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}wo.A=-1;var xo=function(){function e(){a(this,e)}return u(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=_o(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Eo(e,t){return e<t?-1:e>t?1:0}function Io(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function So(e){return e+"\0"}var Co=function(){function e(t,n){if(a(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new lo(co.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lo(co.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new lo(co.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lo(co.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return u(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Eo(this.nanoseconds,e.nanoseconds):Eo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),To=function(){function e(t){a(this,e),this.timestamp=t}return u(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Co(0,0))}},{key:"max",value:function(){return new e(new Co(253402300799,999999999))}}]),e}();function No(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Po(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ao(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ro=function(){function e(t,n,r){a(this,e),void 0===n?n=0:n>t.length&&oo(),void 0===r?r=t.length-n:r>t.length-n&&oo(),this.segments=t,this.offset=n,this.len=r}return u(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Oo=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new lo(co.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ie(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ro),Do=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Lo=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Do.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new lo(co.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new lo(co.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new lo(co.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new lo(co.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ro),Mo=function(){function e(t){a(this,e),this.fields=t,t.sort(Lo.comparator)}return u(e,[{key:"covers",value:function(e){var t,n=l(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Io(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var jo=function(e){function t(e){a(this,t),this.binaryString=e}return u(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Eo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();jo.EMPTY_BYTE_STRING=new jo("");var Fo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uo(e){if(uo(!!e),"string"==typeof e){var t=0,n=Fo.exec(e);if(uo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Vo(e.seconds),nanos:Vo(e.nanos)}}function Vo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qo(e){return"string"==typeof e?jo.fromBase64String(e):jo.fromUint8Array(e)}function Bo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zo(e){var t=e.mapValue.fields.__previous_value__;return Bo(t)?zo(t):t}function Wo(e){var t=Uo(e.mapValue.fields.__local_write_time__.timestampValue);return new Co(t.seconds,t.nanos)}var Ko=u((function e(t,n,r,i,o,u,s,c){a(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=s,this.useFetchStreams=c})),Ho=function(){function e(t,n){a(this,e),this.projectId=t,this.database=n||"(default)"}return u(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Go(e){return null==e}function Zo(e){return 0===e&&1/e==-1/0}function Qo(e){return"number"==typeof e&&Number.isInteger(e)&&!Zo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Yo=function(){function e(t){a(this,e),this.path=t}return u(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Oo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Oo.fromString(t))}},{key:"fromName",value:function(t){return new e(Oo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Oo.emptyPath())}},{key:"comparator",value:function(e,t){return Oo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Oo(t.slice()))}}]),e}(),$o={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xo={nullValue:"NULL_VALUE"};function Jo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Bo(e)?4:du(e)?9:10:oo()}function eu(e,t){if(e===t)return!0;var n=Jo(e);if(n!==Jo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wo(e).isEqual(Wo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Uo(e.timestampValue),r=Uo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qo(e.bytesValue).isEqual(qo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vo(e.geoPointValue.latitude)===Vo(t.geoPointValue.latitude)&&Vo(e.geoPointValue.longitude)===Vo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vo(e.integerValue)===Vo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Vo(e.doubleValue),r=Vo(t.doubleValue);return n===r?Zo(n)===Zo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Io(e.arrayValue.values||[],t.arrayValue.values||[],eu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(No(n)!==No(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!eu(n[i],r[i])))return!1;return!0}(e,t);default:return oo()}}function tu(e,t){return void 0!==(e.values||[]).find((function(e){return eu(e,t)}))}function nu(e,t){if(e===t)return 0;var n=Jo(e),r=Jo(t);if(n!==r)return Eo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Eo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Vo(e.integerValue||e.doubleValue),r=Vo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ru(e.timestampValue,t.timestampValue);case 4:return ru(Wo(e),Wo(t));case 5:return Eo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=qo(e),r=qo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Eo(n[i],r[i]);if(0!==a)return a}return Eo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Eo(Vo(e.latitude),Vo(t.latitude));return 0!==n?n:Eo(Vo(e.longitude),Vo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=nu(n[i],r[i]);if(a)return a}return Eo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Eo(r[o],a[o]);if(0!==u)return u;var s=nu(n[r[o]],i[a[o]]);if(0!==s)return s}return Eo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw oo()}}function ru(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Eo(e,t);var n=Uo(e),r=Uo(t),i=Eo(n.seconds,r.seconds);return 0!==i?i:Eo(n.nanos,r.nanos)}function iu(e){return au(e)}function au(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Uo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?qo(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Yo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=l(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=au(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=l(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(au(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):oo();var t,n}function ou(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function uu(e){return!!e&&"integerValue"in e}function su(e){return!!e&&"arrayValue"in e}function cu(e){return!!e&&"nullValue"in e}function lu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fu(e){return!!e&&"mapValue"in e}function hu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Po(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=hu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=hu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function du(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function pu(e){return"nullValue"in e?Xo:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ou(Ho.empty(),Yo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:oo()}function vu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ou(Ho.empty(),Yo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?$o:oo()}function mu(e,t){return void 0===e?t:void 0===t||nu(e,t)>0?e:t}function yu(e,t){return void 0===e?t:void 0===t||nu(e,t)<0?e:t}var gu=function(){function e(t){a(this,e),this.value=t}return u(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!fu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}},{key:"setAll",value:function(e){var t=this,n=Lo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=hu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());fu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return eu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];fu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Po(t,(function(t,n){return e[t]=n}));var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(hu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ku(e){var t=[];return Po(e.fields,(function(e,n){var r=new Lo([e]);if(fu(n)){var i=ku(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=l(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Mo(t)}var bu=function(){function e(t,n,r,i,o,u){a(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=o,this.documentState=u}return u(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=gu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=gu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,To.min(),To.min(),gu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,To.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,To.min(),gu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,To.min(),gu.empty(),2)}}]),e}(),wu=u((function e(t,n,r,i){a(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function _u(e){return e.fields.find((function(e){return 2===e.kind}))}function xu(e){return e.fields.filter((function(e){return 2!==e.kind}))}wu.UNKNOWN_ID=-1;var Eu=u((function e(t,n){a(this,e),this.fieldPath=t,this.kind=n})),Iu=function(){function e(t,n){a(this,e),this.sequenceNumber=t,this.offset=n}return u(e,null,[{key:"empty",value:function(){return new e(0,Tu.min())}}]),e}();function Su(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=To.fromTimestamp(1e9===r?new Co(n+1,0):new Co(n,r));return new Tu(i,Yo.empty(),t)}function Cu(e){return new Tu(e.readTime,e.key,-1)}var Tu=function(){function e(t,n,r){a(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return u(e,null,[{key:"min",value:function(){return new e(To.min(),Yo.empty(),-1)}},{key:"max",value:function(){return new e(To.max(),Yo.empty(),-1)}}]),e}();function Nu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Yo.comparator(e.documentKey,t.documentKey))?n:Eo(e.largestBatchId,t.largestBatchId)}var Pu=u((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;a(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=s,this.P=null}));function Au(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Pu(e,t,n,r,i,a,o)}function Ru(e){var t=so(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+iu(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Go(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return iu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return iu(e)})).join(",")),t.P=n}return t.P}function Ou(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Qu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!eu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$u(e.startAt,t.startAt)&&$u(e.endAt,t.endAt)}function Du(e){return Yo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Lu(e,t){return e.filters.filter((function(e){return e instanceof Fu&&e.field.isEqual(t)}))}function Mu(e,t,n){var r,i,a=!0,o=l(Lu(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case"<":case"<=":s=pu(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Xo}mu(r,s)===s&&(r=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var f=0;f<e.orderBy.length;++f)if(e.orderBy[f].field.isEqual(t)){var h=n.position[f];mu(r,h)===h&&(r=h,a=n.inclusive);break}return{value:r,inclusive:a}}function ju(e,t,n){var r,i,a=!0,o=l(Lu(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case">=":case">":s=vu(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=$o}yu(r,s)===s&&(r=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var f=0;f<e.orderBy.length;++f)if(e.orderBy[f].field.isEqual(t)){var h=n.position[f];yu(r,h)===h&&(r=h,a=n.inclusive);break}return{value:r,inclusive:a}}var Fu=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).field=e,o.op=r,o.value=i,o}return u(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(nu(t,this.value)):null!==t&&Jo(this.value)===Jo(t)&&this.v(nu(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return oo()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Uu(e,t,r):"array-contains"===t?new zu(e,r):"in"===t?new Wu(e,r):"not-in"===t?new Ku(e,r):"array-contains-any"===t?new Hu(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Vu(e,n):new qu(e,n)}}]),n}(function(){return u((function e(){a(this,e)}))}()),Uu=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this,e,r,i)).key=Yo.fromName(i.referenceValue),o}return u(n,[{key:"matches",value:function(e){var t=Yo.comparator(e.key,this.key);return this.v(t)}}]),n}(Fu),Vu=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,"in",r)).keys=Bu("in",r),i}return u(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Fu),qu=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,"not-in",r)).keys=Bu("not-in",r),i}return u(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Fu);function Bu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Yo.fromName(e.referenceValue)}))}var zu=function(e){m(n,e);var t=w(n);function n(e,r){return a(this,n),t.call(this,e,"array-contains",r)}return u(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return su(t)&&tu(t.arrayValue,this.value)}}]),n}(Fu),Wu=function(e){m(n,e);var t=w(n);function n(e,r){return a(this,n),t.call(this,e,"in",r)}return u(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&tu(this.value.arrayValue,t)}}]),n}(Fu),Ku=function(e){m(n,e);var t=w(n);function n(e,r){return a(this,n),t.call(this,e,"not-in",r)}return u(n,[{key:"matches",value:function(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!tu(this.value.arrayValue,t)}}]),n}(Fu),Hu=function(e){m(n,e);var t=w(n);function n(e,r){return a(this,n),t.call(this,e,"array-contains-any",r)}return u(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!su(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return tu(t.value.arrayValue,e)}))}}]),n}(Fu),Gu=u((function e(t,n){a(this,e),this.position=t,this.inclusive=n})),Zu=u((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";a(this,e),this.field=t,this.dir=n}));function Qu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Yu(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Yo.comparator(Yo.fromName(o.referenceValue),n.key):nu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function $u(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!eu(e.position[n],t.position[n]))return!1;return!0}var Xu=u((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;a(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=s,this.endAt=c,this.D=null,this.C=null,this.startAt,this.endAt}));function Ju(e,t,n,r,i,a,o,u){return new Xu(e,t,n,r,i,a,o,u)}function es(e){return new Xu(e)}function ts(e){return!Go(e.limit)&&"F"===e.limitType}function ns(e){return!Go(e.limit)&&"L"===e.limitType}function rs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function is(e){var t,n=l(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function as(e){return null!==e.collectionGroup}function os(e){var t=so(e);if(null===t.D){t.D=[];var n=is(t),r=rs(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Zu(n)),t.D.push(new Zu(Lo.keyField(),"asc"));else{var i,a=!1,o=l(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Zu(Lo.keyField(),s))}}}return t.D}function us(e){var t=so(e);if(!t.C)if("F"===t.limitType)t.C=Au(t.path,t.collectionGroup,os(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=l(os(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Zu(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Gu(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Gu(t.startAt.position,!t.startAt.inclusive):null;t.C=Au(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function ss(e,t,n){return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function cs(e,t){return Ou(us(e),us(t))&&e.limitType===t.limitType}function ls(e){return"".concat(Ru(us(e)),"|lt:").concat(e.limitType)}function fs(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(iu(t.value));var t})).join(", "),"]")),Go(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return iu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return iu(e)})).join(",")),"Target(".concat(t,")")}(us(e)),"; limitType=").concat(e.limitType,")")}function hs(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=l(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Yu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,os(e),t))&&!(e.endAt&&!function(e,t,n){var r=Yu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,os(e),t))}(e,t)}function ds(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ps(e){return function(t,n){var r,i=!1,a=l(os(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=vs(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function vs(e,t,n){var r=e.field.isKeyField()?Yo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?nu(r,i):oo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return oo()}}function ms(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zo(t)?"-0":t}}function ys(e){return{integerValue:""+e}}function gs(e,t){return Qo(t)?ys(t):ms(e,t)}var ks=u((function e(){a(this,e),this._=void 0}));function bs(e,t,n){return e instanceof xs?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Es?Is(e,t):e instanceof Ss?Cs(e,t):function(e,t){var n=_s(e,t),r=Ns(n)+Ns(e.k);return uu(n)&&uu(e.k)?ys(r):ms(e.M,r)}(e,t)}function ws(e,t,n){return e instanceof Es?Is(e,t):e instanceof Ss?Cs(e,t):n}function _s(e,t){return e instanceof Ts?uu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var xs=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n)}(ks),Es=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this)).elements=e,r}return u(n)}(ks);function Is(e,t){var n,r=Ps(t),i=l(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return eu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ss=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this)).elements=e,r}return u(n)}(ks);function Cs(e,t){var n,r=Ps(t),i=l(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!eu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ts=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).M=e,i.k=r,i}return u(n)}(ks);function Ns(e){return Vo(e.integerValue||e.doubleValue)}function Ps(e){return su(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var As=u((function e(t,n){a(this,e),this.field=t,this.transform=n}));var Rs=u((function e(t,n){a(this,e),this.version=t,this.transformResults=n})),Os=function(){function e(t,n){a(this,e),this.updateTime=t,this.exists=n}return u(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ds(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ls=u((function e(){a(this,e)}));function Ms(e,t,n){e instanceof qs?function(e,t,n){var r=e.value.clone(),i=Ws(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Bs?function(e,t,n){if(Ds(e.precondition,t)){var r=Ws(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(zs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function js(e,t,n){e instanceof qs?function(e,t,n){if(Ds(e.precondition,t)){var r=e.value.clone(),i=Ks(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Vs(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Bs?function(e,t,n){if(Ds(e.precondition,t)){var r=Ks(e.fieldTransforms,n,t),i=t.data;i.setAll(zs(e)),i.setAll(r),t.convertToFoundDocument(Vs(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Ds(e.precondition,t)&&t.convertToNoDocument(To.min())}(e,t)}function Fs(e,t){var n,r=null,i=l(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_s(a.transform,o||null);null!=u&&(null==r&&(r=gu.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Us(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Io(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Es&&t instanceof Es||e instanceof Ss&&t instanceof Ss?Io(e.elements,t.elements,eu):e instanceof Ts&&t instanceof Ts?eu(e.k,t.k):e instanceof xs&&t instanceof xs}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Vs(e){return e.isFoundDocument()?e.version:To.min()}var qs=function(e){m(n,e);var t=w(n);function n(e,r,i){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return a(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=i,o.fieldTransforms=u,o.type=0,o}return u(n)}(Ls),Bs=function(e){m(n,e);var t=w(n);function n(e,r,i,o){var u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return a(this,n),(u=t.call(this)).key=e,u.data=r,u.fieldMask=i,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return u(n)}(Ls);function zs(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ws(e,t,n){var r=new Map;uo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ws(o,u,n[i]))}return r}function Ks(e,t,n){var r,i=new Map,a=l(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,bs(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Hs,Gs,Zs=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return u(n)}(Ls),Qs=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return u(n)}(Ls),Ys=u((function e(t){a(this,e),this.count=t}));function $s(e){switch(e){default:return oo();case co.CANCELLED:case co.UNKNOWN:case co.DEADLINE_EXCEEDED:case co.RESOURCE_EXHAUSTED:case co.INTERNAL:case co.UNAVAILABLE:case co.UNAUTHENTICATED:return!1;case co.INVALID_ARGUMENT:case co.NOT_FOUND:case co.ALREADY_EXISTS:case co.PERMISSION_DENIED:case co.FAILED_PRECONDITION:case co.ABORTED:case co.OUT_OF_RANGE:case co.UNIMPLEMENTED:case co.DATA_LOSS:return!0}}function Xs(e){if(void 0===e)return ro("GRPC error has no .code"),co.UNKNOWN;switch(e){case Hs.OK:return co.OK;case Hs.CANCELLED:return co.CANCELLED;case Hs.UNKNOWN:return co.UNKNOWN;case Hs.DEADLINE_EXCEEDED:return co.DEADLINE_EXCEEDED;case Hs.RESOURCE_EXHAUSTED:return co.RESOURCE_EXHAUSTED;case Hs.INTERNAL:return co.INTERNAL;case Hs.UNAVAILABLE:return co.UNAVAILABLE;case Hs.UNAUTHENTICATED:return co.UNAUTHENTICATED;case Hs.INVALID_ARGUMENT:return co.INVALID_ARGUMENT;case Hs.NOT_FOUND:return co.NOT_FOUND;case Hs.ALREADY_EXISTS:return co.ALREADY_EXISTS;case Hs.PERMISSION_DENIED:return co.PERMISSION_DENIED;case Hs.FAILED_PRECONDITION:return co.FAILED_PRECONDITION;case Hs.ABORTED:return co.ABORTED;case Hs.OUT_OF_RANGE:return co.OUT_OF_RANGE;case Hs.UNIMPLEMENTED:return co.UNIMPLEMENTED;case Hs.DATA_LOSS:return co.DATA_LOSS;default:return oo()}}(Gs=Hs||(Hs={}))[Gs.OK=0]="OK",Gs[Gs.CANCELLED=1]="CANCELLED",Gs[Gs.UNKNOWN=2]="UNKNOWN",Gs[Gs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gs[Gs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gs[Gs.NOT_FOUND=5]="NOT_FOUND",Gs[Gs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gs[Gs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gs[Gs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gs[Gs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gs[Gs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gs[Gs.ABORTED=10]="ABORTED",Gs[Gs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gs[Gs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gs[Gs.INTERNAL=13]="INTERNAL",Gs[Gs.UNAVAILABLE=14]="UNAVAILABLE",Gs[Gs.DATA_LOSS=15]="DATA_LOSS";var Js=function(){function e(t,n){a(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return u(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Po(this.inner,(function(t,n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ao(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ec=function(){function e(t,n){a(this,e),this.comparator=t,this.root=n||nc.EMPTY}return u(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,nc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new tc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new tc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new tc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new tc(this.root,e,this.comparator,!0)}}]),e}(),tc=function(){function e(t,n,r,i){a(this,e),this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return u(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),nc=function(){function e(t,n,r,i,o){a(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return u(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw oo();if(this.right.isRed())throw oo();var e=this.left.check();if(e!==this.right.check())throw oo();return e+(this.isRed()?0:1)}}]),e}();nc.EMPTY=null,nc.RED=!0,nc.BLACK=!1,nc.EMPTY=new(function(){function e(){a(this,e),this.size=0}return u(e,[{key:"key",get:function(){throw oo()}},{key:"value",get:function(){throw oo()}},{key:"color",get:function(){throw oo()}},{key:"left",get:function(){throw oo()}},{key:"right",get:function(){throw oo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new nc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var rc=function(){function e(t){a(this,e),this.comparator=t,this.data=new ec(this.comparator)}return u(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ic(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ic(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ic=function(){function e(t){a(this,e),this.iter=t}return u(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ac(e){return e.hasNext()?e.getNext():void 0}var oc=new ec(Yo.comparator);function uc(){return oc}var sc=new ec(Yo.comparator);function cc(){return sc}function lc(){return new Js((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var fc=new ec(Yo.comparator),hc=new rc(Yo.comparator);function dc(){for(var e=hc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var pc=new rc(Eo);function vc(){return pc}var mc=function(){function e(t,n,r,i,o){a(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return u(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,yc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(To.min(),r,vc(),uc(),dc())}}]),e}(),yc=function(){function e(t,n,r,i,o){a(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return u(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(jo.EMPTY_BYTE_STRING,n,dc(),dc(),dc())}}]),e}(),gc=u((function e(t,n,r,i){a(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),kc=u((function e(t,n){a(this,e),this.targetId=t,this.$=n})),bc=u((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jo.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;a(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),wc=function(){function e(){a(this,e),this.B=0,this.L=Ec(),this.U=jo.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return u(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=dc(),t=dc(),n=dc();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:oo()}})),new yc(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Ec()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),_c=function(){function e(t){a(this,e),this.nt=t,this.st=new Map,this.it=uc(),this.rt=xc(),this.ot=new rc(Eo)}return u(e,[{key:"ut",value:function(e){var t,n=l(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=l(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:oo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Du(i))if(0===n){var a=new Yo(i.path);this.ct(t,a,bu.newNoDocument(a,To.min()))}else uo(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Du(a.target)){var o=new Yo(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,bu.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=dc();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new mc(e,n,this.ot,this.it,r);return this.it=uc(),this.rt=xc(),this.ot=new rc(Eo),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new wc,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new rc(Eo),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||no("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new wc),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function xc(){return new ec(Yo.comparator)}function Ec(){return new ec(Yo.comparator)}var Ic={asc:"ASCENDING",desc:"DESCENDING"},Sc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cc=u((function e(t,n){a(this,e),this.databaseId=t,this.N=n}));function Tc(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Nc(e,t){return e.N?t.toBase64():t.toUint8Array()}function Pc(e,t){return Tc(e,t.toTimestamp())}function Ac(e){return uo(!!e),To.fromTimestamp(function(e){var t=Uo(e);return new Co(t.seconds,t.nanos)}(e))}function Rc(e,t){return function(e){return new Oo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Oc(e){var t=Oo.fromString(e);return uo(nl(t)),t}function Dc(e,t){return Rc(e.databaseId,t.path)}function Lc(e,t){var n=Oc(t);if(n.get(1)!==e.databaseId.projectId)throw new lo(co.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new lo(co.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yo(Uc(n))}function Mc(e,t){return Rc(e.databaseId,t)}function jc(e){var t=Oc(e);return 4===t.length?Oo.emptyPath():Uc(t)}function Fc(e){return new Oo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uc(e){return uo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vc(e,t,n){return{name:Dc(e,t),fields:n.value.mapValue.fields}}function qc(e,t,n){var r=Lc(e,t.name),i=Ac(t.updateTime),a=new gu({mapValue:{fields:t.fields}}),o=bu.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Bc(e,t){return"found"in t?function(e,t){uo(!!t.found),t.found.name,t.found.updateTime;var n=Lc(e,t.found.name),r=Ac(t.found.updateTime),i=new gu({mapValue:{fields:t.found.fields}});return bu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){uo(!!t.missing),uo(!!t.readTime);var n=Lc(e,t.missing),r=Ac(t.readTime);return bu.newNoDocument(n,r)}(e,t):oo()}function zc(e,t){var n;if(t instanceof qs)n={update:Vc(e,t.key,t.value)};else if(t instanceof Zs)n={delete:Dc(e,t.key)};else if(t instanceof Bs)n={update:Vc(e,t.key,t.data),updateMask:tl(t.fieldMask)};else{if(!(t instanceof Qs))return oo();n={verify:Dc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof xs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Es)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ss)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ts)return{fieldPath:t.field.canonicalString(),increment:n.k};throw oo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Pc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:oo()}(e,t.precondition)),n}function Wc(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Os.updateTime(Ac(e.updateTime)):void 0!==e.exists?Os.exists(e.exists):Os.none()}(t.currentDocument):Os.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)uo("REQUEST_TIME"===t.setToServerValue),n=new xs;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Es(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ss(i)}else"increment"in t?n=new Ts(e,t.increment):oo();var a=Lo.fromServerFormat(t.fieldPath);return new As(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Lc(e,t.update.name),a=new gu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Mo(t.map((function(e){return Lo.fromServerFormat(e)})))}(t.updateMask);return new Bs(i,a,o,n,r)}return new qs(i,a,n,r)}if(t.delete){var u=Lc(e,t.delete);return new Zs(u,n)}if(t.verify){var s=Lc(e,t.verify);return new Qs(s,n)}return oo()}function Kc(e,t){return{documents:[Mc(e,t.path)]}}function Hc(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Mc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Mc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(lu(e.value))return{unaryFilter:{field:$c(e.field),op:"IS_NAN"}};if(cu(e.value))return{unaryFilter:{field:$c(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lu(e.value))return{unaryFilter:{field:$c(e.field),op:"IS_NOT_NAN"}};if(cu(e.value))return{unaryFilter:{field:$c(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$c(e.field),op:Yc(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:$c(e.field),direction:Qc(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Go(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Gc(e){var t=jc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){uo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Zc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Zu(Xc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Go(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Gu(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Gu(n,t)}(n.endAt)),Ju(t,i,u,o,s,"F",c,l)}function Zc(e){return e?void 0!==e.unaryFilter?[el(e)]:void 0!==e.fieldFilter?[Jc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Zc(e)})).reduce((function(e,t){return e.concat(t)})):oo():[]}function Qc(e){return Ic[e]}function Yc(e){return Sc[e]}function $c(e){return{fieldPath:e.canonicalString()}}function Xc(e){return Lo.fromServerFormat(e.fieldPath)}function Jc(e){return Fu.create(Xc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oo()}}(e.fieldFilter.op),e.fieldFilter.value)}function el(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Xc(e.unaryFilter.field);return Fu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Xc(e.unaryFilter.field);return Fu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xc(e.unaryFilter.field);return Fu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xc(e.unaryFilter.field);return Fu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return oo()}}function tl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function nl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function rl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=al(t)),t=il(e.get(n),t);return al(t)}function il(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function al(e){return e+"\x01\x01"}function ol(e){var t=e.length;if(uo(t>=2),2===t)return uo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Oo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&oo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:oo()}a=o+2}return new Oo(r)}var ul=["userId","batchId"];function sl(e,t){return[e,rl(t)]}function cl(e,t,n){return[e,rl(t),n]}var ll={},fl=["prefixPath","collectionGroup","readTime","documentId"],hl=["prefixPath","collectionGroup","documentId"],dl=["collectionGroup","readTime","prefixPath","documentId"],pl=["canonicalId","targetId"],vl=["targetId","path"],ml=["path","targetId"],yl=["collectionId","parent"],gl=["indexId","uid"],kl=["uid","sequenceNumber"],bl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wl=["indexId","uid","orderedDocumentKey"],_l=["userId","collectionPath","documentId"],xl=["userId","collectionPath","largestBatchId"],El=["userId","collectionGroup","largestBatchId"],Il=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Sl=[].concat(Ie(Il),["documentOverlays"]),Cl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tl=[].concat(Cl,["indexConfiguration","indexState","indexEntries"]),Nl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pl=function(){function e(){a(this,e),this.onCommittedListeners=[]}return u(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Al=function(){function e(t){var n=this;a(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return u(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&oo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=l(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Rl=function(){function e(t,n){var r=this;a(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new fo,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Ll(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Vl(e.target.error);r.At.reject(new Ll(t,n))}}return u(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(no("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new jl(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ll(n,t)}}}]),e}(),Ol=function(){function e(t,n,r){a(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(U())&&ro("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return u(e,[{key:"Nt",value:function(){var e=Ce(I().mark((function e(t){var n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return no("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ll(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new lo(co.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new lo(co.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ll(t,n))},i.onupgradeneeded=function(e){no("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){no("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ce(I().mark((function e(t,n,r,i){var a,o,u,s,c=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(I().mark((function e(){var n,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Rl.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),Al.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,no("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return no("SimpleDb","Removing database:",e),Fl(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!H())return!1;if(e.St())return!0;var t=U(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/microgreens",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Dl=function(){function e(t){a(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return u(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Fl(this.Ft.delete())}}]),e}(),Ll=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,co.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return u(n)}(lo);function Ml(e){return"IndexedDbTransactionError"===e.name}var jl=function(){function e(t){a(this,e),this.store=t}return u(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(no("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(no("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Fl(n)}},{key:"add",value:function(e){return no("SimpleDb","ADD",this.store.name,e,e),Fl(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Fl(this.store.get(e)).next((function(n){return void 0===n&&(n=null),no("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return no("SimpleDb","DELETE",this.store.name,e),Fl(this.store.delete(e))}},{key:"count",value:function(){return no("SimpleDb","COUNT",this.store.name),Fl(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Al((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Al((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){no("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Al((function(n,r){t.onerror=function(e){var t=Vl(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Al((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Dl(i),o=t(i.primaryKey,i.value,a);if(o instanceof Al){var u=o.catch((function(e){return a.done(),Al.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Al.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Fl(e){return new Al((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Vl(e.target.error);n(t)}}))}var Ul=!1;function Vl(e){var t=Ol.Vt(U());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new lo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ul||(Ul=!0,setTimeout((function(){throw r}),0)),r}}return e}var ql=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return u(n)}(Pl);function Bl(e,t){var n=so(e);return Ol.xt(n.Ht,t)}var zl=function(){function e(t,n,r,i){a(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return u(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ms(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=l(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&js(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=l(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&js(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(To.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),dc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(function(e,t){return Us(e,t)}))&&Io(this.baseMutations,e.baseMutations,(function(e,t){return Us(e,t)}))}}]),e}(),Wl=function(){function e(t,n,r,i){a(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return u(e,null,[{key:"from",value:function(t,n,r){uo(t.mutations.length===r.length);for(var i=fc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Kl=function(){function e(t,n){a(this,e),this.largestBatchId=t,this.mutation=n}return u(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Hl=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:To.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:To.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jo.EMPTY_BYTE_STRING;a(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s}return u(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Gl=u((function e(t){a(this,e),this.Jt=t}));function Zl(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ql(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Dc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Tc(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Yl(t.version)};else{if(!t.isUnknownDocument())return oo();r.unknownDocument={path:n.path.toArray(),version:Yl(t.version)}}return r}function Ql(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Yl(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $l(e){var t=new Co(e.seconds,e.nanoseconds);return To.fromTimestamp(t)}function Xl(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Wc(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Wc(e.Jt,t)})),u=Co.fromMillis(t.localWriteTimeMs);return new zl(t.batchId,u,n,o)}function Jl(e){var t,n,r=$l(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?$l(e.lastLimboFreeSnapshotVersion):To.min();return void 0!==e.query.documents?(uo(1===(n=e.query).documents.length),t=us(es(jc(n.documents[0])))):t=function(e){return us(Gc(e))}(e.query),new Hl(t,e.targetId,0,e.lastListenSequenceNumber,r,i,jo.fromBase64String(e.resumeToken))}function ef(e,t){var n,r=Yl(t.snapshotVersion),i=Yl(t.lastLimboFreeSnapshotVersion);n=Du(t.target)?Kc(e.Jt,t.target):Hc(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ru(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function tf(e){var t=Gc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ss(t,t.limit,"L"):t}function nf(e,t){return new Kl(t.largestBatchId,Wc(e.Jt,t.overlayMutation))}function rf(e,t){var n=t.path.lastSegment();return[e,rl(t.path.popLast()),n]}var af=function(){function e(){a(this,e)}return u(e,[{key:"getBundleMetadata",value:function(e,t){return of(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:$l(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return of(e).put({bundleId:(n=t).id,createTime:Yl(Ac(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return uf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:tf(t.bundledQuery),readTime:$l(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return uf(e).put(function(e){return{name:e.name,readTime:Yl(Ac(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function of(e){return Bl(e,"bundles")}function uf(e){return Bl(e,"namedQueries")}var sf=function(){function e(t,n){a(this,e),this.M=t,this.userId=n}return u(e,[{key:"getOverlay",value:function(e,t){var n=this;return cf(e).get(rf(this.userId,t)).next((function(e){return e?nf(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Kl(t,a);i.push(r.Xt(e,o))})),Al.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(rl(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(cf(e).Qt("collectionPathOverlayIndex",i))})),Al.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=lc(),a=rl(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cf(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=nf(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=lc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cf(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=nf(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return cf(e).put(function(e,t,n){var r=d(rf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:zc(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function cf(e){return Bl(e,"documentOverlays")}var lf=function(){function e(){a(this,e)}return u(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Vo(e.integerValue));else if("doubleValue"in e){var n=Vo(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Zo(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(qo(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?du(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):oo()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Yo.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function ff(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function hf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ff(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}lf.fe=new lf;var df=function(){function e(){a(this,e),this.buffer=new Uint8Array(1024),this.position=0}return u(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=hf(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=hf(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),pf=function(){function e(t){a(this,e),this.De=t}return u(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),vf=function(){function e(t){a(this,e),this.De=t}return u(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),mf=function(){function e(){a(this,e),this.De=new df,this.Ce=new pf(this.De),this.xe=new vf(this.De)}return u(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),yf=function(){function e(t,n,r,i){a(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return u(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function gf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=kf(e.arrayValue,t.arrayValue))?n:0!==(n=kf(e.directionalValue,t.directionalValue))?n:Yo.comparator(e.documentKey,t.documentKey)}function kf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var bf=function(){function e(t){a(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=l(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(o){r.e(o)}finally{r.f()}}return u(e,[{key:"$e",value:function(e){var t=_u(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=xu(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=l(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),wf=function(){function e(){a(this,e),this.qe=new _f}return u(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Al.resolve()}},{key:"getCollectionParents",value:function(e,t){return Al.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Al.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Al.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Al.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return Al.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Al.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Al.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Al.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Al.resolve()}}]),e}(),_f=function(){function e(){a(this,e),this.index={}}return u(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new rc(Oo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new rc(Oo.comparator)).toArray()}}]),e}(),xf=new Uint8Array(0),Ef=function(){function e(t,n){a(this,e),this.user=t,this.databaseId=n,this.Ke=new _f,this.Ge=new Js((function(e){return Ru(e)}),(function(e,t){return Ou(e,t)})),this.uid=t.uid||""}return u(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:rl(i)};return If(e).put(a)}return Al.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[So(t),""],!1,!0);return If(e).qt(r).next((function(e){var r,i=l(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ol(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Cf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Cf(e),r=Tf(e),i=Sf(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Sf(e),i=!0,a=new Map;return Al.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=dc(),o=[];return Al.forEach(a,(function(i,a){var u;no("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Ru(t)));var s=function(e,t){var n=_u(t);if(void 0===n)return null;var r,i=l(Lu(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=l(xu(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=l(Lu(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),f=function(e,t){var n,r=[],i=!0,a=l(xu(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Mu(e,o.fieldPath,e.startAt):ju(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Gu(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=l(xu(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ju(e,o.fieldPath,e.endAt):Mu(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Gu(r,i)}(a,i),d=n.je(i,a,f),p=n.je(i,a,h),v=n.We(i,a,c),m=n.ze(i.indexId,s,d,!!f&&f.inclusive,p,!!h&&h.inclusive,v);return Al.forEach(m,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Yo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Al.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):xf,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,Ie(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new yf(e,Yo.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new yf(e,Yo.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new yf(e,Yo.empty(),xf,xf)}},{key:"getFieldIndex",value:function(e,t){var n=new bf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new mf,i=l(xu(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);lf.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new mf;return lf.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new mf;return lf.fe.Zt(ou(this.databaseId,t),n.Ne(function(e){var t=xu(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new mf);var i,a=0,o=l(xu(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],f=l(r);try{for(f.s();!(u=f.n()).done;){var h=u.value;if(this.en(t,s.fieldPath)&&su(c))r=this.nn(r,s,c);else{var d=h.Ne(s.kind);lf.fe.Zt(c,d)}}}catch(p){f.e(p)}finally{f.f()}}}catch(p){o.e(p)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Ie(e),a=[],o=l(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=l(i);try{for(c.s();!(u=c.n()).done;){var f=u.value,h=new mf;h.seed(f.Se()),lf.fe.Zt(s,h.Ne(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Fu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Cf(e),i=Tf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Al.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Iu(t.sequenceNumber,new Tu($l(t.readTime),new Yo(ol(t.documentKey)),t.largestBatchId)):Iu.empty(),r=e.fields.map((function(e){var t=d(e,2),n=t[0],r=t[1];return new Eu(Lo.fromServerFormat(n),r)}));return new wu(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Eo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Cf(e),a=Tf(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Al.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Yl(r.readTime),documentKey:rl(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Al.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Al.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Al.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Al.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Sf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Sf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Sf(e),i=new rc(gf);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new yf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new rc(gf),r=this.Ze(t,e);if(null==r)return n;var i=_u(t);if(null!=i){var a=e.data.field(i.fieldPath);if(su(a)){var o,u=l(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new yf(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new yf(t.indexId,e.key,xf,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;no("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ac(a),s=ac(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ac(o)):l?(i(u),u=ac(a)):(u=ac(a),s=ac(o))}}(r,i,gf,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Al.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Tf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return gf(e,t)})).filter((function(e,t,n){return!t||0!==gf(e,n[t-1])}));var r=[];r.push(e);var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=gf(o,e),s=gf(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],f=0;f<r.length;f+=2)c.push(IDBKeyRange.bound([r[f].indexId,this.uid,r[f].arrayValue,r[f].directionalValue,xf,[]],[r[f+1].indexId,this.uid,r[f+1].arrayValue,r[f+1].directionalValue,xf,[]]));return c}}]),e}();function If(e){return Bl(e,"collectionParents")}function Sf(e){return Bl(e,"indexEntries")}function Cf(e){return Bl(e,"indexConfiguration")}function Tf(e){return Bl(e,"indexState")}var Nf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pf=function(){function e(t,n,r){a(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return u(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Af(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){uo(1===u)})));var c,f=[],h=l(n.mutations);try{for(h.s();!(c=h.n()).done;){var d=c.value,p=cl(t,d.key.path,n.batchId);a.push(i.delete(p)),f.push(d.key)}}catch(v){h.e(v)}finally{h.f()}return Al.waitFor(a).next((function(){return f}))}function Rf(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw oo();t=e.noDocument}return JSON.stringify(t).length}Pf.DEFAULT_COLLECTION_PERCENTILE=10,Pf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pf.DEFAULT=new Pf(41943040,Pf.DEFAULT_COLLECTION_PERCENTILE,Pf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pf.DISABLED=new Pf(-1,0,0);var Of=function(){function e(t,n,r,i){a(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return u(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lf(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Mf(e),o=Lf(e);return o.add({}).next((function(u){uo("number"==typeof u);var s,c=new zl(u,t,n,r),f=function(e,t,n){var r=n.baseMutations.map((function(t){return zc(e.Jt,t)})),i=n.mutations.map((function(t){return zc(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],d=new rc((function(e,t){return Eo(e.canonicalString(),t.canonicalString())})),p=l(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,m=cl(i.userId,v.key.path,u);d=d.add(v.key.path.popLast()),h.push(o.put(f)),h.push(a.put(m,ll))}}catch(y){p.e(y)}finally{p.f()}return d.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),Al.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Lf(e).get(t).next((function(e){return e?(uo(e.userId===n.userId),Xl(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Al.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Lf(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(uo(t.batchId>=r),a=Xl(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Lf(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lf(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Xl(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=sl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Mf(e).Wt({range:i},(function(r,i,o){var u=d(r,3),s=u[0],c=u[1],l=u[2],f=ol(c);if(s===n.userId&&t.path.isEqual(f))return Lf(e).get(l).next((function(e){if(!e)throw oo();uo(e.userId===n.userId),a.push(Xl(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new rc(Eo),i=[];return t.forEach((function(t){var a=sl(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Mf(e).Wt({range:o},(function(e,i,a){var o=d(e,3),u=o[0],s=o[1],c=o[2],l=ol(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Al.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=sl(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new rc(Eo);return Mf(e).Wt({range:o},(function(e,t,a){var o=d(e,3),s=o[0],c=o[1],l=o[2],f=ol(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Lf(e).get(t).next((function(e){if(null===e)throw oo();uo(e.userId===n.userId),r.push(Xl(n.M,e))})))})),Al.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Af(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Al.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Al.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Mf(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ol(e[1]);i.push(a)}else r.done()})).next((function(){uo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Df(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return jf(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return uo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Df(e,t,n){var r=sl(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Mf(e).Wt({range:a,jt:!0},(function(e,n,r){var a=d(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Lf(e){return Bl(e,"mutations")}function Mf(e){return Bl(e,"documentMutations")}function jf(e){return Bl(e,"mutationQueues")}var Ff=function(){function e(t){a(this,e),this.mn=t}return u(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Uf=function(){function e(t,n){a(this,e),this.referenceDelegate=t,this.M=n}return u(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Ff(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return To.fromTimestamp(new Co(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Vf(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return uo(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Vf(e).Wt((function(o,u){var s=Jl(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Al.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Vf(e).Wt((function(e,n){var r=Jl(n);t(r)}))}},{key:"pn",value:function(e){return qf(e).get("targetGlobalKey").next((function(e){return uo(null!==e),e}))}},{key:"In",value:function(e,t){return qf(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Vf(e).put(ef(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ru(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Vf(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Jl(n);Ou(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Bf(e);return t.forEach((function(t){var o=rl(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Al.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Bf(e);return Al.forEach(t,(function(t){var a=rl(t.path);return Al.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Bf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Bf(e),i=dc();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=ol(e[1]),a=new Yo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=rl(t.path),r=IDBKeyRange.bound([n],[So(n)],!1,!0),i=0;return Bf(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=d(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Vf(e).get(t).next((function(e){return e?Jl(e):null}))}}]),e}();function Vf(e){return Bl(e,"targets")}function qf(e){return Bl(e,"targetGlobal")}function Bf(e){return Bl(e,"targetDocuments")}function zf(e){return Wf.apply(this,arguments)}function Wf(){return Wf=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===co.FAILED_PRECONDITION&&t.message===Nl){e.next=2;break}throw t;case 2:no("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Wf.apply(this,arguments)}function Kf(e,t){var n=d(e,2),r=n[0],i=n[1],a=d(t,2),o=a[0],u=a[1],s=Eo(r,o);return 0===s?Eo(i,u):s}var Hf=function(){function e(t){a(this,e),this.An=t,this.buffer=new rc(Kf),this.Rn=0}return u(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Kf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Gf=function(){function e(t,n){a(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return u(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;no("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Ce(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ml(n.t0)){n.next=12;break}no("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,zf(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Zf=function(){function e(t,n){a(this,e),this.Dn=t,this.params=n}return u(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Al.resolve(wo.A);var r=new Hf(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(no("LruGarbageCollector","Garbage collection skipped; disabled"),Al.resolve(Nf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(no("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Nf):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(no("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),to()<=Re.DEBUG&&no("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Al.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Qf=function(){function e(t,n){a(this,e),this.db=t,this.garbageCollector=function(e,t){return new Zf(e,t)}(this,n)}return u(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Yf(e,n)}},{key:"removeReference",value:function(e,t,n){return Yf(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Yf(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return jf(e).zt((function(r){return Df(e,r,t).next((function(e){return e&&(n=!0),Al.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,To.min()),Bf(e).delete([0,rl(o.path)])}))}));i.push(s)}})).next((function(){return Al.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Yf(e,t)}},{key:"Mn",value:function(e,t){var n,r=Bf(e),i=wo.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=d(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==wo.A&&t(new Yo(ol(n)),i),i=s,n=u):i=wo.A})).next((function(){i!==wo.A&&t(new Yo(ol(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Yf(e,t){return Bf(e).put(function(e,t){return{targetId:0,path:rl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var $f=function(){function e(){a(this,e),this.changes=new Js((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return u(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,bu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Al.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Xf=function(){function e(t){a(this,e),this.M=t}return u(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return th(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return th(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ql(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=bu.newInvalidDocument(t);return th(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(nh(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:bu.newInvalidDocument(t)};return th(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(nh(t))},(function(e,i){r={document:n.$n(t,i),size:Rf(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=uc();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=uc(),i=new ec(Yo.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Rf(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Al.resolve();var r=new rc(ih);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(nh(r.first()),nh(r.last())),a=r.getIterator(),o=a.getNext();return th(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Yo.fromSegments([].concat(Ie(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ih(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(nh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Ql(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return th(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=uc(),i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Yo.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=uc(),o=rh(t,n),u=rh(t,Tu.max());return th(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Yo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Jf(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return eh(e).get("remoteDocumentGlobalKey").next((function(e){return uo(!!e),e}))}},{key:"Fn",value:function(e,t){return eh(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=qc(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Yo.fromSegments(t.noDocument.path),i=$l(t.noDocument.readTime);n=bu.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return oo();var a=Yo.fromSegments(t.unknownDocument.path),o=$l(t.unknownDocument.version);n=bu.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Co(e[0],e[1]);return To.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(To.min()))return n}return bu.newInvalidDocument(e)}}]),e}(),Jf=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new Js((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return u(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new rc((function(e,t){return Eo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Zl(t.Kn.M,o);i=i.add(a.path.popLast());var c=Rf(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Zl(t.Kn.M,o.convertToNoDocument(To.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Al.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}($f);function eh(e){return Bl(e,"remoteDocumentGlobal")}function th(e){return Bl(e,"remoteDocumentsV14")}function nh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function rh(e,t){var n=t.documentKey.path.toArray();return[e,Ql(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ih(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Eo(n[a],r[a]))return i;return(i=Eo(n.length,r.length))||((i=Eo(n[n.length-2],r[r.length-2]))||Eo(n[n.length-1],r[r.length-1]))}var ah=function(){function e(t){a(this,e),this.M=t}return u(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Rl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ul,{unique:!0}),e.createObjectStore("documentMutations")}(e),oh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Al.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),oh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:To.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ul,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Al.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:_l});t.createIndex("collectionPathOverlayIndex",xl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",El,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:fl});t.createIndex("documentKeyIndex",hl),t.createIndex("collectionGroupIndex",dl)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:gl}).createIndex("sequenceNumberIndex",kl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:bl}).createIndex("documentKeyIndex",wl,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Rf(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Al.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Al.forEach(r,(function(r){uo(r.userId===n.userId);var i=Xl(t.M,r);return Af(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Oo(n),o=function(e){return[0,rl(e)]}(a);r.push(t.get(o).next((function(n){return n?Al.resolve():function(n){return t.put({targetId:0,path:rl(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Al.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:yl});var n=t.store("collectionParents"),r=new _f,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:rl(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Oo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=d(e,3),r=(n[0],n[1]),a=(n[2],ol(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Jl(r),a=ef(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Yo(Oo.fromString(i.document.name).popFirst(5)):i.noDocument?Yo.fromSegments(i.noDocument.path):i.unknownDocument?Yo.fromSegments(i.unknownDocument.path):oo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Al.waitFor(r)}))}}]),e}();function oh(e){e.createObjectStore("targetDocuments",{keyPath:vl}).createIndex("documentTargetsIndex",ml,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pl,{unique:!0}),e.createObjectStore("targetGlobal")}var uh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sh=function(){function e(t,n,r,i,o,u,s,c,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(a(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=o,this.window=u,this.document=s,this.Xn=l,this.Zn=f,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new lo(co.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qf(this,i),this.hs=n+"main",this.M=new Gl(c),this.ls=new Ol(this.hs,this.ts,new ah(this.M)),this.fs=new Uf(this.referenceDelegate,this.M),this.ds=function(e){return new Xf(e)}(this.M),this._s=new af,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===f&&ro("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return u(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new lo(co.FAILED_PRECONDITION,uh);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new wo(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=Ce(I().mark((function n(r){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=Ce(I().mark((function t(n){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return lh(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(Ml(t))return no("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return no("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return ch(e).get("owner").next((function(e){return Al.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return lh(e).delete(this.clientId)}},{key:"vs",value:function(){var e=Ce(I().mark((function e(){var t,n,r,i,a=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Bl(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Al.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=l(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Al.resolve(!0):ch(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new lo(co.FAILED_PRECONDITION,uh);return!1}}return!(!t.networkEnabled||!t.inForeground)||lh(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&no("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ce(I().mark((function e(){var t=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ql(e,wo.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return lh(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Of.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Ef(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return sf.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;no("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Tl:13===i?Cl:12===i?Sl:11===i?Il:void oo();return this.ls.runTransaction(e,o,u,(function(i){return a=new ql(i,r.es?r.es.next():wo.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw ro("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new lo(co.FAILED_PRECONDITION,Nl);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return ch(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new lo(co.FAILED_PRECONDITION,uh)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ch(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=ch(e);return n.get("owner").next((function(e){return t.bs(e)?(no("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Al.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ro("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return no("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ro("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(Xt){ro("Failed to set zombie client id.",Xt)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(Xt){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Ol.vt()}}]),e}();function ch(e){return Bl(e,"owner")}function lh(e){return Bl(e,"clientMetadata")}function fh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var hh=function(){function e(t,n,r){a(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return u(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=l(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=l(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Yo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):as(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Yo(t)).next((function(e){var t=cc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=cc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Al.forEach(o,(function(o){var u=function(e,t){return new Xu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=l(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=bu.newInvalidDocument(s),r=r.insert(s,c)),js(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){n.e(f)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){hs(t,n)||(r=r.remove(e))})),r}))}}]),e}(),dh=function(){function e(t,n,r,i){a(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return u(e,null,[{key:"Ys",value:function(t,n){var r,i=dc(),a=dc(),o=l(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ph=function(){function e(){a(this,e)}return u(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(To.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(ts(t)||ns(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(to()<=Re.DEBUG&&no("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),fs(t)),i.Zs.Qs(e,t,Su(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new rc(ps(e));return t.forEach((function(t,r){hs(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return to()<=Re.DEBUG&&no("QueryEngine","Using full collection scan to execute query:",fs(t)),this.Zs.Qs(e,t,Tu.min())}}]),e}(),vh=function(){function e(t,n,r,i){a(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new ec(Eo),this.ri=new Js((function(e){return Ru(e)}),Ou),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return u(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new hh(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function mh(e,t,n,r){return new vh(e,t,n,r)}function yh(e,t){return gh.apply(this,arguments)}function gh(){return gh=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=dc(),s=l(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var f,h=l(c.mutations);try{for(h.s();!(f=h.n()).done;){var d=f.value;u=u.add(d.key)}}catch(b){h.e(b)}finally{h.f()}}}catch(b){s.e(b)}finally{s.f()}var p,v=l(n);try{for(v.s();!(p=v.n()).done;){var m=p.value;o.push(m.batchId);var y,g=l(m.mutations);try{for(g.s();!(y=g.n()).done;){var k=y.value;u=u.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){v.e(b)}finally{v.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),gh.apply(this,arguments)}function kh(e,t){var n=so(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Al.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);uo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function bh(e){var t=so(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function wh(e,t){var n=so(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(jo.EMPTY_BYTE_STRING,To.min()).withLastLimboFreeSnapshotVersion(To.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=uc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(_h(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(To.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Al.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function _h(e,t,n){var r=dc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=uc();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(To.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):no("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function xh(e,t){var n=so(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Eh(e,t){var n=so(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Al.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new Hl(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function Ih(e,t,n){return Sh.apply(this,arguments)}function Sh(){return Sh=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=so(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ml(e.t1)){e.next=12;break}throw e.t1;case 12:no("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Sh.apply(this,arguments)}function Ch(e,t,n){var r=so(e),i=To.min(),a=dc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=so(e),i=r.ri.get(n);return void 0!==i?Al.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,us(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:To.min(),n?a:dc())})).next((function(e){return Ph(r,ds(t),e),{documents:e,li:a}}))}))}function Th(e,t){var n=so(e),r=so(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Nh(e,t){var n=so(e),r=n.oi.get(t)||To.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,Su(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Ph(n,t,e),e}))}function Ph(e,t,n){var r=To.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function Ah(e,t,n,r){return Rh.apply(this,arguments)}function Rh(){return Rh=Ce(I().mark((function e(t,n,r,i){var a,o,u,s,c,f,h,d,p,v;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=so(t),o=dc(),u=uc(),s=l(r);try{for(s.s();!(c=s.n()).done;)f=c.value,h=n.fi(f.metadata.name),f.document&&(o=o.add(h)),(d=n.di(f)).setReadTime(n._i(f.metadata.readTime)),u=u.insert(h,d)}catch(m){s.e(m)}finally{s.f()}return p=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Eh(a,function(e){return us(es(Oo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return _h(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.fs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Rh.apply(this,arguments)}function Oh(e,t){return Dh.apply(this,arguments)}function Dh(){return Dh=Ce(I().mark((function e(t,n){var r,i,a,o=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:dc(),e.next=3,Eh(t,us(tf(n.bundledQuery)));case 3:return i=e.sent,a=so(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ac(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(jo.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Dh.apply(this,arguments)}var Lh=function(){function e(t){a(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return u(e,[{key:"getBundleMetadata",value:function(e,t){return Al.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:Ac(n.createTime)}),Al.resolve()}},{key:"getNamedQuery",value:function(e,t){return Al.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:tf(e.bundledQuery),readTime:Ac(e.readTime)}}(t)),Al.resolve()}}]),e}(),Mh=function(){function e(){a(this,e),this.overlays=new ec(Yo.comparator),this.gi=new Map}return u(e,[{key:"getOverlay",value:function(e,t){return Al.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Al.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),Al.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=lc(),i=t.length+1,a=new Yo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Al.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new ec((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=lc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=lc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Al.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Kl(t,n));var a=this.gi.get(t);void 0===a&&(a=dc(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),jh=function(){function e(){a(this,e),this.yi=new rc(Fh.pi),this.Ii=new rc(Fh.Ti)}return u(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Fh(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new Fh(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new Yo(new Oo([])),r=new Fh(n,e),i=new Fh(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new Yo(new Oo([])),n=new Fh(t,e),r=new Fh(t,e+1),i=dc();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Fh(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Fh=function(){function e(t,n){a(this,e),this.key=t,this.vi=n}return u(e,null,[{key:"pi",value:function(e,t){return Yo.comparator(e.key,t.key)||Eo(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return Eo(e.vi,t.vi)||Yo.comparator(e.key,t.key)}}]),e}(),Uh=function(){function e(t,n){a(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new rc(Fh.pi)}return u(e,[{key:"checkEmpty",value:function(e){return Al.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new zl(i,t,n,r);this.Bs.push(a);var o,u=l(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new Fh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Al.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Al.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return Al.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Al.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return Al.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Fh(t,0),i=new Fh(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),Al.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new rc(Eo);return t.forEach((function(e){var t=new Fh(e,0),i=new Fh(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),Al.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Yo.isDocumentKey(i)||(i=i.child(""));var a=new Fh(new Yo(i),0),o=new rc(Eo);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),Al.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;uo(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return Al.forEach(t.mutations,(function(i){var a=new Fh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Fh(t,0),r=this.Di.firstAfterOrEqual(n);return Al.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Al.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Vh=function(){function e(t){a(this,e),this.Mi=t,this.docs=new ec(Yo.comparator),this.size=0}return u(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Al.resolve(n?n.document.mutableCopy():bu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=uc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():bu.newInvalidDocument(e))})),Al.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=uc(),i=new Yo(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Nu(Cu(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Al.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){oo()}},{key:"Oi",value:function(e,t){return Al.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new qh(this)}},{key:"getSize",value:function(e){return Al.resolve(this.size)}}]),e}(),qh=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this)).Kn=e,r}return u(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Al.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}($f),Bh=function(){function e(t){a(this,e),this.persistence=t,this.Fi=new Js((function(e){return Ru(e)}),Ou),this.lastRemoteSnapshotVersion=To.min(),this.highestTargetId=0,this.$i=0,this.Bi=new jh,this.targetCount=0,this.Li=Ff.gn()}return u(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),Al.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Al.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Al.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),Al.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),Al.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new Ff(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Al.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Al.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,Al.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Al.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Al.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return Al.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),Al.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Al.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),Al.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return Al.resolve(n)}},{key:"containsKey",value:function(e,t){return Al.resolve(this.Bi.containsKey(t))}}]),e}(),zh=function(){function e(t,n){var r=this;a(this,e),this.Ui={},this.overlays={},this.es=new wo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Bh(this),this.indexManager=new wf,this.ds=new Vh((function(e){return r.referenceDelegate.qi(e)})),this.M=new Gl(n),this._s=new Lh(this.M)}return u(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Mh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new Uh(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;no("MemoryPersistence","Starting transaction:",e);var i=new Wh(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return Al.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Wh=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return u(n)}(Pl),Kh=function(){function e(t){a(this,e),this.persistence=t,this.ji=new jh,this.Wi=null}return u(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw oo()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),Al.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),Al.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),Al.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Al.forEach(this.Hi,(function(r){var i=Yo.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,To.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return Al.or([function(){return Al.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function Hh(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Gh(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Zh(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Qh=function(){function e(t,n,r,i){a(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return u(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new lo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ro("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Yh=function(){function e(t,n,r){a(this,e),this.targetId=t,this.state=n,this.error=r}return u(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new lo(i.error.code,i.error.message))),a?new e(t,i.state,r):(ro("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),$h=function(){function e(t,n){a(this,e),this.clientId=t,this.activeTargetIds=n}return u(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=vc(),o=0;i&&o<r.activeTargetIds.length;++o)i=Qo(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ro("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Xh=function(){function e(t,n){a(this,e),this.clientId=t,this.onlineState=n}return u(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ro("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Jh=function(){function e(){a(this,e),this.activeTargetIds=vc()}return u(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ed=function(){function e(t,n,r,i,o){a(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new ec(Eo),this.started=!1,this.rr=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ur=Hh(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new Jh),this.cr=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return u(e,[{key:"start",value:function(){var e=Ce(I().mark((function e(){var t,n,r,i,a,o,u,s,c,f,h,d=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=l(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Hh(this.persistenceKey,i)))&&(o=$h.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),c=l(this.rr);try{for(c.s();!(f=c.n()).done;)h=f.value,this.sr(h)}catch(p){c.e(p)}finally{c.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Zh(this.persistenceKey,e));if(n){var r=Yh.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Zh(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return no("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){no("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){no("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(no("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void ro("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(Ce(I().mark((function e(){var r,i,a,o,u,s,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=wo.A;if(null!=e)try{var n=JSON.parse(e);uo("number"==typeof n),t=n}catch(e){ro("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==wo.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.Nr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new Qh(this.currentUser,e,t,n),i=Gh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=Gh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=Zh(this.persistenceKey,e),i=new Yh(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return $h.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qh.Yi(new Xa(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return Yh.Yi(r,t)}},{key:"mr",value:function(e){return Xh.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:no("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=vc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),td=function(){function e(){a(this,e),this.$r=new Jh,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return u(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new Jh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),nd=function(){function e(){a(this,e)}return u(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),rd=function(){function e(){var t=this;a(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return u(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){no("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=l(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){no("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=l(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),id={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ad=function(){function e(t){a(this,e),this.Wr=t.Wr,this.zr=t.zr}return u(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),od=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return u(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Ya;o.listenOnce(Ka.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Wa.NO_ERROR:var t=o.getResponseJson();no("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Wa.TIMEOUT:no("Connection",'RPC "'+e+'" timed out'),a(new lo(co.DEADLINE_EXCEEDED,"Request time out"));break;case Wa.HTTP_ERROR:var n=o.getStatus();if(no("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(co).indexOf(t)>=0?t:co.UNKNOWN}(r.status);a(new lo(u,r.message))}else a(new lo(co.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new lo(co.UNAVAILABLE,"Connection failed."));break;default:oo()}}finally{no("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Ba(),a=za(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Za({})),this.ao(o.initMessageHeaders,t,n),V()||z()||U().indexOf("Electron/")>=0||W()||U().indexOf("MSAppHost/")>=0||B()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");no("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ad({Wr:function(e){l?no("Connection","Not sending because WebChannel is closed:",e):(c||(no("Connection","Opening WebChannel transport."),s.open(),c=!0),no("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Qa.EventType.OPEN,(function(){l||no("Connection","WebChannel transport opened.")})),h(s,Qa.EventType.CLOSE,(function(){l||(l=!0,no("Connection","WebChannel transport closed"),f.no())})),h(s,Qa.EventType.ERROR,(function(e){l||(l=!0,io("Connection","WebChannel transport errored:",e),f.no(new lo(co.UNAVAILABLE,"The operation could not be completed")))})),h(s,Qa.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];uo(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){no("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Hs[e];if(void 0!==t)return Xs(t)}(a),u=i.message;void 0===o&&(o=co.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.no(new lo(o,u)),s.close()}else no("Connection","WebChannel received:",n),f.so(n)}})),h(a,Ha.STAT_EVENT,(function(e){e.stat===Ga.PROXY?no("Connection","Detected buffering proxy"):e.stat===Ga.NOPROXY&&no("Connection","Detected no buffering proxy")})),setTimeout((function(){f.eo()}),0),f}}]),n}(function(){function e(t){a(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return u(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);no("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return no("RestConnection","Received: ",e),e}),(function(t){throw io("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ja,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=id[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function ud(){return"undefined"!=typeof window?window:null}function sd(){return"undefined"!=typeof document?document:null}function cd(e){return new Cc(e,!0)}var ld=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;a(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=o,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return u(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&no("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),fd=function(){function e(t,n,r,i,o,u,s,c){a(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new ld(t,n)}return u(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===co.RESOURCE_EXHAUSTED?(ro(n.toString()),ro("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===co.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=d(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new lo(co.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(Ce(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return no("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(no("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),hd=function(e){m(n,e);var t=w(n);function n(e,r,i,o,u,s){var c;return a(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o,s)).M=u,c}return u(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:oo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(uo(void 0===t||"string"==typeof t),jo.fromBase64String(t||"")):(uo(void 0===t||t instanceof Uint8Array),jo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?co.UNKNOWN:Xs(e.code);return new lo(t,e.message||"")}(o);n=new bc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Lc(e,s.document.name),l=Ac(s.document.updateTime),f=new gu({mapValue:{fields:s.document.fields}}),h=bu.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new gc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Lc(e,v.document),y=v.readTime?Ac(v.readTime):To.min(),g=bu.newNoDocument(m,y),k=v.removedTargetIds||[];n=new gc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Lc(e,b.document),_=b.removedTargetIds||[];n=new gc([],_,w,null)}else{if(!("filter"in t))return oo();t.filter;var x=t.filter;x.targetId;var E=x.count||0,I=new Ys(E),S=x.targetId;n=new kc(S,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return To.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?To.min():t.readTime?Ac(t.readTime):To.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Fc(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Du(r)?{documents:Kc(e,r)}:{query:Hc(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Nc(e,t.resumeToken):t.snapshotVersion.compareTo(To.min())>0&&(n.readTime=Tc(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return oo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Fc(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(fd),dd=function(e){m(n,e);var t=w(n);function n(e,r,i,o,u,s){var c;return a(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,o,s)).M=u,c.zo=!1,c}return u(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,jt(y(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if(uo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?(uo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ac(e.updateTime):Ac(t);return n.isEqual(To.min())&&(n=Ac(t)),new Rs(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ac(e.commitTime);return this.listener.Yo(n,t)}return uo(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=Fc(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return zc(t.M,e)}))};this.Fo(n)}}]),n}(fd),pd=function(e){m(n,e);var t=w(n);function n(e,r,i,o){var u;return a(this,n),(u=t.call(this)).authCredentials=e,u.appCheckCredentials=r,u.bo=i,u.M=o,u.tu=!1,u}return u(n,[{key:"eu",value:function(){if(this.tu)throw new lo(co.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=d(i,2),o=a[0],u=a[1];return r.bo.oo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===co.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new lo(co.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=d(i,2),o=a[0],u=a[1];return r.bo.ho(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===co.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new lo(co.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return u((function e(){a(this,e)}))}()),vd=function(){function e(t,n){a(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return u(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?(ro(t),this.iu=!1):no("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),md=u((function e(t,n,r,i,o){var u=this;a(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=o,this._u.Lr((function(e){r.enqueueAndForget(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Cd(u),!e.t0){e.next=5;break}return no("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=so(t)).fu.add(4),e.next=4,kd(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,yd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new vd(r,i)}));function yd(e){return gd.apply(this,arguments)}function gd(){return gd=Ce(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Cd(t)){e.next=18;break}n=l(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),gd.apply(this,arguments)}function kd(e){return bd.apply(this,arguments)}function bd(){return bd=Ce(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),bd.apply(this,arguments)}function wd(e,t){var n=so(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),Sd(n)?Id(n):np(n).xo()&&xd(n,t))}function _d(e,t){var n=so(e),r=np(n);n.lu.delete(t),r.xo()&&Ed(n,t),0===n.lu.size&&(r.xo()?r.Mo():Cd(n)&&n.wu.set("Unknown"))}function xd(e,t){e.mu.Z(t.targetId),np(e).jo(t)}function Ed(e,t){e.mu.Z(t),np(e).Wo(t)}function Id(e){e.mu=new _c({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),np(e).start(),e.wu.ru()}function Sd(e){return Cd(e)&&!np(e).Co()&&e.lu.size>0}function Cd(e){return 0===so(e).fu.size}function Td(e){e.mu=void 0}function Nd(e){return Pd.apply(this,arguments)}function Pd(){return Pd=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){xd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Pd.apply(this,arguments)}function Ad(e,t){return Rd.apply(this,arguments)}function Rd(){return Rd=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Td(t),Sd(t)?(t.wu.au(n),Id(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Rd.apply(this,arguments)}function Od(e,t,n){return Dd.apply(this,arguments)}function Dd(){return Dd=Ce(I().mark((function e(t,n,r){var i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof bc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ce(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=l(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),no("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ld(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof gc?t.mu.ut(n):n instanceof kc?t.mu._t(n):t.mu.ht(n),r.isEqual(To.min())){e.next=29;break}return e.prev=14,e.next=17,bh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(jo.EMPTY_BYTE_STRING,n.snapshotVersion)),Ed(e,t);var r=new Hl(n.target,t,1,n.sequenceNumber);xd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),no("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ld(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Dd.apply(this,arguments)}function Ld(e,t,n){return Md.apply(this,arguments)}function Md(){return Md=Ce(I().mark((function e(t,n,r){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ml(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,kd(t);case 5:t.wu.set("Offline"),r||(r=function(){return bh(t.localStore)}),t.asyncQueue.enqueueRetryable(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return no("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,yd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Md.apply(this,arguments)}function jd(e,t){return t().catch((function(n){return Ld(e,n,t)}))}function Fd(e){return Ud.apply(this,arguments)}function Ud(){return Ud=Ce(I().mark((function e(t){var n,r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=so(t),r=rp(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!Vd(n)){e.next=19;break}return e.prev=3,e.next=6,xh(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,qd(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ld(n,e.t0);case 17:e.next=2;break;case 19:Bd(n)&&zd(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Ud.apply(this,arguments)}function Vd(e){return Cd(e)&&e.hu.length<10}function qd(e,t){e.hu.push(t);var n=rp(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function Bd(e){return Cd(e)&&!rp(e).Co()&&e.hu.length>0}function zd(e){rp(e).start()}function Wd(e){return Kd.apply(this,arguments)}function Kd(){return Kd=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rp(t).Zo();case 1:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}function Hd(e){return Gd.apply(this,arguments)}function Gd(){return Gd=Ce(I().mark((function e(t){var n,r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=rp(t),r=l(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Gd.apply(this,arguments)}function Zd(e,t,n){return Qd.apply(this,arguments)}function Qd(){return Qd=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=Wl.from(i,n,r),e.next=3,jd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Fd(t);case 5:case"end":return e.stop()}}),e)}))),Qd.apply(this,arguments)}function Yd(e,t){return $d.apply(this,arguments)}function $d(){return $d=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&rp(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ce(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$s(i=n.code)||i===co.ABORTED){e.next=7;break}return r=t.hu.shift(),rp(t).ko(),e.next=5,jd(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Fd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Bd(t)&&zd(t);case 5:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}function Xd(e,t){return Jd.apply(this,arguments)}function Jd(){return Jd=Ce(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=so(t)).asyncQueue.verifyOperationInProgress(),no("RemoteStore","RemoteStore received new credentials"),i=Cd(r),r.fu.add(3),e.next=6,kd(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,yd(r);case 12:case"end":return e.stop()}}),e)}))),Jd.apply(this,arguments)}function ep(e,t){return tp.apply(this,arguments)}function tp(){return tp=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=so(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,yd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,kd(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}function np(e){return e.gu||(e.gu=function(e,t,n){var r=so(e);return r.eu(),new hd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Nd.bind(null,e),Yr:Ad.bind(null,e),Qo:Od.bind(null,e)}),e.du.push(function(){var t=Ce(I().mark((function t(n){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),Sd(e)?Id(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:Td(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function rp(e){return e.yu||(e.yu=function(e,t,n){var r=so(e);return r.eu(),new dd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Wd.bind(null,e),Yr:Yd.bind(null,e),Xo:Hd.bind(null,e),Yo:Zd.bind(null,e)}),e.du.push(function(){var t=Ce(I().mark((function t(n){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,Fd(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(no("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var ip=function(){function e(t,n,r,i,o){a(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new fo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return u(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new lo(co.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ap(e,t){if(ro("AsyncQueue","".concat(t,": ").concat(e)),Ml(e))return new lo(co.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var op=function(){function e(t){a(this,e),this.comparator=t?function(e,n){return t(e,n)||Yo.comparator(e.key,n.key)}:function(e,t){return Yo.comparator(e.key,t.key)},this.keyedMap=cc(),this.sortedSet=new ec(this.comparator)}return u(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),up=function(){function e(){a(this,e),this.pu=new ec(Yo.comparator)}return u(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):oo():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sp=function(){function e(t,n,r,i,o,u,s,c){a(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=s,this.excludesMetadataChanges=c}return u(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,op.emptySet(n),a,r,i,!0,!1)}}]),e}(),cp=u((function e(){a(this,e),this.Tu=void 0,this.listeners=[]})),lp=u((function e(){a(this,e),this.queries=new Js((function(e){return ls(e)}),cs),this.onlineState="Unknown",this.Eu=new Set}));function fp(e,t){return hp.apply(this,arguments)}function hp(){return hp=Ce(I().mark((function e(t,n){var r,i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=so(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new cp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ap(e.t0,"Initialization of query '".concat(fs(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&yp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),hp.apply(this,arguments)}function dp(e,t){return pp.apply(this,arguments)}function pp(){return pp=Ce(I().mark((function e(t,n){var r,i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=so(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}function vp(e,t){var n,r=so(e),i=!1,a=l(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,f=l(s.listeners);try{for(f.s();!(c=f.n()).done;){c.value.Ru(o)&&(i=!0)}}catch(h){f.e(h)}finally{f.f()}s.Tu=o}}}catch(h){a.e(h)}finally{a.f()}i&&yp(r)}function mp(e,t,n){var r=so(e),i=r.queries.get(t);if(i){var a,o=l(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function yp(e){e.Eu.forEach((function(e){e.next()}))}var gp=function(){function e(t,n,r){a(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return u(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=l(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=sp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),kp=function(){function e(t,n){a(this,e),this.payload=t,this.byteLength=n}return u(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),bp=function(){function e(t){a(this,e),this.M=t}return u(e,[{key:"fi",value:function(e){return Lc(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?qc(this.M,e.document,!1):bu.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return Ac(e)}}]),e}(),wp=function(){function e(t,n,r){a(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_p(t)}return u(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Oo.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new bp(this.M),i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=l(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,f=(n.get(c)||dc()).add(u);n.set(c,f)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ce(I().mark((function e(){var t,n,r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ah(this.localStore,new bp(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=l(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Oh(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function _p(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var xp=u((function e(t){a(this,e),this.key=t})),Ep=u((function e(t){a(this,e),this.key=t})),Ip=function(){function e(t,n){a(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=dc(),this.mutatedKeys=dc(),this.Uu=ps(t),this.qu=new op(this.Uu)}return u(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new up,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=ts(this.query)&&i.size===this.query.limit?i.last():null,c=ns(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=hs(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ju(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Uu(f,s)>0||c&&n.Uu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),ts(this.query)||ns(this.query))for(;o.size>this.query.limit;){var l=ts(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oo()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new sp(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new up,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=dc(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new Ep(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new xp(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=dc();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return sp.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),Sp=u((function e(t,n,r){a(this,e),this.query=t,this.targetId=n,this.view=r})),Cp=u((function e(t){a(this,e),this.key=t,this.Zu=!1})),Tp=function(){function e(t,n,r,i,o,u){a(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.ta={},this.ea=new Js((function(e){return ls(e)}),cs),this.na=new Map,this.sa=new Set,this.ia=new ec(Yo.comparator),this.ra=new Map,this.oa=new jh,this.ua={},this.aa=new Map,this.ca=Ff.yn(),this.onlineState="Unknown",this.ha=void 0}return u(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function Np(e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=Ce(I().mark((function e(t,n){var r,i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_v(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,Eh(r.localStore,us(n));case 8:return u=e.sent,r.isPrimaryClient&&wd(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ap(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Ap(e,t,n,r){return Rp.apply(this,arguments)}function Rp(){return Rp=Ce(I().mark((function e(t,n,r,i){var a,o,u,s,c,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=Ce(I().mark((function e(t,n,r,i){var a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,Ch(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Xp(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ch(t.localStore,n,!0);case 3:return a=e.sent,o=new Ip(n,a.li),u=o.Gu(a.documents),s=yc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Xp(t,r,c.Hu),l=new Sp(n,r,o),e.abrupt("return",(t.ea.set(n,l),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Rp.apply(this,arguments)}function Op(e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=Ce(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=so(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!cs(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Ih(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),_d(r.remoteStore,i.targetId),Yp(r,i.targetId)})).catch(zf);case 9:e.next=14;break;case 11:return Yp(r,i.targetId),e.next=14,Ih(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Lp(e,t,n){return Mp.apply(this,arguments)}function Mp(){return Mp=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xv(t),e.prev=1,e.next=4,function(e,t){var n,r=so(e),i=Co.now(),a=t.reduce((function(e,t){return e.add(t.key)}),dc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=l(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,f=Fs(c,n.get(c.key));null!=f&&u.push(new Bs(c.key,f,ku(f.value.mapValue),Os.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new ec(Eo)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,tv(i,a.changes);case 9:return e.next=11,Fd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ap(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Mp.apply(this,arguments)}function jp(e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=Ce(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t),e.prev=1,e.next=4,wh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&(uo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?uo(n.Zu):e.removedDocuments.size>0&&(uo(n.Zu),n.Zu=!1))})),e.next=8,tv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,zf(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Fp.apply(this,arguments)}function Up(e,t,n){var r=so(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=so(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=l(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&yp(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Vp(e,t,n){return qp.apply(this,arguments)}function qp(){return qp=Ce(I().mark((function e(t,n,r){var i,a,o,u,s,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=so(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new ec(Yo.comparator)).insert(o,bu.newNoDocument(o,To.min())),s=dc().add(o),c=new mc(To.min(),new Map,new rc(Eo),u,s),e.next=9,jp(i,c);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),ev(i),e.next=16;break;case 14:return e.next=16,Ih(i.localStore,n,!1).then((function(){return Yp(i,n,r)})).catch(zf);case 16:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function Bp(e,t){return zp.apply(this,arguments)}function zp(){return zp=Ce(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t),i=n.batch.batchId,e.prev=1,e.next=4,kh(r.localStore,n);case 4:return a=e.sent,Qp(r,i,null),Zp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,tv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,zf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zp.apply(this,arguments)}function Wp(e,t,n){return Kp.apply(this,arguments)}function Kp(){return Kp=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=so(t),e.prev=1,e.next=4,function(e,t){var n=so(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return uo(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Qp(i,n,r),Zp(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,tv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,zf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Kp.apply(this,arguments)}function Hp(e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=Ce(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cd((r=so(t)).remoteStore)||no("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=so(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ap(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Gp.apply(this,arguments)}function Zp(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function Qp(e,t,n){var r=so(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function Yp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=l(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||$p(e,t)}))}function $p(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(_d(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),ev(e))}function Xp(e,t,n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof xp?(e.oa.addReference(a.key,t),Jp(e,a)):a instanceof Ep?(no("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||$p(e,a.key)):oo()}}catch(o){i.e(o)}finally{i.f()}}function Jp(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(no("SyncEngine","New document in limbo: "+n),e.sa.add(r),ev(e))}function ev(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new Yo(Oo.fromString(t)),r=e.ca.next();e.ra.set(r,new Cp(n)),e.ia=e.ia.insert(n,r),wd(e.remoteStore,new Hl(us(es(n.path)),r,2,wo.A))}}function tv(e,t,n){return nv.apply(this,arguments)}function nv(){return nv=Ce(I().mark((function e(t,n,r){var i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=so(t),a=[],o=[],u=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){u.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=dh.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ta.Qo(a),e.next=9,function(){var e=Ce(I().mark((function e(t,n){var r,i,a,o,u,s,c,f;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Al.forEach(n,(function(t){return Al.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Al.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ml(e.t0)){e.next=10;break}throw e.t0;case 10:no("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=l(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),c=s.snapshotVersion,f=s.withLastLimboFreeSnapshotVersion(c),r.ii=r.ii.insert(u,f))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return iv=Ce(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=so(t)).currentUser.isEqual(n)){e.next=11;break}return no("SyncEngine","User change. New user:",n.toKey()),e.next=5,yh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new lo(co.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,tv(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),iv.apply(this,arguments)}function av(e,t){var n=so(e),r=n.ra.get(t);if(r&&r.Zu)return dc().add(r.key);var i=dc(),a=n.na.get(t);if(!a)return i;var o,u=l(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ea.get(s);i=i.unionWith(c.view.Ku)}}catch(f){u.e(f)}finally{u.f()}return i}function ov(e,t){return uv.apply(this,arguments)}function uv(){return uv=Ce(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t),e.next=3,Ch(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&Xp(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function sv(e,t){return cv.apply(this,arguments)}function cv(){return cv=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t),e.abrupt("return",Nh(r.localStore,n).then((function(e){return tv(r,e)})));case 2:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t,n,r){return fv.apply(this,arguments)}function fv(){return fv=Ce(I().mark((function e(t,n,r,i){var a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=so(t),e.next=3,function(e,t){var n=so(e),r=so(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):Al.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Fd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Qp(a,n,i||null),Zp(a,n),function(e,t){so(so(e).Bs)._n(t)}(a.localStore,n)):oo();case 11:return e.next=13,tv(a,o);case 13:e.next=16;break;case 15:no("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),fv.apply(this,arguments)}function hv(e,t){return dv.apply(this,arguments)}function dv(){return dv=Ce(I().mark((function e(t,n){var r,i,a,o,u,s,c,f;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_v(r=so(t)),xv(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,pv(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,ep(r.remoteStore,!0);case 9:o=l(a);try{for(o.s();!(u=o.n()).done;)s=u.value,wd(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return c=[],f=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):f=f.then((function(){return Yp(r,t),Ih(r.localStore,t,!0)})),_d(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,pv(r,c);case 21:return function(e){var t=so(e);t.ra.forEach((function(e,n){_d(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new ec(Yo.comparator)}(r),r.ha=!1,e.next=25,ep(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(e,t,n){return vv.apply(this,arguments)}function vv(){return vv=Ce(I().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d,p,v,m,y,g;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=so(t),a=[],o=[],u=l(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,f=void 0,!(h=i.na.get(c))||0===h.length){e.next=34;break}return e.next=11,Eh(i.localStore,us(h[0]));case 11:f=e.sent,d=l(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.ea.get(v),e.next=20,ov(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Th(i.localStore,c);case 36:return g=e.sent,e.next=39,Eh(i.localStore,g);case 39:return f=e.sent,e.next=42,Ap(i,mv(g),c,!1);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),vv.apply(this,arguments)}function mv(e){return Ju(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function yv(e){var t=so(e);return so(so(t.localStore).persistence).Fs()}function gv(e,t,n,r){return kv.apply(this,arguments)}function kv(){return kv=Ce(I().mark((function e(t,n,r,i){var a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=so(t)).ha){e.next=3;break}return e.abrupt("return",void no("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Nh(a.localStore,ds(o[0]));case 10:return u=e.sent,s=mc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,tv(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Ih(a.localStore,n,!0);case 17:return Yp(a,n,i),e.abrupt("break",20);case 19:oo();case 20:case"end":return e.stop()}}),e)}))),kv.apply(this,arguments)}function bv(e,t,n){return wv.apply(this,arguments)}function wv(){return wv=Ce(I().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=_v(t)).ha){e.next=45;break}a=l(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return no("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Th(i.localStore,u);case 12:return s=e.sent,e.next=15,Eh(i.localStore,s);case 15:return c=e.sent,e.next=18,Ap(i,mv(s),c.targetId,!1);case 18:wd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=l(r),e.prev=30,d=I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,Ih(i.localStore,t,!1).then((function(){_d(i.remoteStore,t),Yp(i,t)})).catch(zf);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),wv.apply(this,arguments)}function _v(e){var t=so(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=av.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Vp.bind(null,t),t.ta.Qo=vp.bind(null,t.eventManager),t.ta.fa=mp.bind(null,t.eventManager),t}function xv(e){var t=so(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wp.bind(null,t),t}function Ev(e,t,n){var r=so(e);(function(){var e=Ce(I().mark((function e(t,n,r){var i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=so(e),r=Ac(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(_p(i)),a=new wp(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,tv(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=so(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(io("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Iv=function(){function e(){a(this,e),this.synchronizeTabs=!1}return u(e,[{key:"initialize",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=cd(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return mh(this.persistence,new ph,e.initialUser,this.M)}},{key:"wa",value:function(e){return new zh(Kh.zi,this.M)}},{key:"_a",value:function(e){return new td}},{key:"terminate",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Sv=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).ya=e,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return u(n,[{key:"initialize",value:function(){var e=Ce(I().mark((function e(t){var r=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,xv(this.ya.syncEngine);case 6:return e.next=8,Fd(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return mh(this.persistence,new ph,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Gf(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=fh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Pf.withCacheSize(this.cacheSizeBytes):Pf.DEFAULT;return new sh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ud(),sd(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new td}}]),n}(Iv),Cv=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return u(n,[{key:"initialize",value:function(){var e=Ce(I().mark((function e(t){var r,i=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof ed,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:lv.bind(null,r),Or:gv.bind(null,r),Fr:bv.bind(null,r),Fs:yv.bind(null,r),kr:sv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hv(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=ud();if(!ed.vt(t))throw new lo(co.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ed(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Sv),Tv=function(){function e(){a(this,e)}return u(e,[{key:"initialize",value:function(){var e=Ce(I().mark((function e(t,n){var r=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Up(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rv.bind(null,this.syncEngine),e.next=12,ep(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new lp}},{key:"createDatastore",value:function(e){var t,n=cd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new od(t));return function(e,t,n,r){return new pd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Up(o.syncEngine,e,0)},a=rd.vt()?new rd:new nd,new md(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Tp(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so(t),no("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,kd(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Nv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ce(I().mark((function r(){var i;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Pv=function(){function e(t){a(this,e),this.observer=t,this.muted=!1}return u(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Av=function(){function e(t,n){var r=this;a(this,e),this.Ta=t,this.M=n,this.metadata=new fo,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return u(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=Ce(I().mark((function e(){var t,n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new kp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=Ce(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=Ce(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Rv=function(){function e(t){a(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return u(e,[{key:"lookup",value:function(){var e=Ce(I().mark((function e(t){var n,r=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new lo(co.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ce(I().mark((function e(t,n){var r,i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t),i=Fc(r.M)+"/documents",a={documents:n.map((function(e){return Dc(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Bc(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());uo(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Zs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ce(I().mark((function e(){var t,n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Yo.fromPath(t);n.mutations.push(new Qs(r,n.precondition(r)))})),e.next=7,function(){var e=Ce(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t),i=Fc(r.M)+"/documents",a={writes:n.map((function(e){return zc(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw oo();t=To.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new lo(co.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Os.updateTime(t):Os.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(To.min()))throw new lo(co.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Os.updateTime(t)}return Os.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ov=function(){function e(t,n,r,i){a(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new ld(this.asyncQueue,"transaction_retry")}return u(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(Ce(I().mark((function t(){var n,r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Rv(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!Go(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!$s(t)}return!1}}]),e}(),Dv=function(){function e(t,n,r,i){var o=this;a(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xa.UNAUTHENTICATED,this.clientId=xo.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return no("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return no("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return u(e,[{key:"getConfiguration",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new lo(co.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new fo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ce(I().mark((function n(){var r;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ap(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Lv(e,t){return Mv.apply(this,arguments)}function Mv(){return Mv=Ce(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),no("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,yh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function jv(e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=Ce(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Uv(t);case 3:return r=e.sent,no("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Xd(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Xd(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Fv.apply(this,arguments)}function Uv(e){return Vv.apply(this,arguments)}function Vv(){return Vv=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return no("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Lv(t,new Iv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Vv.apply(this,arguments)}function qv(e){return Bv.apply(this,arguments)}function Bv(){return Bv=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return no("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,jv(t,new Tv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}function zv(e){return Uv(e).then((function(e){return e.persistence}))}function Wv(e){return Uv(e).then((function(e){return e.localStore}))}function Kv(e){return qv(e).then((function(e){return e.remoteStore}))}function Hv(e){return qv(e).then((function(e){return e.syncEngine}))}function Gv(e){return Zv.apply(this,arguments)}function Zv(){return Zv=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qv(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Np.bind(null,n.syncEngine),r.onUnlisten=Op.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Zv.apply(this,arguments)}function Qv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new fo;return e.asyncQueue.enqueueAndForget(Ce(I().mark((function i(){return I().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Pv({next:function(a){t.enqueueAndForget((function(){return dp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new lo(co.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new lo(co.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new gp(es(n.path),a,{includeMetadataChanges:!0,Cu:!0});return fp(e,o)},i.next=3,Gv(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Yv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new fo;return e.asyncQueue.enqueueAndForget(Ce(I().mark((function i(){return I().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Pv({next:function(n){t.enqueueAndForget((function(){return dp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new lo(co.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new gp(n,a,{includeMetadataChanges:!0,Cu:!0});return fp(e,o)},i.next=3,Gv(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var $v=new Map;function Xv(e,t,n){if(!n)throw new lo(co.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Jv(e,t,n,r){if(!0===t&&!0===r)throw new lo(co.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function em(e){if(!Yo.isDocumentKey(e))throw new lo(co.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function tm(e){if(Yo.isDocumentKey(e))throw new lo(co.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function nm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":oo()}function rm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new lo(co.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nm(e);throw new lo(co.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function im(e,t){if(t<=0)throw new lo(co.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var am=function(){function e(t){var n;if(a(this,e),void 0===t.host){if(void 0!==t.ssl)throw new lo(co.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new lo(co.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Jv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return u(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),om=function(){function e(t,n,r){a(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new am({}),this._settingsFrozen=!1,t instanceof Ho?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new lo(co.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(e.options.projectId)}(t))}return u(e,[{key:"app",get:function(){if(!this._app)throw new lo(co.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new lo(co.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new am(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new po;switch(e.type){case"gapi":var t=e.client;return uo(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new go(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new lo(co.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$v.get(e);t&&(no("ComponentProvider","Removing Datastore"),$v.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function um(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=rm(e,om))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&io("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Xa.MOCK_USER;else{o=F(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new lo(co.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xa(s)}e._authCredentials=new vo(new ho(o,u))}}var sm=function(){function e(t,n,r){a(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return u(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new lm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),cm=function(){function e(t,n,r){a(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return u(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),lm=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this,e,r,es(i)))._path=i,o.type="collection",o}return u(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new sm(this.firestore,null,new Yo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cm);function fm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ge(e),Xv("collection","path",t),e instanceof om){var a=Oo.fromString.apply(Oo,[t].concat(r));return tm(a),new lm(e,null,a)}if(!(e instanceof sm||e instanceof lm))throw new lo(co.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Oo.fromString.apply(Oo,[t].concat(r)));return tm(o),new lm(e.firestore,null,o)}function hm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ge(e),1===arguments.length&&(t=xo.R()),Xv("doc","path",t),e instanceof om){var a=Oo.fromString.apply(Oo,[t].concat(r));return em(a),new sm(e,null,new Yo(a))}if(!(e instanceof sm||e instanceof lm))throw new lo(co.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Oo.fromString.apply(Oo,[t].concat(r)));return em(o),new sm(e.firestore,e instanceof lm?e.converter:null,new Yo(o))}function dm(e,t){return e=ge(e),t=ge(t),(e instanceof sm||e instanceof lm)&&(t instanceof sm||t instanceof lm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function pm(e,t){return e=ge(e),t=ge(t),e instanceof cm&&t instanceof cm&&e.firestore===t.firestore&&cs(e._query,t._query)&&e.converter===t.converter}var vm=function(){function e(){var t=this;a(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new ld(this,"async_queue_retry"),this.qa=function(){var e=sd();e&&no("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=sd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return u(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=sd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new fo;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=Ce(I().mark((function e(){var t=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ml(e.t0)){e.next=12;break}throw e.t0;case 12:no("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ro("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=ip.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&oo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=l(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=l(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function mm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=l(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var ym=function(){function e(){a(this,e),this._progressObserver={},this._taskCompletionResolver=new fo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return u(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),gm=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this,e,r,i)).type="firestore",o._queue=new vm,o._persistenceKey="name"in e?e.name:"[DEFAULT]",o}return u(n,[{key:"_terminate",value:function(){return this._firestoreClient||bm(this),this._firestoreClient.terminate()}}]),n}(om);function km(e){return e._firestoreClient||bm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bm(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ko(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Dv(e._authCredentials,e._appCheckCredentials,e._queue,r)}function wm(e,t,n){var r=new fo;return e.asyncQueue.enqueue(Ce(I().mark((function i(){return I().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Lv(e,n);case 3:return i.next=5,jv(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===co.FAILED_PRECONDITION||e.code===co.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function _m(e){return function(e){return e.asyncQueue.enqueue(Ce(I().mark((function t(){var n,r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zv(e);case 2:return n=t.sent,t.next=5,Kv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=so(e);return t.fu.delete(0),yd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(km(e=rm(e,gm)))}function xm(e){return function(e){return e.asyncQueue.enqueue(Ce(I().mark((function t(){var n,r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zv(e);case 2:return n=t.sent,t.next=5,Kv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=so(t)).fu.add(0),e.next=4,kd(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(km(e=rm(e,gm)))}function Em(e,t){var n=km(e=rm(e,gm)),r=new ym;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Av(e,t)}(function(e,t){if(e instanceof Uint8Array)return Nv(e,t);if(e instanceof ArrayBuffer)return Nv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,cd(t));e.asyncQueue.enqueueAndForget(Ce(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ev,t.next=3,Hv(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Im(e,t){return function(e,t){return e.asyncQueue.enqueue(Ce(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=so(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Wv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(km(e=rm(e,gm)),t).then((function(t){return t?new cm(e,null,t.query):null}))}function Sm(e){if(e._initialized||e._terminated)throw new lo(co.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Cm=function(){function e(){a(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new lo(co.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lo(n)}return u(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Tm=function(){function e(t){a(this,e),this._byteString=t}return u(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(jo.fromBase64String(t))}catch(t){throw new lo(co.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(jo.fromUint8Array(t))}}]),e}(),Nm=u((function e(t){a(this,e),this._methodName=t})),Pm=function(){function e(t,n){if(a(this,e),!isFinite(t)||t<-90||t>90)throw new lo(co.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new lo(co.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return u(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Eo(this._lat,e._lat)||Eo(this._long,e._long)}}]),e}(),Am=/^__.*__$/,Rm=function(){function e(t,n,r){a(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return u(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new qs(e,this.data,t,this.fieldTransforms)}}]),e}(),Om=function(){function e(t,n,r){a(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return u(e,[{key:"toMutation",value:function(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Dm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oo()}}var Lm=function(){function e(t,n,r,i,o,u){a(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ya(),this.fieldTransforms=o||[],this.fieldMask=u||[]}return u(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return ty(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Dm(this.Xa)&&Am.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),Mm=function(){function e(t,n,r){a(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||cd(t)}return u(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Lm({Xa:e,methodName:t,uc:n,path:Lo.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function jm(e){var t=e._freezeSettings(),n=cd(e._databaseId);return new Mm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Fm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);$m("Data must be an object, but it was:",o,r);var u,s,c=Qm(r,o);if(a.merge)u=new Mo(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var f,h=[],d=l(a.mergeFields);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=Xm(t,p,n);if(!o.contains(v))throw new lo(co.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));ny(h,v)||h.push(v)}}catch(m){d.e(m)}finally{d.f()}u=new Mo(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Rm(new gu(c),u,s)}var Um=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Nm);function Vm(e,t,n){return new Lm({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var qm=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"_toFieldTransform",value:function(e){return new As(e.path,new xs)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Nm),Bm=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e)).cc=r,i}return u(n,[{key:"_toFieldTransform",value:function(e){var t=Vm(this,e,!0),n=this.cc.map((function(e){return Zm(e,t)})),r=new Es(n);return new As(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Nm),zm=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e)).cc=r,i}return u(n,[{key:"_toFieldTransform",value:function(e){var t=Vm(this,e,!0),n=this.cc.map((function(e){return Zm(e,t)})),r=new Ss(n);return new As(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Nm),Wm=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e)).hc=r,i}return u(n,[{key:"_toFieldTransform",value:function(e){var t=new Ts(e.M,gs(e.M,this.hc));return new As(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Nm);function Km(e,t,n,r){var i=e.ac(1,t,n);$m("Data must be an object, but it was:",i,r);var a=[],o=gu.empty();Po(r,(function(e,r){var u=ey(t,e,n);r=ge(r);var s=i.sc(u);if(r instanceof Um)a.push(u);else{var c=Zm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Mo(a);return new Om(o,u,i.fieldTransforms)}function Hm(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[Xm(t,r,n)],s=[i];if(a.length%2!=0)throw new lo(co.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Xm(t,a[c])),s.push(a[c+1]);for(var l=[],f=gu.empty(),h=u.length-1;h>=0;--h)if(!ny(l,u[h])){var d=u[h],p=s[h];p=ge(p);var v=o.sc(d);if(p instanceof Um)l.push(d);else{var m=Zm(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Mo(l);return new Om(f,y,o.fieldTransforms)}function Gm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Zm(n,e.ac(r?4:3,t))}function Zm(e,t){if(Ym(e=ge(e)))return $m("Unsupported field value:",t,e),Qm(e,t);if(e instanceof Nm)return function(e,t){if(!Dm(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=l(e);try{for(a.s();!(n=a.n()).done;){var o=Zm(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ge(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return gs(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Co.fromDate(e);return{timestampValue:Tc(t.M,n)}}if(e instanceof Co){var r=new Co(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Tc(t.M,r)}}if(e instanceof Pm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Tm)return{bytesValue:Nc(t.M,e._byteString)};if(e instanceof sm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Rc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(nm(e)))}(e,t)}function Qm(e,t){var n={};return Ao(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Po(e,(function(e,r){var i=Zm(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ym(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Co||e instanceof Pm||e instanceof Tm||e instanceof sm||e instanceof Nm)}function $m(e,t,n){if(!Ym(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=nm(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function Xm(e,t,n){if((t=ge(t))instanceof Cm)return t._internalPath;if("string"==typeof t)return ey(e,t);throw ty("Field path arguments must be of type string or ",e,!1,void 0,n)}var Jm=new RegExp("[~\\*/\\[\\]]");function ey(e,t,n){if(t.search(Jm)>=0)throw ty("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return _(Cm,Ie(t.split(".")))._internalPath}catch(Sk){throw ty("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ty(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new lo(co.INVALID_ARGUMENT,u+e+s)}function ny(e,t){return e.some((function(e){return e.isEqual(t)}))}var ry=function(){function e(t,n,r,i,o){a(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return u(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new sm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new iy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ay("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),iy=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"data",value:function(){return jt(y(n.prototype),"data",this).call(this)}}]),n}(ry);function ay(e,t){return"string"==typeof t?ey(e,t):t instanceof Cm?t._internalPath:t._delegate._internalPath}var oy=function(){function e(t,n){a(this,e),this.hasPendingWrites=t,this.fromCache=n}return u(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),uy=function(e){m(n,e);var t=w(n);function n(e,r,i,o,u,s){var c;return a(this,n),(c=t.call(this,e,r,i,o,s))._firestore=e,c._firestoreImpl=e,c.metadata=u,c}return u(n,[{key:"exists",value:function(){return jt(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ay("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ry),sy=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jt(y(n.prototype),"data",this).call(this,e)}}]),n}(uy),cy=function(){function e(t,n,r,i){a(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new oy(i.hasPendingWrites,i.fromCache),this.query=r}return u(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sy(n._firestore,n._userDataWriter,r.key,r,new oy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new lo(co.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new sy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ly(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function ly(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oo()}}function fy(e,t){return e instanceof uy&&t instanceof uy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof cy&&t instanceof cy&&e._firestore===t._firestore&&pm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function hy(e){if(ns(e)&&0===e.explicitOrderBy.length)throw new lo(co.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dy=u((function e(){a(this,e)}));function py(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var vy=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).lc=e,o.fc=r,o.dc=i,o.type="where",o}return u(n,[{key:"_apply",value:function(e){var t=jm(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new lo(co.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Sy(o,a);var s,c=[],f=l(o);try{for(f.s();!(s=f.n()).done;){var h=s.value;c.push(Iy(r,e,h))}}catch(p){f.e(p)}finally{f.f()}u={arrayValue:{values:c}}}else u=Iy(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Sy(o,a),u=Gm(n,"where",o,"in"===a||"not-in"===a);var d=Fu.create(i,a,u);return function(e,t){if(t.S()){var n=is(e);if(null!==n&&!n.isEqual(t.field))throw new lo(co.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=rs(e);null!==r&&Cy(e,t.field,r)}var i=function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new lo(co.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new lo(co.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new cm(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(dy);var my=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return u(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new lo(co.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new lo(co.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Zu(t,n);return function(e,t){if(null===rs(e)){var n=is(e);null!==n&&Cy(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new cm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Xu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(dy);var yy=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).type=e,o.wc=r,o.mc=i,o}return u(n,[{key:"_apply",value:function(e){return new cm(e.firestore,e.converter,ss(e._query,this.wc,this.mc))}}]),n}(dy);var gy=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).type=e,o.gc=r,o.yc=i,o}return u(n,[{key:"_apply",value:function(e){var t=Ey(e,this.type,this.gc,this.yc);return new cm(e.firestore,e.converter,function(e,t){return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(dy);function ky(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gy("startAt",t,!0)}function by(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gy("startAfter",t,!1)}var wy=function(e){m(n,e);var t=w(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).type=e,o.gc=r,o.yc=i,o}return u(n,[{key:"_apply",value:function(e){var t=Ey(e,this.type,this.gc,this.yc);return new cm(e.firestore,e.converter,function(e,t){return new Xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(dy);function _y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wy("endBefore",t,!1)}function xy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wy("endAt",t,!0)}function Ey(e,t,n,r){if(n[0]=ge(n[0]),n[0]instanceof ry)return function(e,t,n,r,i){if(!r)throw new lo(co.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=l(os(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ou(t,r.key));else{var c=r.data.field(s.field);if(Bo(c))throw new lo(co.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var f=s.field.canonicalString();throw new lo(co.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(f,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new Gu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=jm(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new lo(co.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new lo(co.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!as(e)&&-1!==c.indexOf("/"))throw new lo(co.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Oo.fromString(c));if(!Yo.isDocumentKey(l))throw new lo(co.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Yo(l);u.push(ou(t,f))}else{var h=Gm(n,r,c);u.push(h)}}return new Gu(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Iy(e,t,n){if("string"==typeof(n=ge(n))){if(""===n)throw new lo(co.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!as(t)&&-1!==n.indexOf("/"))throw new lo(co.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Oo.fromString(n));if(!Yo.isDocumentKey(r))throw new lo(co.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ou(e,new Yo(r))}if(n instanceof sm)return ou(e,n._key);throw new lo(co.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(nm(n),"."))}function Sy(e,t){if(!Array.isArray(e)||0===e.length)throw new lo(co.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new lo(co.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Cy(e,t,n){if(!n.isEqual(t))throw new lo(co.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ty=function(){function e(){a(this,e)}return u(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw oo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Po(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Pm(Vo(e.latitude),Vo(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=zo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wo(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Uo(e);return new Co(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Oo.fromString(e);uo(nl(n));var r=new Ho(n.get(1),n.get(3)),i=new Yo(n.popFirst(5));return r.isEqual(t)||ro("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Ny(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Py=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this)).firestore=e,r}return u(n,[{key:"convertBytes",value:function(e){return new Tm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sm(this.firestore,null,t)}}]),n}(Ty),Ay=function(){function e(t,n){a(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jm(t)}return u(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Ry(e,this._firestore),i=Ny(r.converter,t,n),a=Fm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Os.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Ry(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ge(t))||t instanceof Cm?Hm(this._dataReader,"WriteBatch.update",i._key,t,n,o):Km(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Os.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Ry(e,this._firestore);return this._mutations=this._mutations.concat(new Zs(t._key,Os.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new lo(co.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Ry(e,t){if((e=ge(e)).firestore!==t)throw new lo(co.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Oy=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this)).firestore=e,r}return u(n,[{key:"convertBytes",value:function(e){return new Tm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sm(this.firestore,null,t)}}]),n}(Ty);function Dy(e){e=rm(e,sm);var t=rm(e.firestore,gm),n=km(t),r=new Oy(t);return function(e,t){var n=new fo;return e.asyncQueue.enqueueAndForget(Ce(I().mark((function r(){return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=so(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new lo(co.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ap(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Wv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new uy(t,r,e._key,n,new oy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Ly(e){e=rm(e,cm);var t=rm(e.firestore,gm),n=km(t),r=new Oy(t);return function(e,t){var n=new fo;return e.asyncQueue.enqueueAndForget(Ce(I().mark((function r(){return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ce(I().mark((function e(t,n,r){var i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ch(t,n,!0);case 3:i=e.sent,a=new Ip(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ap(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Wv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new cy(t,r,e,n)}))}function My(e,t,n){e=rm(e,sm);var r=rm(e.firestore,gm),i=Ny(e.converter,t,n);return Vy(r,[Fm(jm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Os.none())])}function jy(e,t,n){e=rm(e,sm);for(var r=rm(e.firestore,gm),i=jm(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Vy(r,[("string"==typeof(t=ge(t))||t instanceof Cm?Hm(i,"updateDoc",e._key,t,n,o):Km(i,"updateDoc",e._key,t)).toMutation(e._key,Os.exists(!0))])}function Fy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ge(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||mm(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(mm(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof sm)l=rm(e.firestore,gm),f=es(e._key.path),c={next:function(t){n[s]&&n[s](qy(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=rm(e,cm);l=rm(p.firestore,gm),f=p._query;var v=new Oy(l);c={next:function(e){n[s]&&n[s](new cy(l,v,p,e))},error:n[s+1],complete:n[s+2]},hy(e._query)}return function(e,t,n,r){var i=new Pv(r),a=new gp(t,i,n);return e.asyncQueue.enqueueAndForget(Ce(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fp,t.next=3,Gv(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(Ce(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dp,t.next=3,Gv(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(km(l),f,h,c)}function Uy(e,t){return function(e,t){var n=new Pv(t);return e.asyncQueue.enqueueAndForget(Ce(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){so(e).Eu.add(t),t.next()},t.next=3,Gv(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(Ce(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){so(e).Eu.delete(t)},t.next=3,Gv(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(km(e=rm(e,gm)),mm(t)?t:{next:t})}function Vy(e,t){return function(e,t){var n=new fo;return e.asyncQueue.enqueueAndForget(Ce(I().mark((function r(){return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Lp,r.next=3,Hv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(km(e),t)}function qy(e,t,n){var r=n.docs.get(t._key),i=new Oy(e);return new uy(e,i,t._key,r,new oy(n.hasPendingWrites,n.fromCache),t.converter)}var By=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,r))._firestore=e,i}return u(n,[{key:"get",value:function(e){var t=this,r=Ry(e,this._firestore),i=new Oy(this._firestore);return jt(y(n.prototype),"get",this).call(this,e).then((function(e){return new uy(t._firestore,i,r._key,e._document,new oy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){a(this,e),this._firestore=t,this._transaction=n,this._dataReader=jm(t)}return u(e,[{key:"get",value:function(e){var t=this,n=Ry(e,this._firestore),r=new Py(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return oo();var i=e[0];if(i.isFoundDocument())return new ry(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ry(t._firestore,r,n._key,null,n.converter);throw oo()}))}},{key:"set",value:function(e,t,n){var r=Ry(e,this._firestore),i=Ny(r.converter,t,n),a=Fm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Ry(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ge(t))||t instanceof Cm?Hm(this._dataReader,"Transaction.update",i._key,t,n,o):Km(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Ry(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function zy(e,t){return function(e,t){var n=new fo;return e.asyncQueue.enqueueAndForget(Ce(I().mark((function r(){var i;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return qv(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Ov(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(km(e=rm(e,gm)),(function(n){return t(new By(e,n))}))}function Wy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Bm("arrayUnion",t)}function Ky(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zm("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ja=e}(at),Xe(new Te("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new gm(i,new mo(e.getProvider("auth-internal")),new bo(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),ft($a,"3.4.8",e),ft($a,"3.4.8","esm2017")}();function Hy(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new lo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Gy(){if("undefined"===typeof Uint8Array)throw new lo("unimplemented","Uint8Arrays are not available in this environment.")}function Zy(){if("undefined"==typeof atob)throw new lo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Qy=function(){function e(t){a(this,e),this._delegate=t}return u(e,[{key:"toBase64",value:function(){return Zy(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Gy(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Zy(),new e(Tm.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Gy(),new e(Tm.fromUint8Array(t))}}]),e}();function Yy(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=l(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var $y=function(){function e(){a(this,e)}return u(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Sm(e=rm(e,gm));var n=km(e),r=e._freezeSettings(),i=new Tv;return wm(n,i,new Sv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Sm(e=rm(e,gm));var t=km(e),n=e._freezeSettings(),r=new Tv;return wm(t,r,new Cv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new lo(co.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new fo;return e._queue.enqueueAndForgetEvenWhileRestricted(Ce(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ol.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ol.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(fh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Xy=function(){function e(t,n,r){var i=this;a(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ho||(this._appCompat=t)}return u(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||io("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};um(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return _m(this._delegate)}},{key:"disableNetwork",value:function(){return xm(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Jv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new fo;return e.asyncQueue.enqueueAndForget(Ce(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Hp,n.next=3,Hv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(km(e=rm(e,gm)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Uy(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new lo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hg(this,fm(this._delegate,e))}catch(_k){throw ig(_k,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rg(this,hm(this._delegate,e))}catch(_k){throw ig(_k,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cg(this,function(e,t){if(e=rm(e,om),Xv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new lo(co.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cm(e,null,function(e){return new Xu(Oo.emptyPath(),e)}(t))}(this._delegate,e))}catch(_k){throw ig(_k,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return zy(this._delegate,(function(n){return e(new eg(t,n))}))}},{key:"batch",value:function(){var e=this;return km(this._delegate),new tg(new Ay(this._delegate,(function(t){return Vy(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Em(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Im(this._delegate,e).then((function(e){return e?new cg(t,e):null}))}}]),e}(),Jy=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this)).firestore=e,r}return u(n,[{key:"convertBytes",value:function(e){return new Qy(new Tm(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rg.forKey(t,this.firestore,null)}}]),n}(Ty);var eg=function(){function e(t,n){a(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Jy(t)}return u(e,[{key:"get",value:function(e){var t=this,n=dg(e);return this._delegate.get(n).then((function(e){return new ug(t._firestore,new uy(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dg(e);return n?(Hy("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dg(e);return this._delegate.delete(t),this}}]),e}(),tg=function(){function e(t){a(this,e),this._delegate=t}return u(e,[{key:"set",value:function(e,t,n){var r=dg(e);return n?(Hy("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ng=function(){function e(t,n,r){a(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return u(e,[{key:"fromFirestore",value:function(e,t){var n=new sy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Jy(t),n),i.set(n,a)),a}}]),e}();ng.INSTANCES=new WeakMap;var rg=function(){function e(t,n){a(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Jy(t)}return u(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hg(this.firestore,fm(this._delegate,e))}catch(_k){throw ig(_k,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ge(e))instanceof sm&&dm(this._delegate,e)}},{key:"set",value:function(e,t){t=Hy("DocumentReference.set",t);try{return t?My(this._delegate,e,t):My(this._delegate,e)}catch(_k){throw ig(_k,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?jy(this._delegate,e):jy.apply(void 0,[this._delegate,e,t].concat(r))}catch(_k){throw ig(_k,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Vy(rm(e.firestore,gm),[new Zs(e._key,Os.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ag(n),a=og(n,(function(t){return new ug(e.firestore,new uy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Fy(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Dy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rm(e,sm);var t=rm(e.firestore,gm);return Qv(km(t),e._key,{source:"server"}).then((function(n){return qy(t,e,n)}))}(this._delegate):function(e){e=rm(e,sm);var t=rm(e.firestore,gm);return Qv(km(t),e._key).then((function(n){return qy(t,e,n)}))}(this._delegate),t.then((function(e){return new ug(n.firestore,new uy(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ng.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new lo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new sm(n._delegate,r,new Yo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new sm(n._delegate,r,t))}}]),e}();function ig(e,t,n){return e.message=e.message.replace(t,n),e}function ag(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Yy(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function og(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Yy(e[0])?e[0]:Yy(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ug=function(){function e(t,n){a(this,e),this._firestore=t,this._delegate=n}return u(e,[{key:"ref",get:function(){return new rg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return fy(this._delegate,e._delegate)}}]),e}(),sg=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||oo()}(void 0!==t),t}}]),n}(ug),cg=function(){function e(t,n){a(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Jy(t)}return u(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,py(this._delegate,function(e,t,n){var r=t,i=ay("where",e);return new vy(i,r,n)}(t,n,r)))}catch(_k){throw ig(_k,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,py(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ay("orderBy",e);return new my(n,t)}(t,n)))}catch(_k){throw ig(_k,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,py(this._delegate,function(e){return im("limit",e),new yy("limit",e,"F")}(t)))}catch(_k){throw ig(_k,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,py(this._delegate,function(e){return im("limitToLast",e),new yy("limitToLast",e,"L")}(t)))}catch(_k){throw ig(_k,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,py(this._delegate,ky.apply(void 0,arguments)))}catch(_k){throw ig(_k,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,py(this._delegate,by.apply(void 0,arguments)))}catch(_k){throw ig(_k,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,py(this._delegate,_y.apply(void 0,arguments)))}catch(_k){throw ig(_k,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,py(this._delegate,xy.apply(void 0,arguments)))}catch(_k){throw ig(_k,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return pm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ly(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rm(e,cm);var t=rm(e.firestore,gm),n=km(t),r=new Oy(t);return Yv(n,e._query,{source:"server"}).then((function(n){return new cy(t,r,e,n)}))}(this._delegate):function(e){e=rm(e,cm);var t=rm(e.firestore,gm),n=km(t),r=new Oy(t);return hy(e._query),Yv(n,e._query).then((function(n){return new cy(t,r,e,n)}))}(this._delegate),t.then((function(e){return new fg(n.firestore,new cy(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ag(n),a=og(n,(function(t){return new fg(e.firestore,new cy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Fy(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ng.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lg=function(){function e(t,n){a(this,e),this._firestore=t,this._delegate=n}return u(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fg=function(){function e(t,n){a(this,e),this._firestore=t,this._delegate=n}return u(e,[{key:"query",get:function(){return new cg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return fy(this._delegate,e._delegate)}}]),e}(),hg=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return u(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rg(this.firestore,void 0===e?hm(this._delegate):hm(this._delegate,e))}catch(_k){throw ig(_k,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=rm(e.firestore,gm),r=hm(e),i=Ny(e.converter,t);return Vy(n,[Fm(jm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Os.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return dm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(ng.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cg);function dg(e){return rm(e,sm)}var pg,vg=function(){function e(){a(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=_(Cm,n)}return u(e,[{key:"isEqual",value:function(e){return(e=ge(e))instanceof Cm&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Lo.keyField().canonicalString())}}]),e}(),mg=function(){function e(t){a(this,e),this._delegate=t}return u(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new qm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Um("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Wy.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Ky.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Wm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),yg={Firestore:Xy,GeoPoint:Pm,Timestamp:Co,Blob:Qy,Transaction:eg,WriteBatch:tg,DocumentReference:rg,DocumentSnapshot:ug,Query:cg,QueryDocumentSnapshot:sg,QuerySnapshot:fg,CollectionReference:hg,FieldPath:vg,FieldValue:mg,setLogLevel:function(e){!function(e){eo.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Te("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},yg)))})(pg=Lt,(function(e,t){return new Xy(e,t,new $y)})),pg.registerVersion("@firebase/firestore-compat","0.1.17");var gg=t.createContext(null);var kg=function(e){e()},bg=function(){return kg};var wg={notify:function(){},get:function(){return[]}};function _g(e,t){var n,r=wg;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=bg(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=wg)},getListeners:function(){return r}};return o}var xg="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?t.useLayoutEffect:t.useEffect;var Eg=function(e){var n=e.store,r=e.context,i=e.children,a=(0,t.useMemo)((function(){var e=_g(n);return{store:n,subscription:e}}),[n]),o=(0,t.useMemo)((function(){return n.getState()}),[n]);xg((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var u=r||gg;return t.createElement(u.Provider,{value:a},i)};n(2110),n(6900);var Ig=n(7462);function Sg(){return(0,t.useContext)(gg)}function Cg(e){void 0===e&&(e=gg);var n=e===gg?Sg:function(){return(0,t.useContext)(e)};return function(){return n().store}}var Tg=Cg();function Ng(e){void 0===e&&(e=gg);var t=e===gg?Tg:Cg(e);return function(){return t().dispatch}}var Pg=Ng(),Ag=function(e,t){return e===t};function Rg(e){void 0===e&&(e=gg);var n=e===gg?Sg:function(){return(0,t.useContext)(e)};return function(e,r){void 0===r&&(r=Ag);var i=n(),a=function(e,n,r,i){var a,o=(0,t.useReducer)((function(e){return e+1}),0),u=o[1],s=(0,t.useMemo)((function(){return _g(r,i)}),[r,i]),c=(0,t.useRef)(),l=(0,t.useRef)(),f=(0,t.useRef)(),h=(0,t.useRef)(),d=r.getState();try{if(e!==l.current||d!==f.current||c.current){var p=e(d);a=void 0!==h.current&&n(p,h.current)?h.current:p}else a=h.current}catch(v){throw c.current&&(v.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"),v}return xg((function(){l.current=e,f.current=d,h.current=a,c.current=void 0})),xg((function(){function e(){try{var e=r.getState();if(e===f.current)return;var t=l.current(e);if(n(t,h.current))return;h.current=t,f.current=e}catch(v){c.current=v}u()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[r,s]),a}(e,r,i.store,i.subscription);return(0,t.useDebugValue)(a),a}}var Og,Dg=Rg();Og=r.unstable_batchedUpdates,kg=Og;var Lg,Mg="PRODUCTS.GET_PRODUCTS",jg="PRODUCTS.FETCH_PRODUCTS",Fg=function(e){return{type:Mg,payload:e}},Ug=function(){return{type:jg}};!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Lg||(Lg={}));var Vg=function(e){return e};var qg="beforeunload",Bg="popstate";function zg(e){e.preventDefault(),e.returnValue=""}function Wg(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function Kg(){return Math.random().toString(36).substr(2,8)}function Hg(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Gg(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var Zg=(0,t.createContext)(null);var Qg=(0,t.createContext)(null);var Yg=(0,t.createContext)({outlet:null,matches:[]});function $g(e,t){if(!e)throw new Error(t)}function Xg(e,t,n){void 0===n&&(n="/");var r=ok(("string"===typeof t?Gg(t):t).pathname||"/",n);if(null==r)return null;var i=Jg(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=rk(i[o],r);return a}function Jg(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||$g(!1),a.relativePath=a.relativePath.slice(r.length));var o=uk([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&$g(!1),Jg(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:nk(o,e.index),routesMeta:u})})),t}var ek=/^:\w+$/,tk=function(e){return"*"===e};function nk(e,t){var n=e.split("/"),r=n.length;return n.some(tk)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!tk(e)})).reduce((function(e,t){return e+(ek.test(t)?3:""===t?1:10)}),r)}function rk(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=ik({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:uk([i,l.pathname]),pathnameBase:sk(uk([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=uk([i,l.pathnameBase]))}return a}function ik(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=d(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(TO){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function ak(e,t,n){var r,i="string"===typeof e?Gg(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Gg(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ck(a),hash:lk(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function ok(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var uk=function(e){return e.join("/").replace(/\/\/+/g,"/")},sk=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ck=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},lk=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function fk(e){hk()||$g(!1);var n=(0,t.useContext)(Zg),r=n.basename,i=n.navigator,a=vk(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?Gg(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):uk([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function hk(){return null!=(0,t.useContext)(Qg)}function dk(){return hk()||$g(!1),(0,t.useContext)(Qg).location}function pk(){hk()||$g(!1);var e=(0,t.useContext)(Zg),n=e.basename,r=e.navigator,i=(0,t.useContext)(Yg).matches,a=dk().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=ak(e,JSON.parse(o),a);"/"!==n&&(i.pathname=uk([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function vk(e){var n=(0,t.useContext)(Yg).matches,r=dk().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return ak(e,JSON.parse(i),r)}),[e,i,r])}function mk(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(Yg.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function yk(e){$g(!1)}function gk(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?Lg.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;hk()&&$g(!1);var h=sk(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=Gg(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,E=void 0===x?"default":x,I=(0,t.useMemo)((function(){var e=ok(m,h);return null==e?null:{pathname:e,search:g,hash:b,state:_,key:E}}),[h,m,g,b,_,E]);return null==I?null:(0,t.createElement)(Zg.Provider,{value:d},(0,t.createElement)(Qg.Provider,{children:a,value:{location:I,navigationType:s}}))}function kk(e){var n=e.children,r=e.location;return function(e,n){hk()||$g(!1);var r,i=(0,t.useContext)(Yg).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,dk());if(n){var c,l="string"===typeof n?Gg(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||$g(!1),r=l}else r=s;var f=r.pathname||"/",h=Xg(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return mk(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:uk([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:uk([u,e.pathnameBase])})})),i)}(bk(n),r)}function bk(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==yk&&$g(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=bk(e.props.children)),n.push(r)}else n.push.apply(n,bk(e.props.children))})),n}var wk=n.p+"static/media/pngegg.dcdf02f865198e86fd06.png",_k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function xk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ek(e,t){return e(t={exports:{}},t.exports),t.exports}var Ik="function"==typeof Symbol&&Symbol.for,Sk=Ik?Symbol.for("react.element"):60103,Ck=Ik?Symbol.for("react.portal"):60106,Tk=Ik?Symbol.for("react.fragment"):60107,Nk=Ik?Symbol.for("react.strict_mode"):60108,Pk=Ik?Symbol.for("react.profiler"):60114,Ak=Ik?Symbol.for("react.provider"):60109,Rk=Ik?Symbol.for("react.context"):60110,Ok=Ik?Symbol.for("react.async_mode"):60111,Dk=Ik?Symbol.for("react.concurrent_mode"):60111,Lk=Ik?Symbol.for("react.forward_ref"):60112,Mk=Ik?Symbol.for("react.suspense"):60113,jk=Ik?Symbol.for("react.suspense_list"):60120,Fk=Ik?Symbol.for("react.memo"):60115,Uk=Ik?Symbol.for("react.lazy"):60116,Vk=Ik?Symbol.for("react.block"):60121,qk=Ik?Symbol.for("react.fundamental"):60117,Bk=Ik?Symbol.for("react.responder"):60118,zk=Ik?Symbol.for("react.scope"):60119;function Wk(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Sk:switch(e=e.type){case Ok:case Dk:case Tk:case Pk:case Nk:case Mk:return e;default:switch(e=e&&e.$$typeof){case Rk:case Lk:case Uk:case Fk:case Ak:return e;default:return t}}case Ck:return t}}}function Kk(e){return Wk(e)===Dk}var Hk={AsyncMode:Ok,ConcurrentMode:Dk,ContextConsumer:Rk,ContextProvider:Ak,Element:Sk,ForwardRef:Lk,Fragment:Tk,Lazy:Uk,Memo:Fk,Portal:Ck,Profiler:Pk,StrictMode:Nk,Suspense:Mk,isAsyncMode:function(e){return Kk(e)||Wk(e)===Ok},isConcurrentMode:Kk,isContextConsumer:function(e){return Wk(e)===Rk},isContextProvider:function(e){return Wk(e)===Ak},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Sk},isForwardRef:function(e){return Wk(e)===Lk},isFragment:function(e){return Wk(e)===Tk},isLazy:function(e){return Wk(e)===Uk},isMemo:function(e){return Wk(e)===Fk},isPortal:function(e){return Wk(e)===Ck},isProfiler:function(e){return Wk(e)===Pk},isStrictMode:function(e){return Wk(e)===Nk},isSuspense:function(e){return Wk(e)===Mk},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===Tk||e===Dk||e===Pk||e===Nk||e===Mk||e===jk||"object"==typeof e&&null!==e&&(e.$$typeof===Uk||e.$$typeof===Fk||e.$$typeof===Ak||e.$$typeof===Rk||e.$$typeof===Lk||e.$$typeof===qk||e.$$typeof===Bk||e.$$typeof===zk||e.$$typeof===Vk)},typeOf:Wk};Ek((function(e,t){})),Ek((function(e){e.exports=Hk})),function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}();function Gk(){}function Zk(){}Function.call.bind(Object.prototype.hasOwnProperty),Zk.resetWarningCache=Gk;var Qk=Ek((function(e){e.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Zk,resetWarningCache:Gk};return n.PropTypes=n,n}()})),Yk=xk(Ek((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")}}))),$k=function(e,t){var n={};for(var r in e)-1===t.indexOf(r)&&(n[r]=e[r]);return n},Xk=function(){return _k.__global_unique_id__=(_k.__global_unique_id__||0)+1},Jk=function(){},eb=Ek((function(e,n){n.__esModule=!0;var r=a(Qk),i=a(Xk);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}a(Jk),n.default=function(e,n){var a,c,l="__create-react-context-"+(0,i.default)()+"__",f=function(e){function t(){var n,r,i,a;o(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=u(this,e.call.apply(e,[this].concat(c))),r.emitter=(i=r.props.value,a=[],{on:function(e){a.push(e)},off:function(e){a=a.filter((function(t){return t!==e}))},get:function(){return i},set:function(e,t){i=e,a.forEach((function(e){return e(i,t)}))}}),u(r,n)}return s(t,e),t.prototype.getChildContext=function(){var e;return(e={})[l]=this.emitter,e},t.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t=this.props.value,r=e.value,i=void 0;((a=t)===(o=r)?0!==a||1/a==1/o:a!=a&&o!=o)?i=0:(i="function"==typeof n?n(t,r):1073741823,0!=(i|=0)&&this.emitter.set(e.value,i))}var a,o},t.prototype.render=function(){return this.props.children},t}(t.Component);f.childContextTypes=((a={})[l]=r.default.object.isRequired,a);var h=function(t){function n(){var e,r;o(this,n);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=r=u(this,t.call.apply(t,[this].concat(a))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!=((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},u(r,e)}return s(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?1073741823:t},n.prototype.componentDidMount=function(){this.context[l]&&this.context[l].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?1073741823:e},n.prototype.componentWillUnmount=function(){this.context[l]&&this.context[l].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[l]?this.context[l].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return h.contextTypes=((c={})[l]=r.default.object,c),{Provider:f,Consumer:h}},e.exports=n.default}));xk(eb);var tb=xk(Ek((function(e,n){n.__esModule=!0;var r=a(t),i=a(eb);function a(e){return e&&e.__esModule?e:{default:e}}n.default=r.default.createContext||i.default,e.exports=n.default}))),nb=tb(null),rb=tb(null),ib=function(e){return function(n){return t.createElement(rb.Consumer,null,(function(r){return t.createElement(e,Object.assign({},{parent:r},n))}))}};function ab(e,n,r){void 0===n&&(n=!1),void 0===r&&(r=[]);var i=function(i){function a(){i.call(this),this.state={loading:!0},this._isMounted=!1}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this.props.ymaps.load().then((function(t){return Promise.all(r.concat(e.props.modules).map(t.loadModule)).then((function(){!0===e._isMounted&&e.setState({loading:!1},(function(){e.props.onLoad(t)}))}))})).catch((function(t){!0===e._isMounted&&e.props.onError(t)}))},a.prototype.componentWillUnmount=function(){this._isMounted=!1},a.prototype.render=function(){var r=this.props.ymaps,i=!1===n||!1===this.state.loading,a=$k(this.props,["onLoad","onError","modules","ymaps"]);return i&&t.createElement(e,Object.assign({},{ymaps:r.getApi()},a))},a}(t.Component);return i.defaultProps={onLoad:Function.prototype,onError:Function.prototype,modules:[]},function(e){var n=Yk(e);return function(r){return t.createElement(nb.Consumer,null,(function(i){if(null===i)throw new Error("Couldn't find Yandex.Maps API in the context. Make sure that <"+n+" /> is inside <YMaps /> provider");return t.createElement(e,Object.assign({},{ymaps:i},r))}))}}(i)}var ob={lang:"ru_RU",load:"",ns:"",mode:"release"},ub={},sb=function(e){var t=Date.now().toString(32);this.options=e,this.namespace=e.query.ns||ob.ns,this.onload="__yandex-maps-api-onload__$$"+t,this.onerror="__yandex-maps-api-onerror__$$"+t};sb.prototype.getApi=function(){return"undefined"!=typeof window&&this.namespace?window[this.namespace]:this.api},sb.prototype.setApi=function(e){return this.api=e},sb.prototype.getPromise=function(){return this.namespace?ub[this.namespace]:this.promise},sb.prototype.setPromise=function(e){return this.namespace?ub[this.namespace]=this.promise=e:this.promise=e},sb.prototype.load=function(){var e=this;if(this.getApi())return Promise.resolve(this.setApi(this.getApi()));if(this.getPromise())return this.setPromise(this.getPromise());var t=Object.assign({onload:this.onload,onerror:this.onerror},ob,this.options.query),n=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"),r=["https://"+(this.options.enterprise?"enterprise.":"")+"api-maps.yandex.ru",this.options.version,"?"+n].join("/"),i=new Promise((function(t,n){window[e.onload]=function(n){delete window[e.onload],n.loadModule=e.loadModule.bind(e),n.ready((function(){return t(e.setApi(n))}))},window[e.onerror]=function(t){delete window[e.onerror],n(t)},e.fetchScript(r).catch(window[e.onerror])}));return this.setPromise(i)},sb.prototype.fetchScript=function(e){var t=this;return new Promise((function(n,r){t.script=document.createElement("script"),t.script.type="text/javascript",t.script.onload=n,t.script.onerror=r,t.script.src=e,t.script.async="async",document.head.appendChild(t.script)}))},sb.prototype.loadModule=function(e){var t=this;return new Promise((function(n,r){t.getApi().modules.require(e,(function(r){!function(e,t,n,r){void 0===r&&(r=!1),t="string"==typeof t?t.split("."):t.slice();for(var i,a=e;t.length>1;)a[i=t.shift()]||(a[i]={}),a=a[i];a[t[0]]=!0===r&&a[t[0]]||n}(t.api,e,r,!0),n(r)}),r,t.getApi())}))},sb._name="__react-yandex-maps__";var cb=function(e){function n(t){e.call(this,t),this.ymaps=new sb(t)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.componentDidMount=function(){!0===this.props.preload&&this.ymaps.load()},n.prototype.render=function(){return t.createElement(nb.Provider,{value:this.ymaps},this.props.children)},n}(t.Component);cb.defaultProps={version:"2.1",enterprise:!1,query:{lang:"ru_RU",load:"",ns:""},preload:!1};var lb=/^on(?=[A-Z])/;function fb(e){return Object.keys(e).reduce((function(t,n){if(lb.test(n)){var r=n.replace(lb,"").toLowerCase();t._events[r]=e[n]}else t[n]=e[n];return t}),{_events:{}})}function hb(e,t,n){"function"==typeof n&&e.events.add(t,n)}function db(e,t,n){"function"==typeof n&&e.events.remove(t,n)}function pb(e,t,n){Object.keys(Object.assign({},t,n)).forEach((function(r){t[r]!==n[r]&&(db(e,r,t[r]),hb(e,r,n[r]))}))}var vb=function(e){return"default"+e.charAt(0).toUpperCase()+e.slice(1)};function mb(e,t){return void 0!==e[t]||void 0===e[vb(t)]}function yb(e,t,n){return(mb(e,t)?e[t]:e[vb(t)])||n}function gb(e,t,n){if(void 0===n&&(n=null),e!==t){if(e&&(e.hasOwnProperty("current")?e.current=null:"function"==typeof e&&e(null)),!t)return;t.hasOwnProperty("current")?t.current=n:"function"==typeof t&&t(n)}}function kb(e){var t=e.width,n=e.height,r=e.style,i=e.className;return void 0!==r||void 0!==i?Object.assign({},r&&{style:r},i&&{className:i}):{style:{width:t,height:n}}}var bb=function(e){function n(){var t=this;e.call(this),this.state={instance:null},this._parentElement=null,this._getRef=function(e){t._parentElement=e}}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.componentDidMount=function(){var e=n.mountObject(this._parentElement,this.props.ymaps.Map,this.props);this.setState({instance:e})},n.prototype.componentDidUpdate=function(e){null!==this.state.instance&&n.updateObject(this.state.instance,e,this.props)},n.prototype.componentWillUnmount=function(){n.unmountObject(this.state.instance,this.props)},n.prototype.render=function(){var e=kb(this.props),n=fb(this.props),r=$k(n,["_events","state","defaultState","options","defaultOptions","instanceRef","ymaps","children","width","height","style","className"]);return t.createElement(rb.Provider,{value:this.state.instance},t.createElement("div",Object.assign({},{ref:this._getRef},e,r),this.props.children))},n.mountObject=function(e,t,n){var r=fb(n),i=r.instanceRef,a=r._events,o=new t(e,yb(n,"state"),yb(n,"options"));return Object.keys(a).forEach((function(e){return hb(o,e,a[e])})),gb(null,i,o),o},n.updateObject=function(e,t,n){var r=fb(n),i=r._events,a=r.instanceRef,o=fb(t),u=o._events,s=o.instanceRef;if(mb(n,"state")){var c=yb(t,"state",{}),l=yb(n,"state",{});c.type!==l.type&&e.setType(l.type),c.behaviors!==l.behaviors&&(c.behaviors&&e.behaviors.disable(c.behaviors),l.behaviors&&e.behaviors.enable(l.behaviors)),l.zoom&&c.zoom!==l.zoom&&e.setZoom(l.zoom),l.center&&c.center!==l.center&&e.setCenter(l.center),l.bounds&&c.bounds!==l.bounds&&e.setBounds(l.bounds)}if(mb(n,"options")){var f=yb(t,"options"),h=yb(n,"options",{});f!==h&&e.options.set(h)}yb(t,"width")===yb(n,"width")&&yb(t,"height")===yb(n,"height")||e.container.fitToViewport(),pb(e,u,i),gb(s,a,e)},n.unmountObject=function(e,t){var n=fb(t),r=n.instanceRef,i=n._events;null!==e&&(Object.keys(i).forEach((function(t){return db(e,t,i[t])})),e.destroy(),gb(r))},n}(t.Component);bb.defaultProps={width:320,height:240};var wb=ab(bb,!0,["Map"]),_b=function(e){function n(){var t=this;e.call(this),this.state={instance:null},this._parentElement=null,this._getRef=function(e){t._parentElement=e}}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.componentDidMount=function(){var e=this;this._mounted=!0,this.props.ymaps.panorama.isSupported()&&n.mountObject(this._parentElement,this.props.ymaps.panorama,this.props).then((function(t){return e._mounted&&e.setState({instance:t})}))},n.prototype.componentDidUpdate=function(e){null!==this.state.instance&&n.updateObject(this.state.instance,e,this.props)},n.prototype.componentWillUnmount=function(){this._mounted=!1,n.unmountObject(this.state.instance,this.props)},n.prototype.render=function(){var e=kb(this.props);return t.createElement("div",Object.assign({},{ref:this._getRef},e))},n.mountObject=function(e,t,n){var r=fb(n),i=r.instanceRef,a=r._events,o=yb(n,"point"),u=yb(n,"locateOptions"),s=yb(n,"options");return new Promise((function(n,r){t.locate(o,u).done((function(r){if(r.length>0){var o=new t.Player(e,r[0],s);gb(null,i,o),Object.keys(a).forEach((function(e){return hb(o,e,a[e])})),n(o)}}),r)}))},n.updateObject=function(e,t,n){var r=fb(n),i=r._events,a=r.instanceRef,o=fb(t),u=o._events,s=o.instanceRef;if(mb(n,"options")){var c=yb(t,"options"),l=yb(n,"options");c!==l&&e.options.set(l)}if(mb(n,"point")){var f=yb(n,"point"),h=yb(t,"point"),d=yb(n,"locateOptions");f!==h&&e.moveTo(f,d)}pb(e,u,i),gb(s,a,e)},n.unmountObject=function(e,t){var n=fb(t),r=n.instanceRef,i=n._events;null!==e&&(Object.keys(i).forEach((function(t){return db(e,t,i[t])})),gb(r))},n}(t.Component);_b.defaultProps={width:320,height:240};ab(_b,!0,["panorama.isSupported","panorama.locate","panorama.createPlayer","panorama.Player"]);var xb=function(e){function n(){e.call(this),this.state={instance:null}}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.componentDidMount=function(){var e=n.mountControl(this.props.ymaps.control[this.props.name],this.props);this.setState({instance:e})},n.prototype.componentDidUpdate=function(e){null!==this.state.instance&&n.updateControl(this.state.instance,e,this.props)},n.prototype.componentWillUnmount=function(){n.unmountControl(this.state.instance,this.props)},n.prototype.render=function(){return t.createElement(rb.Provider,{value:this.state.instance},this.props.children)},n.mountControl=function(e,t){var n=fb(t),r=n.instanceRef,i=n.parent,a=n.lazy,o=n._events,u=new e({data:yb(t,"data"),options:yb(t,"options"),state:yb(t,"state"),mapTypes:yb(t,"mapTypes"),lazy:a});if(Object.keys(o).forEach((function(e){return hb(u,e,o[e])})),i&&i.controls&&"function"==typeof i.controls.add)i.controls.add(u);else{if(!i||!i.add||"function"!=typeof i.add)throw new Error("No parent found to mount "+t.name);i.add(u)}return gb(null,r,u),u},n.updateControl=function(e,t,n){var r=fb(n),i=r._events,a=r.instanceRef,o=fb(t),u=o._events,s=o.instanceRef;if(mb(n,"options")){var c=yb(t,"options"),l=yb(n,"options");c!==l&&e.options.set(l)}if(mb(n,"data")){var f=yb(t,"data"),h=yb(n,"data");f!==h&&e.data.set(h)}if(mb(n,"state")){var d=yb(t,"state"),p=yb(n,"state");d!==p&&e.state.set(p)}if(mb(n,"mapTypes")){var v=yb(t,"mapTypes"),m=yb(n,"mapTypes");v!==m&&(e.removeAllMapTypes(),m.forEach((function(t){return e.addMapType(t)})))}pb(e,u,i),gb(s,a,e)},n.unmountControl=function(e,t){var n=fb(t),r=n.instanceRef,i=n.parent,a=n._events;null!==e&&(Object.keys(a).forEach((function(t){return db(e,t,a[t])})),i.controls&&"function"==typeof i.controls.remove?i.controls.remove(e):i.remove&&"function"==typeof i.remove&&i.remove(e),gb(r))},n}(t.Component),Eb=(ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"Button"}))}),!0,["control.Button"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"FullscreenControl"}))}),!0,["control.FullscreenControl"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"GeolocationControl"}))}),!0,["control.GeolocationControl"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"ListBox"}))}),!0,["control.ListBox"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"ListBoxItem"}))}),!0,["control.ListBoxItem"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"RouteButton"}))}),!0,["control.RouteButton"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"RouteEditor"}))}),!0,["control.RouteEditor"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"RoutePanel"}))}),!0,["control.RoutePanel"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"RulerControl"}))}),!0,["control.RulerControl"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"SearchControl"}))}),!0,["control.SearchControl"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"TrafficControl"}))}),!0,["control.TrafficControl"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"TypeSelector"}))}),!0,["control.TypeSelector"])),ib(ab((function(e){return t.createElement(xb,Object.assign({},e,{name:"ZoomControl"}))}),!0,["control.ZoomControl"])),ib(ab(function(e){function n(){e.call(this),this.state={instance:null}}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.componentDidMount=function(){var e=n.mountObject(this.props.ymaps.Clusterer,this.props);this.setState({instance:e})},n.prototype.componentDidUpdate=function(e){null!==this.state.instance&&n.updateObject(this.state.instance,e,this.props)},n.prototype.componentWillUnmount=function(){n.unmountObject(this.state.instance,this.props)},n.prototype.render=function(){return t.createElement(rb.Provider,{value:this.state.instance},this.props.children)},n.mountObject=function(e,t){var n=fb(t),r=n.instanceRef,i=n.parent,a=n._events,o=new e(yb(t,"options"));if(Object.keys(a).forEach((function(e){return hb(o,e,a[e])})),i.geoObjects&&"function"==typeof i.geoObjects.add)i.geoObjects.add(o);else{if(!i.add||"function"!=typeof i.add)throw new Error("No parent found to mount Clusterer");i.add(o)}return gb(null,r,o),o},n.updateObject=function(e,t,n){var r=fb(n),i=r._events,a=r.instanceRef,o=fb(t),u=o._events,s=o.instanceRef;if(mb(n,"options")){var c=yb(t,"options"),l=yb(n,"options");c!==l&&e.options.set(l)}pb(e,u,i),gb(s,a,e)},n.unmountObject=function(e,t){var n=fb(t),r=n.instanceRef,i=n.parent,a=n._events;null!==e&&(Object.keys(a).forEach((function(t){return db(e,t,a[t])})),i.geoObjects&&"function"==typeof i.geoObjects.remove?i.geoObjects.remove(e):i.remove&&"function"==typeof i.remove&&i.remove(e),gb(r))},n}(t.Component),!0,["Clusterer"])),ib(ab(function(e){function t(){e.call(this),this.state={instance:null}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.componentDidMount=function(){var e=t.mountObject(this.props.ymaps.ObjectManager,this.props);this.setState({instance:e})},t.prototype.componentDidUpdate=function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)},t.prototype.componentWillUnmount=function(){t.unmountObject(this.state.instance,this.props)},t.prototype.render=function(){return null},t.mountObject=function(e,t){var n=fb(t),r=n.instanceRef,i=n.parent,a=n._events,o=yb(t,"options",{}),u=yb(t,"features",{}),s=yb(t,"filter",null),c=yb(t,"objects",{}),l=yb(t,"clusters",{}),f=new e(o);if(f.add(u||[]),f.setFilter(s),f.objects.options.set(c),f.clusters.options.set(l),Object.keys(a).forEach((function(e){return hb(f,e,a[e])})),i.geoObjects&&"function"==typeof i.geoObjects.add)i.geoObjects.add(f);else{if(!i.add||"function"!=typeof i.add)throw new Error("No parent found to mount ObjectManager");i.add(f)}return gb(null,r,f),f},t.updateObject=function(e,t,n){var r=fb(n),i=r._events,a=r.instanceRef,o=fb(t),u=o._events,s=o.instanceRef;if(mb(n,"options")){var c=yb(t,"options"),l=yb(n,"options");c!==l&&e.options.set(l)}if(mb(n,"objects")){var f=yb(t,"objects"),h=yb(n,"objects");f!==h&&e.objects.options.set(h)}if(mb(n,"clusters")){var d=yb(t,"clusters"),p=yb(n,"clusters");d!==p&&e.clusters.options.set(p)}if(mb(n,"filter")){var v=yb(t,"filter"),m=yb(n,"filter");v!==m&&e.setFilter(m)}if(mb(n,"features")){var y=yb(t,"features"),g=yb(n,"features");y!==g&&(e.remove(y),e.add(g))}pb(e,u,i),gb(s,a,e)},t.unmountObject=function(e,t){var n=fb(t),r=n.instanceRef,i=n.parent,a=n._events;null!==e&&(Object.keys(a).forEach((function(t){return db(e,t,a[t])})),i.geoObjects&&"function"==typeof i.geoObjects.remove?i.geoObjects.remove(e):i.remove&&"function"==typeof i.remove&&i.remove(e),gb(r))},t}(t.Component),!0,["ObjectManager"])),function(e){function t(){e.call(this),this.state={instance:null}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.componentDidMount=function(){var e=this.props,n=e.name,r=e.ymaps,i=e.dangerZone,a=t.mountObject(i&&"function"==typeof i.modifyConstructor?i.modifyConstructor(r[n]):r[n],this.props);this.setState({instance:a})},t.prototype.componentDidUpdate=function(e){null!==this.state.instance&&t.updateObject(this.state.instance,e,this.props)},t.prototype.componentWillUnmount=function(){t.unmountObject(this.state.instance,this.props)},t.prototype.render=function(){return null},t.mountObject=function(e,t){var n=fb(t),r=n.instanceRef,i=n.parent,a=n._events,o=new e(yb(t,"geometry"),yb(t,"properties"),yb(t,"options"));if(Object.keys(a).forEach((function(e){return hb(o,e,a[e])})),i&&i.geoObjects&&"function"==typeof i.geoObjects.add)i.geoObjects.add(o);else{if(!i||!i.add||"function"!=typeof i.add)throw new Error("No parent found to mount "+t.name);i.add(o)}return gb(null,r,o),o},t.updateObject=function(e,t,n){var r=fb(n),i=r._events,a=r.instanceRef,o=fb(t),u=o._events,s=o.instanceRef;if(mb(n,"geometry")){var c=yb(t,"geometry",{}),l=yb(n,"geometry",{});Array.isArray(l)&&l!==c?Array.isArray(l[0])&&"number"==typeof l[1]?(e.geometry.setCoordinates(l[0]),e.geometry.setRadius(l[1])):e.geometry.setCoordinates(l):"object"==typeof l&&(l.coordinates!==c.coordinates&&e.geometry.setCoordinates(l.coordinates),l.radius!==c.radius&&e.geometry.setRadius(l.radius))}if(mb(n,"properties")){var f=yb(t,"properties"),h=yb(n,"properties");f!==h&&e.properties.set(h)}if(mb(n,"options")){var d=yb(t,"options"),p=yb(n,"options");d!==p&&e.options.set(p)}pb(e,u,i),gb(s,a,e)},t.unmountObject=function(e,t){var n=fb(t),r=n.instanceRef,i=n.parent,a=n._events;null!==e&&(Object.keys(a).forEach((function(t){return db(e,t,a[t])})),i.geoObjects&&"function"==typeof i.geoObjects.remove?i.geoObjects.remove(e):i.remove&&"function"==typeof i.remove&&i.remove(e),gb(r))},t}(t.Component)),Ib={modifyConstructor:function(e){function t(t,n,r){e.call(this,{geometry:t,properties:n},r)}return t.prototype=e.prototype,t}},Sb=(ib(ab((function(e){return t.createElement(Eb,Object.assign({},e,{name:"GeoObject",dangerZone:Ib}))}),!0,["GeoObject"])),ib(ab((function(e){return t.createElement(Eb,Object.assign({},e,{name:"Circle"}))}),!0,["Circle"])),ib(ab((function(e){return t.createElement(Eb,Object.assign({},e,{name:"Placemark"}))}),!0,["Placemark"])),ib(ab((function(e){return t.createElement(Eb,Object.assign({},e,{name:"Polygon"}))}),!0,["Polygon"])),ib(ab((function(e){return t.createElement(Eb,Object.assign({},e,{name:"Polyline"}))}),!0,["Polyline"])),ib(ab((function(e){return t.createElement(Eb,Object.assign({},e,{name:"Rectangle"}))}),!0,["Rectangle"])),n(973)),Cb=n(4339),Tb=n(842),Nb=n(2090),Pb=n(184);function Ab(e){return(0,Pb.jsx)("div",{className:"container d-flex justify-content-center align-items-center",children:(0,Pb.jsxs)("div",{className:"row p-5 ",children:[(0,Pb.jsx)("h3",{className:"text-center mb-5",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}),(0,Pb.jsx)("div",{className:"col-1",children:(0,Pb.jsx)("img",{src:wk,alt:"",className:"img-fluid vetka"})}),(0,Pb.jsx)("div",{className:"col-xl-4 col-12 d-flex align-items-center justify-content-center contacts-box mb-2",children:(0,Pb.jsxs)("div",{className:"p-2",children:[(0,Pb.jsx)("h4",{children:"\u0421\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u043d\u0430\u043c\u0438"}),(0,Pb.jsxs)("p",{children:[(0,Pb.jsx)(Sb.N,{}),"+7 800 555 35 35"]}),(0,Pb.jsxs)("p",{children:[(0,Pb.jsx)(Cb.x,{}),"\u041f\u043d-\u0412\u0441 \u0441 9:00 \u0434\u043e 23:00"]}),(0,Pb.jsx)("p",{children:"\u041c\u044b \u0432 \u0441\u043e\u0446 \u0441\u0435\u0442\u044f\u0445"}),(0,Pb.jsx)(Tb.A,{}),(0,Pb.jsx)(Nb.B,{})]})}),(0,Pb.jsx)("div",{className:"col-xl-7 col-12",children:(0,Pb.jsx)(cb,{children:(0,Pb.jsx)("div",{children:(0,Pb.jsx)(wb,{className:"map",defaultState:{center:[48.7121,44.5259],zoom:12}})})})})]})})}function Rb(e){return(0,Pb.jsx)("div",{className:"footer p-4",children:(0,Pb.jsxs)("div",{className:"row text-center  p-0 ",children:[(0,Pb.jsx)("div",{className:"col-xl-4 col-12",children:(0,Pb.jsx)("p",{className:"p-0 m-0",children:"\u041d\u0410\u0417\u0412\u0410\u041d\u0418\u0415"})}),(0,Pb.jsx)("div",{className:"col-xl-4 col-12",children:(0,Pb.jsx)("p",{className:"p-0 m-0",children:"\u0433.\u0412\u043e\u043b\u0433\u043e\u0433\u0440\u0430\u0434, \u0412\u043e\u043b\u0433\u043e\u0433\u0440\u0430\u0434\u0441\u043a\u0430\u044f \u043e\u0431\u043b."})}),(0,Pb.jsx)("div",{className:"col-xl-4 col-12",children:(0,Pb.jsx)("p",{className:"p-0 m-0",children:"+79880434269"})})]})})}var Ob=n(1413),Db=n(3366);function Lb(e,t){if(null==e)return{};var n,r,i=(0,Db.Z)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Mb=n(1694),jb=n.n(Mb),Fb=["xxl","xl","lg","md","sm","xs"],Ub=t.createContext({prefixes:{},breakpoints:Fb});Ub.Consumer,Ub.Provider;function Vb(e,n){var r=(0,t.useContext)(Ub).prefixes;return e||r[n]||n}function qb(){return(0,t.useContext)(Ub).breakpoints}var Bb=["bsPrefix","bg","pill","text","className","as"],zb=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.bg,i=e.pill,a=e.text,o=e.className,u=e.as,s=void 0===u?"span":u,c=Lb(e,Bb),l=Vb(n,"badge");return(0,Pb.jsx)(s,(0,Ob.Z)((0,Ob.Z)({ref:t},c),{},{className:jb()(o,l,i&&"rounded-pill",a&&"text-".concat(a),r&&"bg-".concat(r))}))}));zb.displayName="Badge",zb.defaultProps={bg:"primary",pill:!1};var Wb=zb,Kb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Hb=t.createContext(null);n(2176);function Gb(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Zb(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Qb(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),u(e)}),[r])]}function Yb(e,t){return Object.keys(t).reduce((function(n,r){var i,a=n,o=a[Gb(r)],u=a[r],s=(0,Db.Z)(a,[Gb(r),r].map(Zb)),c=t[r],l=Qb(u,o,e[c]),f=l[0],h=l[1];return(0,Ig.Z)({},s,((i={})[r]=f,i[c]=h,i))}),e)}function $b(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function Xb(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function Jb(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}$b.__suppressDeprecationWarning=!0,Xb.__suppressDeprecationWarning=!0,Jb.__suppressDeprecationWarning=!0;var ew=/-(.)/g;var tw=["className","bsPrefix","as"],nw=function(e){return e[0].toUpperCase()+function(e){return e.replace(ew,(function(e,t){return t.toUpperCase()}))}(e).slice(1)};function rw(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?nw(e):r,a=n.Component,o=n.defaultProps,u=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,o=t.as,u=void 0===o?a||"div":o,s=Lb(t,tw),c=Vb(i,e);return(0,Pb.jsx)(u,(0,Ob.Z)({ref:n,className:jb()(r,c)},s))}));return u.defaultProps=o,u.displayName=i,u}var iw=["bsPrefix","className","as"],aw=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=Lb(e,iw);n=Vb(n,"navbar-brand");var o=i||(a.href?"a":"span");return(0,Pb.jsx)(o,(0,Ob.Z)((0,Ob.Z)({},a),{},{ref:t,className:jb()(r,n)}))}));aw.displayName="NavbarBrand";var ow=aw;function uw(e){return e&&e.ownerDocument||document}function sw(e,t){return function(e){var t=uw(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var cw=/([A-Z])/g;var lw=/^ms-/;function fw(e){return function(e){return e.replace(cw,"-$1").toLowerCase()}(e).replace(lw,"-ms-")}var hw=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var dw=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(fw(t))||sw(e).getPropertyValue(fw(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!hw.test(e))}(i)?n+=fw(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(fw(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};var pw=!1,vw=t.createContext(null),mw="unmounted",yw="exited",gw="entering",kw="entered",bw="exiting",ww=function(e){var n,i;function a(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=yw,r.appearStatus=gw):i=kw:i=t.unmountOnExit||t.mountOnEnter?mw:yw,r.state={status:i},r.nextCallback=null,r}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,v(n,i),a.getDerivedStateFromProps=function(e,t){return e.in&&t.status===mw?{status:yw}:null};var o=a.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==gw&&n!==kw&&(t=gw):n!==gw&&n!==kw||(t=bw)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===gw?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===yw&&this.setState({status:mw})},o.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,a=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=a[0],u=a[1],s=this.getTimeouts(),c=i?s.appear:s.enter;!e&&!n||pw?this.safeSetState({status:kw},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,u),this.safeSetState({status:gw},(function(){t.props.onEntering(o,u),t.onTransitionEnd(c,(function(){t.safeSetState({status:kw},(function(){t.props.onEntered(o,u)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!pw?(this.props.onExit(i),this.safeSetState({status:bw},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:yw},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:yw},(function(){e.props.onExited(i)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],u=a[1];this.props.addEndListener(o,u)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===mw)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Db.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(vw.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},a}(t.Component);function _w(){}ww.contextType=vw,ww.propTypes={},ww.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_w,onEntering:_w,onEntered:_w,onExit:_w,onExiting:_w,onExited:_w},ww.UNMOUNTED=mw,ww.EXITED=yw,ww.ENTERING=gw,ww.ENTERED=kw,ww.EXITING=bw;var xw=ww,Ew=!("undefined"===typeof window||!window.document||!window.document.createElement),Iw=!1,Sw=!1;try{var Cw={get passive(){return Iw=!0},get once(){return Sw=Iw=!0}};Ew&&(window.addEventListener("test",Cw,Cw),window.removeEventListener("test",Cw,!0))}catch(_k){}var Tw=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Sw){var i=r.once,a=r.capture,o=n;!Sw&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Iw?r:a)}e.addEventListener(t,n,r)};var Nw=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var Pw=function(e,t,n,r){return Tw(e,t,n,r),function(){Nw(e,t,n,r)}};function Aw(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=Pw(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function Rw(e,t,n,r){null==n&&(n=function(e){var t=dw(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Aw(e,n,r),a=Pw(e,"transitionend",t);return function(){i(),a()}}function Ow(e,t){var n=dw(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Dw(e,t){var n=Ow(e,"transitionDuration"),r=Ow(e,"transitionDelay"),i=Rw(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var Lw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function Mw(e){e.offsetHeight}var jw=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Fw=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=jw(e),r=jw(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var Uw,Vw=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],qw=t.forwardRef((function(e,n){var i=e.onEnter,a=e.onEntering,o=e.onEntered,u=e.onExit,s=e.onExiting,c=e.onExited,l=e.addEndListener,f=e.children,h=e.childRef,d=Lb(e,Vw),p=(0,t.useRef)(null),v=Fw(p,h),m=function(e){var t;v((t=e)&&"setState"in t?r.findDOMNode(t):null!=t?t:null)},y=function(e){return function(t){e&&p.current&&e(p.current,t)}},g=(0,t.useCallback)(y(i),[i]),k=(0,t.useCallback)(y(a),[a]),b=(0,t.useCallback)(y(o),[o]),w=(0,t.useCallback)(y(u),[u]),_=(0,t.useCallback)(y(s),[s]),x=(0,t.useCallback)(y(c),[c]),E=(0,t.useCallback)(y(l),[l]);return(0,Pb.jsx)(xw,(0,Ob.Z)((0,Ob.Z)({ref:n},d),{},{onEnter:g,onEntered:b,onEntering:k,onExit:w,onExited:x,onExiting:_,addEndListener:E,nodeRef:p,children:"function"===typeof f?function(e,t){return f(e,(0,Ob.Z)((0,Ob.Z)({},t),{},{ref:m}))}:t.cloneElement(f,{ref:m})}))})),Bw=qw,zw=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],Ww={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Kw(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=Ww[e];return n+parseInt(dw(t,r[0]),10)+parseInt(dw(t,r[1]),10)}var Hw=(Uw={},(0,i.Z)(Uw,yw,"collapse"),(0,i.Z)(Uw,bw,"collapsing"),(0,i.Z)(Uw,gw,"collapsing"),(0,i.Z)(Uw,kw,"collapse show"),Uw),Gw={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:Kw},Zw=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,u=e.onExiting,s=e.className,c=e.children,l=e.dimension,f=void 0===l?"height":l,h=e.getDimensionValue,d=void 0===h?Kw:h,p=Lb(e,zw),v="function"===typeof f?f():f,m=(0,t.useMemo)((function(){return Lw((function(e){e.style[v]="0"}),r)}),[v,r]),y=(0,t.useMemo)((function(){return Lw((function(e){var t="scroll".concat(v[0].toUpperCase()).concat(v.slice(1));e.style[v]="".concat(e[t],"px")}),i)}),[v,i]),g=(0,t.useMemo)((function(){return Lw((function(e){e.style[v]=null}),a)}),[v,a]),k=(0,t.useMemo)((function(){return Lw((function(e){e.style[v]="".concat(d(v,e),"px"),Mw(e)}),o)}),[o,d,v]),b=(0,t.useMemo)((function(){return Lw((function(e){e.style[v]=null}),u)}),[v,u]);return(0,Pb.jsx)(Bw,(0,Ob.Z)((0,Ob.Z)({ref:n,addEndListener:Dw},p),{},{"aria-expanded":p.role?p.in:null,onEnter:m,onEntering:y,onEntered:g,onExit:k,onExiting:b,childRef:c.ref,children:function(e,n){return t.cloneElement(c,(0,Ob.Z)((0,Ob.Z)({},n),{},{className:jb()(s,c.props.className,Hw[e],"width"===v&&"collapse-horizontal")}))}}))}));Zw.defaultProps=Gw;var Qw=Zw,Yw=t.createContext(null);Yw.displayName="NavbarContext";var $w=Yw,Xw=["children","bsPrefix"],Jw=t.forwardRef((function(e,n){var r=e.children,i=e.bsPrefix,a=Lb(e,Xw);i=Vb(i,"navbar-collapse");var o=(0,t.useContext)($w);return(0,Pb.jsx)(Qw,(0,Ob.Z)((0,Ob.Z)({in:!(!o||!o.expanded)},a),{},{children:(0,Pb.jsx)("div",{ref:n,className:i,children:r})}))}));Jw.displayName="NavbarCollapse";var e_=Jw;var t_=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function n_(e){var n=t_(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var r_=["bsPrefix","className","children","label","as","onClick"],i_=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=e.label,u=e.as,s=void 0===u?"button":u,c=e.onClick,l=Lb(e,r_);r=Vb(r,"navbar-toggler");var f=(0,t.useContext)($w)||{},h=f.onToggle,d=f.expanded,p=n_((function(e){c&&c(e),h&&h()}));return"button"===s&&(l.type="button"),(0,Pb.jsx)(s,(0,Ob.Z)((0,Ob.Z)({},l),{},{ref:n,onClick:p,"aria-label":o,className:jb()(i,r,!d&&"collapsed"),children:a||(0,Pb.jsx)("span",{className:"".concat(r,"-icon")})}))}));i_.displayName="NavbarToggle",i_.defaultProps={label:"Toggle navigation"};var a_=i_;function o_(e){void 0===e&&(e=uw());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(_k){return e.body}}function u_(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function s_(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}function c_(e){return"".concat("data-rr-ui-").concat(e)}var l_=c_("modal-open"),f_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,o=t.isRTL,u=void 0!==o&&o;a(this,e),this.handleContainerOverflow=i,this.isRTL=u,this.modals=[],this.ownerDocument=n}return u(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=(0,i.Z)({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(dw(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(l_,""),dw(r,t)}},{key:"reset",value:function(){var e=this;Ie(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(l_),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),h_=f_,d_=(0,t.createContext)(Ew?window:void 0);d_.Provider;function p_(){return(0,t.useContext)(d_)}var v_=function(e,t){var n;return Ew?null==e?(t||uw()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var m_,y_=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function g_(e){var n=p_(),r=e||function(e){return m_||(m_=new h_({ownerDocument:null==e?void 0:e.document})),m_}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return r.add(i.current)},remove:function(){return r.remove(i.current)},isTopModal:function(){return r.isTopModal(i.current)},setDialogRef:(0,t.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((function(e){i.current.backdrop=e}),[])})}var k_=(0,t.forwardRef)((function(e,n){var i=e.show,a=void 0!==i&&i,o=e.role,u=void 0===o?"dialog":o,s=e.className,c=e.style,l=e.children,f=e.backdrop,h=void 0===f||f,p=e.keyboard,v=void 0===p||p,m=e.onBackdropClick,y=e.onEscapeKeyDown,g=e.transition,k=e.backdropTransition,b=e.autoFocus,w=void 0===b||b,_=e.enforceFocus,x=void 0===_||_,E=e.restoreFocus,I=void 0===E||E,S=e.restoreFocusOptions,C=e.renderDialog,T=e.renderBackdrop,N=void 0===T?function(e){return(0,Pb.jsx)("div",Object.assign({},e))}:T,P=e.manager,A=e.container,R=e.onShow,O=e.onHide,D=void 0===O?function(){}:O,L=e.onExit,M=e.onExited,j=e.onExiting,F=e.onEnter,U=e.onEntering,V=e.onEntered,q=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,y_),B=function(e,n){var r=p_(),i=d((0,t.useState)((function(){return v_(e,null==r?void 0:r.document)})),2),a=i[0],o=i[1];if(!a){var u=v_(e);u&&o(u)}return(0,t.useEffect)((function(){n&&a&&n(a)}),[n,a]),(0,t.useEffect)((function(){var t=v_(e);t!==a&&o(t)}),[e,a]),a}(A),z=g_(P),W=function(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),n.current}(),K=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}(a),H=d((0,t.useState)(!a),2),G=H[0],Z=H[1],Q=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return z}),[z]),Ew&&!K&&a&&(Q.current=o_()),g||a||G?a&&G&&Z(!1):Z(!0);var Y=n_((function(){if(z.add(),ne.current=Pw(document,"keydown",ee),te.current=Pw(document,"focus",(function(){return setTimeout(X)}),!0),R&&R(),w){var e=o_(document);z.dialog&&e&&!u_(z.dialog,e)&&(Q.current=e,z.dialog.focus())}})),$=n_((function(){var e;(z.remove(),null==ne.current||ne.current(),null==te.current||te.current(),I)&&(null==(e=Q.current)||null==e.focus||e.focus(S),Q.current=null)}));(0,t.useEffect)((function(){a&&B&&Y()}),[a,B,Y]),(0,t.useEffect)((function(){G&&$()}),[G,$]),s_((function(){$()}));var X=n_((function(){if(x&&W()&&z.isTopModal()){var e=o_();z.dialog&&e&&!u_(z.dialog,e)&&z.dialog.focus()}})),J=n_((function(e){e.target===e.currentTarget&&(null==m||m(e),!0===h&&D())})),ee=n_((function(e){v&&27===e.keyCode&&z.isTopModal()&&(null==y||y(e),e.defaultPrevented||D())})),te=(0,t.useRef)(),ne=(0,t.useRef)(),re=g;if(!B||!(a||re&&!G))return null;var ie=Object.assign({role:u,ref:z.setDialogRef,"aria-modal":"dialog"===u||void 0},q,{style:c,className:s,tabIndex:-1}),ae=C?C(ie):(0,Pb.jsx)("div",Object.assign({},ie,{children:t.cloneElement(l,{role:"document"})}));re&&(ae=(0,Pb.jsx)(re,{appear:!0,unmountOnExit:!0,in:!!a,onExit:L,onExiting:j,onExited:function(){Z(!0),null==M||M.apply(void 0,arguments)},onEnter:F,onEntering:U,onEntered:V,children:ae}));var oe=null;if(h){var ue=k;oe=N({ref:z.setBackdropRef,onClick:J}),ue&&(oe=(0,Pb.jsx)(ue,{appear:!0,in:!!a,children:oe}))}return(0,Pb.jsx)(Pb.Fragment,{children:r.createPortal((0,Pb.jsxs)(Pb.Fragment,{children:[oe,ae]}),B)})}));k_.displayName="Modal";var b_,w_=Object.assign(k_,{Manager:h_}),__=["className","children","transitionClasses"],x_=(b_={},(0,i.Z)(b_,gw,"show"),(0,i.Z)(b_,kw,"show"),b_),E_=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,u=Lb(e,__),s=(0,t.useCallback)((function(e,t){Mw(e),null==u.onEnter||u.onEnter(e,t)}),[u]);return(0,Pb.jsx)(Bw,(0,Ob.Z)((0,Ob.Z)({ref:n,addEndListener:Dw},u),{},{onEnter:s,childRef:i.ref,children:function(e,n){return t.cloneElement(i,(0,Ob.Z)((0,Ob.Z)({},n),{},{className:jb()("fade",r,i.props.className,x_[e],o[e])}))}}))}));E_.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},E_.displayName="Fade";var I_,S_=E_,C_=rw("offcanvas-body"),T_=["bsPrefix","className","children"],N_=(I_={},(0,i.Z)(I_,gw,"show"),(0,i.Z)(I_,kw,"show"),I_),P_=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=Lb(e,T_);return r=Vb(r,"offcanvas"),(0,Pb.jsx)(Bw,(0,Ob.Z)((0,Ob.Z)({ref:n,addEndListener:Dw},o),{},{childRef:a.ref,children:function(e,n){return t.cloneElement(a,(0,Ob.Z)((0,Ob.Z)({},n),{},{className:jb()(i,a.props.className,(e===gw||e===bw)&&"".concat(r,"-toggling"),N_[e])}))}}))}));P_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},P_.displayName="OffcanvasToggling";var A_=P_,R_=t.createContext({onHide:function(){}}),O_=n(2007),D_=n.n(O_),L_=["className","variant"],M_={"aria-label":D_().string,onClick:D_().func,variant:D_().oneOf(["white"])},j_=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=Lb(e,L_);return(0,Pb.jsx)("button",(0,Ob.Z)({ref:t,type:"button",className:jb()("btn-close",r&&"btn-close-".concat(r),n)},i))}));j_.displayName="CloseButton",j_.propTypes=M_,j_.defaultProps={"aria-label":"Close"};var F_=j_,U_=["closeLabel","closeVariant","closeButton","onHide","children"],V_=t.forwardRef((function(e,n){var r=e.closeLabel,i=e.closeVariant,a=e.closeButton,o=e.onHide,u=e.children,s=Lb(e,U_),c=(0,t.useContext)(R_),l=n_((function(){null==c||c.onHide(),null==o||o()}));return(0,Pb.jsxs)("div",(0,Ob.Z)((0,Ob.Z)({ref:n},s),{},{children:[u,a&&(0,Pb.jsx)(F_,{"aria-label":r,variant:i,onClick:l})]}))}));V_.defaultProps={closeLabel:"Close",closeButton:!1};var q_=V_,B_=["bsPrefix","className"],z_=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=Lb(e,B_);return n=Vb(n,"offcanvas-header"),(0,Pb.jsx)(q_,(0,Ob.Z)((0,Ob.Z)({ref:t},i),{},{className:jb()(r,n)}))}));z_.displayName="OffcanvasHeader",z_.defaultProps={closeLabel:"Close",closeButton:!1};var W_,K_=z_,H_=(W_="h5",t.forwardRef((function(e,t){return(0,Pb.jsx)("div",(0,Ob.Z)((0,Ob.Z)({},e),{},{ref:t,className:jb()(e.className,W_)}))}))),G_=rw("offcanvas-title",{Component:H_});var Z_=Function.prototype.bind.call(Function.prototype.call,[].slice);function Q_(e,t){return Z_(e.querySelectorAll(t))}function Y_(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var $_,X_=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",J_=".sticky-top",ex=".navbar-toggler",tx=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,dw(t,(0,i.Z)({},e,"".concat(parseFloat(dw(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],dw(t,(0,i.Z)({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;jt(y(n.prototype),"setContainerStyle",this).call(this,e);var r=this.getElement();if(function(e,t){e.classList?e.classList.add(t):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}(r,"modal-open"),e.scrollBarWidth){var i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Q_(r,X_).forEach((function(n){return t.adjustAndStore(i,n,e.scrollBarWidth)})),Q_(r,J_).forEach((function(n){return t.adjustAndStore(a,n,-e.scrollBarWidth)})),Q_(r,ex).forEach((function(n){return t.adjustAndStore(a,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;jt(y(n.prototype),"removeContainerStyle",this).call(this,e);var r=this.getElement();!function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=Y_(e.className,t):e.setAttribute("class",Y_(e.className&&e.className.baseVal||"",t))}(r,"modal-open");var i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Q_(r,X_).forEach((function(e){return t.restore(i,e)})),Q_(r,J_).forEach((function(e){return t.restore(a,e)})),Q_(r,ex).forEach((function(e){return t.restore(a,e)}))}}]),n}(h_);var nx=tx,rx=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function ix(e){return(0,Pb.jsx)(A_,(0,Ob.Z)({},e))}function ax(e){return(0,Pb.jsx)(S_,(0,Ob.Z)({},e))}var ox=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=e["aria-labelledby"],u=e.placement,s=e.show,c=e.backdrop,l=e.keyboard,f=e.scroll,h=e.onEscapeKeyDown,d=e.onShow,p=e.onHide,v=e.container,m=e.autoFocus,y=e.enforceFocus,g=e.restoreFocus,k=e.restoreFocusOptions,b=e.onEntered,w=e.onExit,_=e.onExiting,x=e.onEnter,E=e.onEntering,I=e.onExited,S=e.backdropClassName,C=e.manager,T=Lb(e,rx),N=(0,t.useRef)();r=Vb(r,"offcanvas");var P=((0,t.useContext)($w)||{}).onToggle,A=n_((function(){null==P||P(),null==p||p()})),R=(0,t.useMemo)((function(){return{onHide:A}}),[A]);var O=(0,t.useCallback)((function(e){return(0,Pb.jsx)("div",(0,Ob.Z)((0,Ob.Z)({},e),{},{className:jb()("".concat(r,"-backdrop"),S)}))}),[S,r]);return(0,Pb.jsx)(R_.Provider,{value:R,children:(0,Pb.jsx)(w_,{show:s,ref:n,backdrop:c,container:v,keyboard:l,autoFocus:m,enforceFocus:y&&!f,restoreFocus:g,restoreFocusOptions:k,onEscapeKeyDown:h,onShow:d,onHide:A,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==x||x.apply(void 0,[e].concat(n))},onEntering:E,onEntered:b,onExit:w,onExiting:_,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==I||I.apply(void 0,n)},manager:C||(f?(N.current||(N.current=new nx({handleContainerOverflow:!1})),N.current):function(e){return $_||($_=new tx(e)),$_}()),transition:ix,backdropTransition:ax,renderBackdrop:O,renderDialog:function(e){return(0,Pb.jsx)("div",(0,Ob.Z)((0,Ob.Z)((0,Ob.Z)({role:"dialog"},e),T),{},{className:jb()(i,r,"".concat(r,"-").concat(u)),"aria-labelledby":o,children:a}))}})})}));ox.displayName="Offcanvas",ox.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var ux=Object.assign(ox,{Body:C_,Header:K_,Title:G_}),sx=t.forwardRef((function(e,n){var r=(0,t.useContext)($w);return(0,Pb.jsx)(ux,(0,Ob.Z)({ref:n,show:!(null==r||!r.expanded)},e))}));sx.displayName="NavbarOffcanvas";var cx=sx,lx=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],fx=rw("navbar-text",{Component:"span"}),hx=t.forwardRef((function(e,n){var r=Yb(e,{expanded:"onToggle"}),i=r.bsPrefix,a=r.expand,o=r.variant,u=r.bg,s=r.fixed,c=r.sticky,l=r.className,f=r.as,h=void 0===f?"nav":f,d=r.expanded,p=r.onToggle,v=r.onSelect,m=r.collapseOnSelect,y=Lb(r,lx),g=Vb(i,"navbar"),k=(0,t.useCallback)((function(){null==v||v.apply(void 0,arguments),m&&d&&(null==p||p(!1))}),[v,m,d,p]);void 0===y.role&&"nav"!==h&&(y.role="navigation");var b="".concat(g,"-expand");"string"===typeof a&&(b="".concat(b,"-").concat(a));var w=(0,t.useMemo)((function(){return{onToggle:function(){return null==p?void 0:p(!d)},bsPrefix:g,expanded:!!d}}),[g,d,p]);return(0,Pb.jsx)($w.Provider,{value:w,children:(0,Pb.jsx)(Hb.Provider,{value:k,children:(0,Pb.jsx)(h,(0,Ob.Z)((0,Ob.Z)({ref:n},y),{},{className:jb()(l,g,a&&b,o&&"".concat(g,"-").concat(o),u&&"bg-".concat(u),c&&"sticky-".concat(c),s&&"fixed-".concat(s))}))})})}));hx.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},hx.displayName="Navbar";var dx=Object.assign(hx,{Brand:ow,Collapse:e_,Offcanvas:cx,Text:fx,Toggle:a_}),px=["bsPrefix","fluid","as","className"],vx=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,a=void 0===i?"div":i,o=e.className,u=Lb(e,px),s=Vb(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,Pb.jsx)(a,(0,Ob.Z)((0,Ob.Z)({ref:t},u),{},{className:jb()(o,r?"".concat(s).concat(c):s)}))}));vx.displayName="Container",vx.defaultProps={fluid:!1};var mx=vx;n(3573);var yx=t.createContext(null);yx.displayName="NavContext";var gx=yx,kx=t.createContext(null),bx=["as","disabled"];function wx(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,u=e.tabIndex,s=void 0===u?0:u,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:s,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},l]}var _x=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,bx),a=d(wx(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,Pb.jsx)(u,Object.assign({},i,o,{ref:t}))}));_x.displayName="Button";var xx=_x,Ex=["as","active","eventKey"];function Ix(e){var n=e.key,r=e.onClick,i=e.active,a=e.id,o=e.role,u=e.disabled,s=(0,t.useContext)(Hb),c=(0,t.useContext)(gx),l=(0,t.useContext)(kx),f=i,h={role:o};if(c){o||"tablist"!==c.role||(h.role="tab");var d=c.getControllerId(null!=n?n:null),p=c.getControlledId(null!=n?n:null);h[c_("event-key")]=n,h.id=d||a,!(f=null==i&&null!=n?c.activeKey===n:i)&&(null!=l&&l.unmountOnExit||null!=l&&l.mountOnEnter)||(h["aria-controls"]=p)}return"tab"===h.role&&(u&&(h.tabIndex=-1,h["aria-disabled"]=!0),f?h["aria-selected"]=f:h.tabIndex=-1),h.onClick=n_((function(e){u||(null==r||r(e),null!=n&&s&&!e.isPropagationStopped()&&s(n,e))})),[h,{isActive:f}]}var Sx=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?xx:n,i=e.active,a=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Ex),u=d(Ix(Object.assign({key:Kb(a,o.href),active:i},o)),2),s=u[0],c=u[1];return s[c_("active")]=c.isActive,(0,Pb.jsx)(r,Object.assign({},o,s,{ref:t}))}));Sx.displayName="NavItem";var Cx=Sx,Tx=["as","onSelect","activeKey","role","onKeyDown"];var Nx=function(){},Px=c_("event-key"),Ax=t.forwardRef((function(e,n){var r,i,a=e.as,o=void 0===a?"div":a,u=e.onSelect,s=e.activeKey,c=e.role,l=e.onKeyDown,f=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Tx),h=(0,t.useReducer)((function(e){return!e}),!1)[1],d=(0,t.useRef)(!1),p=(0,t.useContext)(Hb),v=(0,t.useContext)(kx);v&&(c=c||"tablist",s=v.activeKey,r=v.getControlledId,i=v.getControllerId);var m=(0,t.useRef)(null),y=function(e){var t=m.current;if(!t)return null;var n=Q_(t,"[".concat(Px,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;var i=n.indexOf(r);if(-1===i)return null;var a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},g=function(e,t){null!=e&&(null==u||u(e,t),null==p||p(e,t))};(0,t.useEffect)((function(){if(m.current&&d.current){var e=m.current.querySelector("[".concat(Px,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));var k=Fw(n,m);return(0,Pb.jsx)(Hb.Provider,{value:g,children:(0,Pb.jsx)(gx.Provider,{value:{role:c,activeKey:Kb(s),getControlledId:r||Nx,getControllerId:i||Nx},children:(0,Pb.jsx)(o,Object.assign({},f,{onKeyDown:function(e){if(null==l||l(e),v){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=y(-1);break;case"ArrowRight":case"ArrowDown":t=y(1);break;default:return}if(t)e.preventDefault(),g(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,h()}},ref:k,role:c}))})})}));Ax.displayName="Nav";var Rx=Object.assign(Ax,{Item:Cx}),Ox=t.createContext(null);Ox.displayName="CardHeaderContext";var Dx=Ox,Lx=rw("nav-item");var Mx="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||Mx?t.useLayoutEffect:t.useEffect,new WeakMap;var jx=["onKeyDown"];var Fx=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,jx),a=d(wx(Object.assign({tagName:"a"},i)),1)[0],o=n_((function(e){a.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,Pb.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,Pb.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));Fx.displayName="Anchor";var Ux=Fx,Vx=["bsPrefix","className","as","active","eventKey"],qx=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?Ux:i,o=e.active,u=e.eventKey,s=Lb(e,Vx);n=Vb(n,"nav-link");var c=d(Ix((0,Ob.Z)({key:Kb(u,s.href),active:o},s)),2),l=c[0],f=c[1];return(0,Pb.jsx)(a,(0,Ob.Z)((0,Ob.Z)((0,Ob.Z)({},s),l),{},{ref:t,className:jb()(r,n,s.disabled&&"disabled",f.isActive&&"active")}))}));qx.displayName="NavLink",qx.defaultProps={disabled:!1};var Bx=qx,zx=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],Wx=t.forwardRef((function(e,n){var r,a,o,u=Yb(e,{activeKey:"onSelect"}),s=u.as,c=void 0===s?"div":s,l=u.bsPrefix,f=u.variant,h=u.fill,d=u.justify,p=u.navbar,v=u.navbarScroll,m=u.className,y=u.activeKey,g=Lb(u,zx),k=Vb(l,"nav"),b=!1,w=(0,t.useContext)($w),_=(0,t.useContext)(Dx);return w?(a=w.bsPrefix,b=null==p||p):_&&(o=_.cardHeaderBsPrefix),(0,Pb.jsx)(Rx,(0,Ob.Z)({as:c,ref:n,activeKey:y,className:jb()(m,(r={},(0,i.Z)(r,k,!b),(0,i.Z)(r,"".concat(a,"-nav"),b),(0,i.Z)(r,"".concat(a,"-nav-scroll"),b&&v),(0,i.Z)(r,"".concat(o,"-").concat(f),!!o),(0,i.Z)(r,"".concat(k,"-").concat(f),!!f),(0,i.Z)(r,"".concat(k,"-fill"),h),(0,i.Z)(r,"".concat(k,"-justified"),d),r))},g))}));Wx.displayName="Nav",Wx.defaultProps={justify:!1,fill:!1};var Kx=Object.assign(Wx,{Item:Lx,Link:Bx}),Hx="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAAAlCAYAAACqL3wuAAAACXBIWXMAAAsSAAALEgHS3X78AAAE1klEQVRoge0bW47TQMxGfPBHEAfYIvG/5R+J7AnIHgARTkA5AeUG4QSUE1Bu0J6A7h9/W26QnsDIi115vTMhmaZbbRtLI2UmjsePeXjGDhIR9AmIOAaAKQC8BYANAOREtOq1kxOEJEOJMQoAWBDRwrVz/alBXxJRfuqK3hVSDVUbY/wEgFKe185IN++JqDikkMcAjxNlsMbgJa4KtCvMT1KzPUPqjOI957wFKu9RIyKqDyzng4dHiQJMW+CoIzEYqQdIMhQR8XJ2CQB/IihL6+0hYoaIJSIOe1Ui7Oyei/J/SJUN9w4AnosxQ57gq8FdTwA2VNciXl6p3wHAhEmJy17LMxtjJJ4gmTJO6fPUS4qRZkbpbIyMlzmp584wtTPS+tQVnlpS9qjMPJ8HHAtbt+76RmbcAAmQYii/v5S2QkQ84y7kIKzwRdz0YW9KhBRDzVz9ziFXrpVKcS6+EtF0cNN3g86GIiLegz60wKtlvxoM1AOknqNmMWMh4hQRCRHXB5btqCD1ZkKNtXTNrwHgszyfnbpy+4RkQwksXP2lef56SMGODXY1VAw+EdHk1JXbJ+zDUFdEVLXAG6AD7MNQg5e3B9jX0jdAz5Aa4VWwzgTfPvwGgCembSZnqQF2hN6zkAbYHyyk5DIDVrLPcFshhhybd3prXtqbYMFRWmP3bmRmFwlOZfHkysnyMtcbeddHJTjKI18CZ4Fb/kzCL3PBXcnzKMSnoVsKzdW/42IjvSoWthE6KvNanosGneVOx2srGzSEJLTMI+1cpqbT3LR75cZo1yqoMBXCuaHlYl2+rJ3SMyNwqM8Qn4uQHlrS8wNzFsElF8fLG/C2oSRvKBVYR4JXykpGlH1XNxlKBLR05qLwiWmfRQy1lhHLM2DsFDMTOnYQWV7mAb7LgLJDhtKy0IHo6FUia2lWiFqiA14Olbd09POIodbCa+XiegWEBDVLwZZAw4gJdWpngbZNAtO+MHUr4Mzh2nd++agC/dYhvgMGiRnKL+sxvkb+G7s9BJZi5asK6MzruLQrl/X6fP4dM/6x4d37FrumDRTeCo9IbCoWn/L9aabtH83FMFAZPnOXHBo6eHPbm//wve0DEW2W7xgR/bXZRvrjd5lJo8sCuF6eYJ+m/k0r1lDejbYHV0+kq8u96YIcMEZbyBzf48B3oTYLy4bYWVMuo6d71nAxHaJzS2bmARG39X0feHVEPfVheEQccWlJR2femWQ1WbB0FxIvu5J6YfGlvxK6gZ3134kII0VzGLXvqwZc7MjDvRmKYSqxqrGkmLECrrmtBR072uaIOBE6lcnR2Jj+bIr1L87sleze667hF1G+hnPec5+6HLIcHHfjnMWAzOeIONdcRv5G+Ei+B91uWG4zC7rbDY5DzD0vG9xq+/3WYWg4l8RohFzkGP4qwqc6E4vImSzmnoccsSb33HqIUR07J2a697s+CTDmkuxi9yoepZf2t50WdC5dsHIjdO/8gyX4z+SbL1IuAjkfbfquRYbv7tVG2kYOv5R4nN+bldfO12r3foXEnlEfiS7/oyNLTOWV4n5weJGktH97Xd1GDt2HU/q5Ree+DXUfIPuepgQsjUNQmD3qQf23dayGKsShiDkOVw/tT5Ojvj0X74wLOwO8BN0csnc4px0GAOAvU9VOaCuWjzAAAAAASUVORK5CYII=",Gx=n(6213);function Zx(){return Zx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zx.apply(this,arguments)}function Qx(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Yx=["onClick","reloadDocument","replace","state","target","to"];function $x(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,Vg({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(Bg,(function(){if(a)f.call(a),a=null;else{var e=Lg.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){y(-1*o)}},y(o))}}else m(e)}}));var o=Lg.Pop,u=i(),s=u[0],c=u[1],l=Wg(),f=Wg();function h(e){return"string"===typeof e?e:Hg(e)}function d(e,t){return void 0===t&&(t=null),Vg((0,Ig.Z)({pathname:c.pathname,hash:"",search:""},"string"===typeof e?Gg(e):e,{state:t,key:Kg()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function v(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function y(e){r.go(e)}null==s&&(s=0,r.replaceState((0,Ig.Z)({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:h,push:function e(t,i){var a=Lg.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(TO){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=Lg.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),m(i)}},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(qg,zg),function(){t(),f.length||n.removeEventListener(qg,zg)}}};return g}({window:i}));var o=a.current,u=d((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(gk,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}var Xx=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=Qx(e,Yx),f=fk(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=pk(),s=dk(),c=vk(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||Hg(s)===Hg(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",Zx({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));var Jx=n(2353),eE=[{link:"",name:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},{link:"",name:"\u0414\u043b\u044f \u0431\u0438\u0437\u043d\u0435\u0441\u0430"},{link:"",name:"\u041c\u0438\u043a\u0440\u043e\u0437\u0435\u043b\u0435\u043d\u044c"},{link:"",name:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"}];function tE(){var e=Dg((function(e){return e.auth.user})),t=Dg((function(e){return e.cart.order})),n=0!==t.length?(0,Pb.jsx)(Wb,{bg:"dark",children:t.length}):(0,Pb.jsx)(Pb.Fragment,{children:" "});return(0,Pb.jsx)(dx,{collapseOnSelect:!0,expand:"lg",className:"navigation",children:(0,Pb.jsxs)(mx,{children:[(0,Pb.jsx)(dx.Brand,{as:Xx,to:"/",children:(0,Pb.jsx)("img",{src:Hx,alt:""})}),(0,Pb.jsx)(dx.Toggle,{"aria-controls":"responsive-navbar-nav"}),(0,Pb.jsxs)(dx.Collapse,{id:"responsive-navbar-nav ",className:"text-end",children:[(0,Pb.jsx)(Kx,{className:"me-auto "}),(0,Pb.jsxs)(Kx,{children:[eE.map((function(e){return(0,Pb.jsx)(Kx.Link,{as:Xx,href:"#",to:e.link,children:e.name})})),(0,Pb.jsx)(Kx.Link,{as:Xx,href:"#",to:e?"/profile":"/auth",children:(0,Pb.jsx)(Jx.M,{style:{fontSize:"20px"}})}),(0,Pb.jsxs)(Kx.Link,{as:Xx,href:"#",to:"/cart",children:[(0,Pb.jsx)(Gx.b,{style:{fontSize:"20px"}}),n]})]})]})]})})}var nE=n.p+"static/media/35.36486222398dfe5a3490.png";function rE(e){return(0,Pb.jsx)("div",{className:"container-fluid box-header  d-flex align-items-center justify-content-center",children:(0,Pb.jsxs)("div",{className:"row",children:[(0,Pb.jsx)("div",{className:"col-xl-2 col-12 col-md-2 col-sm-12 "}),(0,Pb.jsx)("div",{className:"col-xl-8 col-12 col-md-8 col-sm-12",children:(0,Pb.jsx)("img",{src:nE,alt:"",className:"img-fluid"})}),(0,Pb.jsx)("div",{className:"col-xl-2 col-12 col-md-2 col-sm-12"})]})})}var iE=n.p+"static/media/134.f8279951a13505596005.jpg";function aE(e){return(0,Pb.jsxs)("div",{className:"row  m-0 pb-5 ",children:[(0,Pb.jsx)("div",{className:"col-xl-6 col-sm-12 col-lg-12 col-12 m-0 p-0",children:(0,Pb.jsx)("img",{src:iE,alt:"",className:"img-fluid"})}),(0,Pb.jsx)("div",{className:"col-xl-6 col-sm-12 col-lg-12 col-12 m-0 p-0 d-flex align-items-center justify-content-center present-text",children:(0,Pb.jsxs)("div",{className:"p-5",children:[(0,Pb.jsxs)("h3",{className:"present-title",children:[(0,Pb.jsx)("span",{className:"bg-bukva ",children:"\u041e"}),"\u043d\u0430\u0448\u0435\u0439 \u0444\u0435\u0440\u043c\u0435"]}),(0,Pb.jsxs)("p",{className:"present-text",children:["\u041d\u0430\u0448\u0430 \u0444\u0435\u0440\u043c\u0430 \u0438\u043c\u0435\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u044c ",(0,Pb.jsx)("br",{})," \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u0440\u0442\u0430 \u043c\u0438\u043a\u0440\u043e\u0437\u0435\u043b\u0435\u043d\u0438 \u043d\u0430\u0438\u0432\u044b\u0441\u0448\u0435\u0433\u043e \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0430. ",(0,Pb.jsx)("br",{})," \u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u043b\u0430\u043c\u043f\u044b \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043d\u0430\u043c \u0432 \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u0441\u0440\u043e\u043a ",(0,Pb.jsx)("br",{})," \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0433\u043e\u0442\u043e\u0432\u0443\u044e \u0437\u0435\u043b\u0435\u043d\u044c \u0438 \u0447\u0442\u043e \u0441\u0430\u043c\u043e\u0435 \u0433\u043b\u0430\u0432\u043d\u043e\u0435 ",(0,Pb.jsx)("br",{}),"  \u043c\u044b \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u0445 \u0434\u043e\u0431\u0430\u0432\u043e\u043a. ",(0,Pb.jsx)("br",{})," \u041f\u043e\u0447\u0432\u0430 \u0442\u0435\u043b\u043e \u0438 \u0441\u0432\u0435\u0442 \u043d\u0430\u0448 \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u043a\u0440\u0435\u0442."]})]})})]})}var oE=n.p+"static/media/pngwing.com.36c518741c86daf08d62.png";var uE=function(e){var t=e.name,n=e.id,r=e.img,i=e.gram,a=e.price,o=e.cell,u=e.addCart;return e.cart,Pg(),(0,Pb.jsx)("div",{className:"col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 text-center mb-5",children:(0,Pb.jsx)(Xx,{to:"/individualProducts/".concat(n),children:(0,Pb.jsxs)("div",{className:" products-card",children:[(0,Pb.jsx)("img",{src:oE,className:"img-fluid p-3",alt:""}),(0,Pb.jsx)("p",{className:"products-name",children:t}),(0,Pb.jsx)("p",{className:"products-type",children:"\u043c\u0438\u043a\u0440\u043e\u0437\u0435\u043b\u0435\u043d\u044c"}),(0,Pb.jsxs)("p",{className:"products-type",children:[i," \u0433 / ",a," \u0440"]}),(0,Pb.jsx)("div",{className:"buy-products p-3",onClick:function(){return u(t,n,r,i,a,o)},children:"\u041a\u0443\u043f\u0438\u0442\u044c"})]})})})},sE="CART.ADD_CART",cE="CART.ADD_QTY",lE="CART.DEC_QTY",fE="CART.DEL_CART",hE=function(e,t,n,r,i,a){return{type:sE,payload:{name:e,id:t,img:n,gram:r,price:i,cell:a}}},dE=function(e){return{type:fE,payload:{id:e}}},pE=function(e,t){return{type:cE,payload:{id:e,qty:t}}},vE=function(e,t){return{type:lE,payload:{id:e,value:t}}},mE={order:[],orderTotalPrice:0};function yE(e){var t=Dg((function(e){return e.products.products})),n=Pg(),r=Dg((function(e){return e.cart.order})),i=function(e,t,r,i,a,o){return n(hE(e,t,r,i,a,o))},a=t.map((function(e){return(0,Pb.jsx)(uE,(0,Ob.Z)((0,Ob.Z)({},e),{},{cart:r,addCart:i}))})).slice(0,6);return(0,Pb.jsxs)("div",{className:"mt-5",children:[(0,Pb.jsx)("h3",{className:"text-center pb-4 shop-title ",children:"\u0412\u044b\u0431\u0435\u0440\u0438 \u0441\u0432\u043e\u0438 \u0432\u0438\u0442\u0430\u043c\u0438\u043d\u044b"}),(0,Pb.jsxs)("div",{className:"row m-0 p-0 d-flex justify-content-center align-items-center",children:[(0,Pb.jsx)("div",{className:"col-12 col-xl-2 col-sm-2 col-lg-2 "}),(0,Pb.jsx)("div",{className:"col-12 col-xl-8 col-sm-8 col-lg-8",children:(0,Pb.jsx)("div",{className:"row ",children:a})}),(0,Pb.jsx)("div",{className:"col-12 col-xl-2 col-sm-2 col-lg-2"})]}),(0,Pb.jsx)("div",{className:"d-flex align-items-center justify-content-center  w-100",children:(0,Pb.jsx)("p",{className:"more",children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0449\u0435..."})})]})}var gE=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],kE=(D_().string,D_().bool,D_().bool,D_().bool,D_().bool,t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.fluid,a=e.rounded,o=e.roundedCircle,u=e.thumbnail,s=Lb(e,gE);return n=Vb(n,"img"),(0,Pb.jsx)("img",(0,Ob.Z)((0,Ob.Z)({ref:t},s),{},{className:jb()(r,i&&"".concat(n,"-fluid"),a&&"rounded",o&&"rounded-circle",u&&"".concat(n,"-thumbnail"))}))})));kE.displayName="Image",kE.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};var bE=kE,wE=n.p+"static/media/223.1119273058787231bcd7.jpg",_E=n.p+"static/media/email-support-services.aa97efeb3d9936454b7e.jpg",xE=n.p+"static/media/online-shopping1.060214a79cccfbc3a3f2.jpg";function EE(e){return(0,Pb.jsx)("div",{className:"container-fluid work pt-5 pb-5",children:(0,Pb.jsxs)("div",{className:"container text-center",children:[(0,Pb.jsx)("h3",{className:"p-5 work-title",children:"\u041a\u0430\u043a \u043c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c"}),(0,Pb.jsxs)("div",{className:"row pb-5",children:[(0,Pb.jsxs)("div",{className:"col-xl-4",children:[(0,Pb.jsx)(bE,{roundedCircle:!0,src:xE,alt:"",className:"img-fluid img-work"}),(0,Pb.jsxs)("div",{className:"w-50 float-end ",children:[(0,Pb.jsx)("p",{className:"pt-2 work-card_title text-end work-line",children:"\u0412\u044b \u0434\u0435\u043b\u0430\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0437"}),(0,Pb.jsx)("p",{className:"work-card_text text-end",children:"\u0412\u044b \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442\u0435 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0432\u0448\u0438\u0435\u0441\u044f \u0432\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u0438, \u043e\u043f\u043b\u0430\u0447\u0438\u0432\u0430\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0437."})]})]}),(0,Pb.jsxs)("div",{className:"col-xl-4",children:[(0,Pb.jsx)(bE,{roundedCircle:!0,src:_E,alt:"",className:"img-fluid img-work"}),(0,Pb.jsxs)("div",{className:"w-50 float-end ",children:[(0,Pb.jsx)("p",{className:"pt-2 work-card_title text-end work-line",children:"\u0423\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u0435 \u0434\u0435\u0442\u0430\u043b\u0435\u0439"}),(0,Pb.jsx)("p",{className:"work-card_text text-end",children:"\u041d\u0430\u0448 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \u0441\u0432\u044f\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0438 30 \u043c\u0438\u043d."})]})]}),(0,Pb.jsxs)("div",{className:"col-xl-4",children:[(0,Pb.jsx)(bE,{roundedCircle:!0,src:wE,alt:"",className:"img-fluid img-work"}),(0,Pb.jsxs)("div",{className:"w-50 float-end ",children:[(0,Pb.jsx)("p",{className:"pt-2 work-card_title text-end work-line ",children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),(0,Pb.jsx)("p",{className:"work-card_text text-end",children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0438 1-3 \u0434\u043d\u0435\u0439."})]})]})]})]})})}var IE=n.p+"static/media/can-you-freeze-microgreens1.cb7080fbe15af36663da.jpg";function SE(e){return(0,Pb.jsx)("div",{className:"container-fluid ",children:(0,Pb.jsxs)("div",{className:"row ",children:[(0,Pb.jsx)("div",{className:"col-xl-5 col-md-12 col-lg-12 p-0 m-0",children:(0,Pb.jsx)("img",{src:IE,className:"img-fluid",alt:""})}),(0,Pb.jsxs)("div",{className:"col-xl-6 col-md-12 col-lg-12 pl-5 pr-3 text-center pt-5",children:[(0,Pb.jsxs)("h3",{className:"why-title",children:["\u041f\u043e\u0447\u0435\u043c\u0443 \u0432\u044b\u0431\u0438\u0440\u0430\u044e\u0442 ",(0,Pb.jsx)("br",{})," \u0438\u043c\u0435\u043d\u043d\u043e \u043d\u0430\u0441"]}),(0,Pb.jsxs)("div",{className:"row ",children:[(0,Pb.jsx)("div",{className:"col-xl-6 col-md-6 text-start   p-3",children:(0,Pb.jsxs)("div",{className:"why-box card p-3",children:[(0,Pb.jsx)("div",{className:"bg-number mb-3",children:(0,Pb.jsx)("h3",{className:"pt-2 why-point",children:"4+"})}),(0,Pb.jsx)("p",{className:" pb-0 why-card_title",children:"\u041e\u043f\u044b\u0442 \u043d\u0430\u0448\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u044b"}),(0,Pb.jsx)("p",{className:"",children:"\u0421\u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043c\u044b \u043f\u0440\u043e\u0432\u0435\u043b\u0438 \u0432 \u0441\u0435\u043b\u044c\u0441\u043a\u043e\u0445\u043e\u0437\u044f\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0441\u0444\u0435\u0440\u0435."})]})}),(0,Pb.jsx)("div",{className:"col-xl-6 col-md-6 text-start p-3",children:(0,Pb.jsxs)("div",{className:"why-box card p-3",children:[(0,Pb.jsx)("div",{className:"bg-number mb-3",children:(0,Pb.jsx)("h3",{className:"pt-2 why-point",children:"20"})}),(0,Pb.jsx)("p",{className:" pb-0 why-card_title",children:"\u0414\u043e\u0432\u043e\u043b\u044c\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"}),(0,Pb.jsx)("p",{className:"",children:"\u041f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u0438 \u0432\u044b\u0441\u043e\u043a\u043e \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u044e\u0442 \u043d\u0430\u0448 \u043f\u0440\u043e\u0434\u0443\u043a\u0442 ."})]})}),(0,Pb.jsx)("div",{className:"col-xl-6 col-md-6 text-start   p-3",children:(0,Pb.jsxs)("div",{className:"why-box card p-3",children:[(0,Pb.jsx)("div",{className:"bg-number mb-3",children:(0,Pb.jsx)("h3",{className:"pt-2 why-point",children:"3"})}),(0,Pb.jsx)("p",{className:" pb-0 why-card_title",children:"\u0427\u0430\u0441\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u0434\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430"}),(0,Pb.jsx)("p",{className:"",children:"\u0421\u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0441\u0440\u0435\u0434\u043d\u0435\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u0434\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430."})]})}),(0,Pb.jsx)("div",{className:"col-xl-6 col-md-6 text-start   p-3",children:(0,Pb.jsxs)("div",{className:"why-box card p-3",children:[(0,Pb.jsx)("div",{className:"bg-number mb-3",children:(0,Pb.jsx)("h3",{className:"pt-2 why-point",children:"7"})}),(0,Pb.jsx)("p",{className:" pb-0 why-card_title",children:"\u0420\u0430\u0431\u043e\u0447\u0438\u0445 \u0434\u043d\u0435\u0439 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e."}),(0,Pb.jsx)("p",{className:"",children:" \u041c\u044b \u043d\u0435 \u0434\u0435\u043b\u0430\u0435\u043c \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u043b\u044f \u043d\u0430\u0448\u0438\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432."})]})})]})]}),(0,Pb.jsx)("div",{className:"col-xl-1",children:(0,Pb.jsx)("img",{src:wk,style:{height:"5rem"},className:"mt-5",alt:""})})]})})}var CE=n(2414);function TE(e){return(0,Pb.jsx)("div",{className:"container-fluid reviews-block",children:(0,Pb.jsxs)("div",{className:"container",children:[(0,Pb.jsx)("h3",{className:"reviews-title text-center m-5",children:"\u041e\u0442\u0437\u044b\u0432\u044b \u043d\u0430\u0448\u0438\u0445 \u043a\u043b\u0438\u043d\u0442\u043e\u0432"}),(0,Pb.jsxs)("div",{className:"row",children:[(0,Pb.jsx)("div",{className:"col-xl-12 box-reviews mb-5",children:(0,Pb.jsxs)("div",{className:"row mt-5",children:[(0,Pb.jsxs)("div",{className:"col-xl-3",children:[(0,Pb.jsx)("p",{className:"reviews-name",children:"Mura"}),(0,Pb.jsx)("p",{children:"05.05.2005"})]}),(0,Pb.jsxs)("div",{className:"col-xl-3 d-flex",children:[(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"})]}),(0,Pb.jsxs)("div",{className:"col-xl-6",children:[(0,Pb.jsx)("p",{className:"reviews-title-review",children:"\u0411\u043e\u043c\u0431\u0430 \u0447\u0435\u0441\u0442\u043d\u043e \u0433\u043e\u0432\u043e\u0440\u044f"}),(0,Pb.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus, ad culpa distinctio eius error maiores pariatur porro possimus sapiente sunt!"})]})]})}),(0,Pb.jsx)("div",{className:"col-xl-12 box-reviews mb-5",children:(0,Pb.jsxs)("div",{className:"row mt-5",children:[(0,Pb.jsxs)("div",{className:"col-xl-3",children:[(0,Pb.jsx)("p",{className:"reviews-name",children:"Mura"}),(0,Pb.jsx)("p",{children:"05.05.2005"})]}),(0,Pb.jsxs)("div",{className:"col-xl-3 d-flex",children:[(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"})]}),(0,Pb.jsxs)("div",{className:"col-xl-6",children:[(0,Pb.jsx)("p",{className:"reviews-title-review",children:"\u0411\u043e\u043c\u0431\u0430 \u0447\u0435\u0441\u0442\u043d\u043e \u0433\u043e\u0432\u043e\u0440\u044f"}),(0,Pb.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus, ad culpa distinctio eius error maiores pariatur porro possimus sapiente sunt!"})]})]})}),(0,Pb.jsx)("div",{className:"col-xl-12 box-reviews mb-5",children:(0,Pb.jsxs)("div",{className:"row mt-5",children:[(0,Pb.jsxs)("div",{className:"col-xl-3",children:[(0,Pb.jsx)("p",{className:"reviews-name",children:"Mura"}),(0,Pb.jsx)("p",{children:"05.05.2005"})]}),(0,Pb.jsxs)("div",{className:"col-xl-3 d-flex",children:[(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"}),(0,Pb.jsx)(CE.y,{className:"star"})]}),(0,Pb.jsxs)("div",{className:"col-xl-6",children:[(0,Pb.jsx)("p",{className:"reviews-title-review",children:"\u0411\u043e\u043c\u0431\u0430 \u0447\u0435\u0441\u0442\u043d\u043e \u0433\u043e\u0432\u043e\u0440\u044f"}),(0,Pb.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus, ad culpa distinctio eius error maiores pariatur porro possimus sapiente sunt!"})]})]})})]}),(0,Pb.jsx)("div",{className:"d-flex align-items-center justify-content-center  w-100",children:(0,Pb.jsx)("p",{className:"more",children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0435\u0449\u0435..."})})]})})}n.p;function NE(e){return(0,Pb.jsxs)(Pb.Fragment,{children:[(0,Pb.jsx)(rE,{}),(0,Pb.jsx)(aE,{}),(0,Pb.jsx)(yE,{}),(0,Pb.jsx)(EE,{}),(0,Pb.jsx)(SE,{}),(0,Pb.jsx)(TE,{}),(0,Pb.jsx)(Ab,{})]})}var PE="AUTH.SET_USER",AE="AUTH.LOGIN_USER",RE="AUTH.REGISTER_USER",OE=function(e){return{type:PE,payload:e}},DE={login:null,user:!1},LE=n(3288),ME=n(7215),jE=n(8987);function FE(e){var n=Pg(),r=Dg((function(e){return e.auth.user})),i=d((0,t.useState)(!0),2),a=i[0],o=i[1],u=d((0,t.useState)(""),2),s=u[0],c=u[1],l=d((0,t.useState)(""),2),f=l[0],h=l[1],p=d((0,t.useState)(""),2),v=p[0],m=p[1],y=d((0,t.useState)(""),2),g=y[0],k=y[1],b=pk();return r&&setTimeout((function(){b("/")}),500),(0,Pb.jsx)("div",{className:"d-flex align-items-center justify-content-center box-cart p-5",children:r?(0,Pb.jsx)(Pb.Fragment,{children:(0,Pb.jsx)("div",{children:(0,Pb.jsx)(LE.v,{className:"done-register"})})}):(0,Pb.jsx)(Pb.Fragment,{children:a?(0,Pb.jsxs)("div",{className:"auth-box p-4 mt-5",children:[(0,Pb.jsxs)("div",{className:"d-flex justify-content-around align-items-center",children:[(0,Pb.jsx)("span",{onClick:function(){return b(-1)},className:"icon-box",children:(0,Pb.jsx)(ME.u,{className:"auth-icon"})}),(0,Pb.jsx)("img",{className:"d-block mx-auto",src:Hx,alt:""}),(0,Pb.jsx)("span",{onClick:function(){return b(-1)},className:"icon-box",children:(0,Pb.jsx)(jE.Q,{className:"auth-icon"})})]}),(0,Pb.jsx)("h2",{className:"text-center form-name p-3",children:"\u0420\u0435\u0433\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),(0,Pb.jsx)("div",{className:"row d-flex justify-content-center",children:(0,Pb.jsx)("div",{className:"col-xl-8 col-12",children:(0,Pb.jsxs)("div",{className:"w-100",children:[(0,Pb.jsx)("input",{type:"text",name:"email",placeholder:"Email",className:"box-input w-100",onChange:function(e){return c(e.target.value)}}),(0,Pb.jsx)("input",{type:"text",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"box-input w-100",onChange:function(e){return h(e.target.value)}})," ",(0,Pb.jsx)("br",{})]})})}),(0,Pb.jsx)("button",{className:"more-green  mt-1 d-block mx-auto text-center",onClick:function(){return n({type:RE,email:s,password:f})},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),(0,Pb.jsx)("p",{className:"text-center mt-5",children:"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"}),(0,Pb.jsx)("div",{className:"d-flex justify-content-center",children:(0,Pb.jsx)("p",{className:"text-center dop ",onClick:function(){return o(!a)},children:"\u0412\u043e\u0439\u0442\u0438"})})]}):(0,Pb.jsxs)("div",{className:"auth-box p-4 mt-5",children:[(0,Pb.jsxs)("div",{className:"d-flex justify-content-around align-items-center",children:[(0,Pb.jsx)("span",{onClick:function(){return b(-1)},className:"icon-box",children:(0,Pb.jsx)(ME.u,{className:"auth-icon"})}),(0,Pb.jsx)("img",{className:"d-block mx-auto",src:Hx,alt:""}),(0,Pb.jsx)("span",{onClick:function(){return b(-1)},className:"icon-box",children:(0,Pb.jsx)(jE.Q,{className:"auth-icon"})})]}),(0,Pb.jsx)("h2",{className:"text-center form-name p-3",children:"\u0412\u043e\u0439\u0442\u0438"}),(0,Pb.jsx)("div",{className:"row d-flex justify-content-center",children:(0,Pb.jsx)("div",{className:"col-xl-8 col-12",children:(0,Pb.jsxs)("div",{className:"w-100",children:[(0,Pb.jsx)("input",{type:"text",placeholder:"Email",className:"box-input w-100",onChange:function(e){return m(e.target.value)}}),(0,Pb.jsx)("input",{type:"text",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"box-input w-100",onChange:function(e){return k(e.target.value)}})," ",(0,Pb.jsx)("br",{})]})})}),(0,Pb.jsx)("button",{className:"more-green  mt-1 d-block mx-auto text-center",onClick:function(){return n({type:AE,loginEmail:v,loginPassword:g})},children:"\u0412\u043e\u0439\u0442\u0438"}),(0,Pb.jsx)("p",{className:"text-center mt-5",children:"\u0425\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"}),(0,Pb.jsx)("div",{className:"d-flex justify-content-center",children:(0,Pb.jsx)("p",{className:"text-center dop ",onClick:function(){return o(!a)},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})})}var UE=n(8069),VE=n(3588),qE=n(3375);var BE=function(e){var t=e.name,n=e.id,r=(e.img,e.gram,e.price,e.totalPrice),i=e.totalGram,a=e.qty,o=e.addQty,u=e.decQty,s=e.delCart;return(0,Pb.jsxs)("div",{className:"row  d-flex align-items-center justify-content-center box-cart_item mb-3",children:[(0,Pb.jsx)("div",{className:"col-12 col-xl-2",children:(0,Pb.jsx)("img",{src:oE,alt:"",className:"cart-item_img mx-auto d-block"})}),(0,Pb.jsxs)("div",{className:"col-12 col-xl-2 d-flex flex-column text-center",children:[(0,Pb.jsx)("p",{className:"m-0",children:t}),(0,Pb.jsxs)("p",{className:"m-0",children:[i," ",(0,Pb.jsx)("span",{className:"cart-item_gram",children:"\u0433\u0440."})," "]})]}),(0,Pb.jsxs)("div",{className:"col-12 col-xl-2 d-flex justify-content-around align-items-center box-qty p-1",children:[(0,Pb.jsx)(VE.y,{onClick:function(){return u(n,a)}}),(0,Pb.jsx)("p",{className:"m-0",children:a}),(0,Pb.jsx)(UE.L,{onClick:function(){return o(n,a)}})]}),(0,Pb.jsxs)("div",{className:"col-12 col-xl-2 text-center",children:[r," ",(0,Pb.jsx)("span",{className:"cart-item_rub",children:"\u0440"})]}),(0,Pb.jsx)("div",{className:"col-12 col-xl-2 text-center del-cart cart-item_del",children:(0,Pb.jsx)(qE.F,{onClick:function(){return s(n)}})})]})};function zE(e){var t=Dg((function(e){return e.cart.order})),n=Pg(),r=function(e,t){return n(pE(e,t))},i=function(e,t){return n(vE(e,t))},a=function(e,t){return n(dE(e))},o=t.map((function(e){return e.totalPrice})),u=0!==o.length&&o.reduce((function(e,t){return e+t}));return(0,Pb.jsx)("div",{className:"d-flex align-items-center justify-content-center box-cart p-5",children:(0,Pb.jsxs)("div",{className:"cart-mini_box p-4 mt-5",children:[(0,Pb.jsx)("h3",{className:"text-center cart-name",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),t.length>0?(0,Pb.jsxs)(Pb.Fragment,{children:[t.map((function(e){return(0,Pb.jsx)(BE,(0,Ob.Z)((0,Ob.Z)({},e),{},{addQty:r,decQty:i,delCart:a}))})),(0,Pb.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,Pb.jsx)("p",{children:"\u0412\u0441\u0435\u0433\u043e \u043a \u043e\u043f\u043b\u0430\u0442\u0435"}),(0,Pb.jsxs)("p",{children:[u," \u0440"]})]}),(0,Pb.jsx)("button",{className:"more-green mb-5 mt-1 d-block mx-auto",children:(0,Pb.jsx)(Xx,{to:"/form",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437    "})})]}):(0,Pb.jsxs)(Pb.Fragment,{children:[(0,Pb.jsx)("h3",{className:"text-center  p-5",children:"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}),(0,Pb.jsx)("button",{className:"more-green  mt-1 d-block mx-auto",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b"})]})]})})}function WE(e){return(0,Pb.jsx)("div",{className:"d-flex align-items-center justify-content-center box-cart p-5",children:(0,Pb.jsxs)("div",{className:"cart-mini_box p-4 mt-5",children:[(0,Pb.jsx)("h2",{className:"text-center form-name p-3",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,Pb.jsxs)("div",{className:"row",children:[(0,Pb.jsx)("div",{className:"col-6",children:(0,Pb.jsxs)("div",{className:"w-100",children:[(0,Pb.jsx)("input",{type:"text",placeholder:"\u0418\u043c\u044f",className:"box-input w-100"}),(0,Pb.jsx)("input",{type:"text",placeholder:"+7******",className:"box-input w-100"})," ",(0,Pb.jsx)("br",{}),(0,Pb.jsx)("input",{type:"text",placeholder:"\u0423\u043b\u0438\u0446\u0430",className:"box-input w-100"}),(0,Pb.jsx)("input",{type:"text",placeholder:"\u0414\u043e\u043c",className:"box-input w-100"}),(0,Pb.jsx)("input",{type:"text",placeholder:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430",className:"box-input w-100"})]})}),(0,Pb.jsx)("div",{className:"col-6",children:(0,Pb.jsxs)("p",{className:"text-center",children:["\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043a \u0437\u0430\u043a\u0430\u0437\u0443 ",(0,Pb.jsx)("textarea",{name:"comment",cols:"39",rows:"5",className:"box-text pt-4"})]})})]}),(0,Pb.jsxs)("div",{className:"d-flex justify-content-between pt-3",children:[(0,Pb.jsx)("h4",{className:"price-text",children:"\u0412\u0441\u0435\u0433\u043e \u043a \u043e\u043f\u043b\u0430\u0442\u0435:"})," ",(0,Pb.jsx)("h4",{className:"price-value",children:"350 p"})]}),(0,Pb.jsxs)("div",{className:"d-flex align-items-center pt-3",children:[(0,Pb.jsx)("input",{type:"checkbox",className:""}),(0,Pb.jsx)("p",{className:"m-0 p-1",children:"\u042f \u0441\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445"})]}),(0,Pb.jsx)("button",{className:"more-green  mt-1 d-block mx-auto text-center",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})})}function KE(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var HE={};KE(HE,"SSRProvider",(function(){return QE})),KE(HE,"useSSRSafeId",(function(){return $E})),KE(HE,"useIsSSR",(function(){return XE}));var GE={prefix:String(Math.round(1e10*Math.random())),current:0},ZE=t.createContext(GE);function QE(e){var n=(0,t.useContext)(ZE),r=(0,t.useMemo)((function(){return{prefix:n===GE?"":"".concat(n.prefix,"-").concat(++n.current),current:0}}),[n]);return t.createElement(ZE.Provider,{value:r},e.children)}var YE=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);function $E(e){var n=(0,t.useContext)(ZE);return n!==GE||YE||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),(0,t.useMemo)((function(){return e||"react-aria".concat(n.prefix,"-").concat(++n.current)}),[e])}function XE(){var e=(0,t.useContext)(ZE)!==GE,n=d((0,t.useState)(e),2),r=n[0],i=n[1];return"undefined"!==typeof window&&e&&(0,t.useLayoutEffect)((function(){i(!1)}),[]),r}var JE=function(e){var n=e.children,r=e.in,i=e.mountOnEnter,a=e.unmountOnExit,o=(0,t.useRef)(r);return(0,t.useEffect)((function(){r&&(o.current=!0)}),[r]),r?n:a||!o.current&&i?null:n},eI=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],tI=["activeKey","getControlledId","getControllerId"],nI=["as"];function rI(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function iI(e){var n=e.active,r=e.eventKey,i=e.mountOnEnter,a=e.transition,o=e.unmountOnExit,u=e.role,s=void 0===u?"tabpanel":u,c=e.onEnter,l=e.onEntering,f=e.onEntered,h=e.onExit,d=e.onExiting,p=e.onExited,v=rI(e,eI),m=(0,t.useContext)(kx);if(!m)return[Object.assign({},v,{role:s}),{eventKey:r,isActive:n,mountOnEnter:i,transition:a,unmountOnExit:o,onEnter:c,onEntering:l,onEntered:f,onExit:h,onExiting:d,onExited:p}];var y=m.activeKey,g=m.getControlledId,k=m.getControllerId,b=rI(m,tI),w=Kb(r);return[Object.assign({},v,{role:s,id:g(r),"aria-labelledby":k(r)}),{eventKey:r,isActive:null==n&&null!=w?Kb(y)===w:n,transition:a||b.transition,mountOnEnter:null!=i?i:b.mountOnEnter,unmountOnExit:null!=o?o:b.unmountOnExit,onEnter:c,onEntering:l,onEntered:f,onExit:h,onExiting:d,onExited:p}]}var aI=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=d(iI(rI(e,nI)),2),a=i[0],o=i[1],u=o.isActive,s=o.onEnter,c=o.onEntering,l=o.onEntered,f=o.onExit,h=o.onExiting,p=o.onExited,v=o.mountOnEnter,m=o.unmountOnExit,y=o.transition,g=void 0===y?JE:y;return(0,Pb.jsx)(kx.Provider,{value:null,children:(0,Pb.jsx)(Hb.Provider,{value:null,children:(0,Pb.jsx)(g,{in:u,onEnter:s,onEntering:c,onEntered:l,onExit:f,onExiting:h,onExited:p,mountOnEnter:v,unmountOnExit:m,children:(0,Pb.jsx)(r,Object.assign({},a,{ref:t,hidden:!u,"aria-hidden":!u}))})})})}));aI.displayName="TabPanel";var oI=function(e){var n=e.id,r=e.generateChildId,i=e.onSelect,a=e.activeKey,o=e.defaultActiveKey,u=e.transition,s=e.mountOnEnter,c=e.unmountOnExit,l=e.children,f=d(Qb(a,o,i),2),h=f[0],p=f[1],v=$E(n),m=(0,t.useMemo)((function(){return r||function(e,t){return v?"".concat(v,"-").concat(t,"-").concat(e):null}}),[v,r]),y=(0,t.useMemo)((function(){return{onSelect:p,activeKey:h,transition:u,mountOnEnter:s||!1,unmountOnExit:c||!1,getControlledId:function(e){return m(e,"tabpane")},getControllerId:function(e){return m(e,"tab")}}}),[p,h,u,s,c,m]);return(0,Pb.jsx)(kx.Provider,{value:y,children:(0,Pb.jsx)(Hb.Provider,{value:p||null,children:l})})};oI.Panel=aI;var uI=oI;function sI(e){return"boolean"===typeof e?e?S_:void 0:e}var cI=["transition"],lI=function(e){var t=e.transition,n=Lb(e,cI);return(0,Pb.jsx)(uI,(0,Ob.Z)((0,Ob.Z)({},n),{},{transition:sI(t)}))};lI.displayName="TabContainer";var fI=lI,hI=rw("tab-content"),dI=["bsPrefix","transition"],pI=["className","as"],vI=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.transition,i=Lb(e,dI),a=d(iI((0,Ob.Z)((0,Ob.Z)({},i),{},{transition:sI(r)})),2),o=a[0],u=o.className,s=o.as,c=void 0===s?"div":s,l=Lb(o,pI),f=a[1],h=f.isActive,p=f.onEnter,v=f.onEntering,m=f.onEntered,y=f.onExit,g=f.onExiting,k=f.onExited,b=f.mountOnEnter,w=f.unmountOnExit,_=f.transition,x=void 0===_?S_:_,E=Vb(n,"tab-pane");return(0,Pb.jsx)(kx.Provider,{value:null,children:(0,Pb.jsx)(Hb.Provider,{value:null,children:(0,Pb.jsx)(x,{in:h,onEnter:p,onEntering:v,onEntered:m,onExit:y,onExiting:g,onExited:k,mountOnEnter:b,unmountOnExit:w,children:(0,Pb.jsx)(c,(0,Ob.Z)((0,Ob.Z)({},l),{},{ref:t,className:jb()(u,E,h&&"active")}))})})})}));vI.displayName="TabPane";var mI=vI,yI={eventKey:D_().oneOfType([D_().string,D_().number]),title:D_().node.isRequired,disabled:D_().bool,tabClassName:D_().string,tabAttrs:D_().object},gI=function(){throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};gI.propTypes=yI;var kI=Object.assign(gI,{Container:fI,Content:hI,Pane:mI}),bI=["bsPrefix","className","as"],wI=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"div":i,o=Lb(e,bI),u=Vb(n,"row"),s=qb(),c="".concat(u,"-cols"),l=[];return s.forEach((function(e){var t,n=o[e];delete o[e],t=null!=n&&"object"===typeof n?n.cols:n;var r="xs"!==e?"-".concat(e):"";null!=t&&l.push("".concat(c).concat(r,"-").concat(t))})),(0,Pb.jsx)(a,(0,Ob.Z)((0,Ob.Z)({ref:t},o),{},{className:jb().apply(void 0,[r,u].concat(l))}))}));wI.displayName="Row";var _I=wI,xI=["as","bsPrefix","className"],EI=["className"];var II=t.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,i=Lb(e,xI);n=Vb(n,"col");var a=qb(),o=[],u=[];return a.forEach((function(e){var t,r,a,s=i[e];delete i[e],"object"===typeof s&&null!=s?(t=s.span,r=s.offset,a=s.order):t=s;var c="xs"!==e?"-".concat(e):"";t&&o.push(!0===t?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(t)),null!=a&&u.push("order".concat(c,"-").concat(a)),null!=r&&u.push("offset".concat(c,"-").concat(r))})),[(0,Ob.Z)((0,Ob.Z)({},i),{},{className:jb().apply(void 0,[r].concat(o,u))}),{as:t,bsPrefix:n,spans:o}]}(e),r=d(n,2),i=r[0],a=i.className,o=Lb(i,EI),u=r[1],s=u.as,c=void 0===s?"div":s,l=u.bsPrefix,f=u.spans;return(0,Pb.jsx)(c,(0,Ob.Z)((0,Ob.Z)({},o),{},{ref:t,className:jb()(a,!f.length&&l)}))}));II.displayName="Col";var SI=II,CI=n.p+"static/media/t4.2ae89eb56b944c0c997a.jpg";var TI="circle_reactGradientProgress__1_0UG",NI="circle_reactGradientProgressPercentage__3mR2b",PI="circle_reactGradientProgressPercentageSpan__1HdhL",AI="circle_progressCircleBar__1IKUZ";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".circle_reactGradientProgress__1_0UG {\n  display: inline-block;\n  border-radius: 100%;\n  position: relative;\n}\n.circle_reactGradientProgressPercentage__3mR2b {\n  position: absolute;\n  height:100%;\n  width: 100%;\n  margin: 0px auto;\n}\n\n.circle_reactGradientProgressPercentageSpan__1HdhL {\n  position: absolute;\n  height:100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  text-align: center;\n}\n\n.circle_progressCircleBar__1IKUZ {\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n}\n");var RI=function(e){var n=e.percentage,r=e.width,i=e.strokeWidth,a=e.fontSize,o=e.fontColor,u=e.fontFamily,s=e.primaryColor,c=e.secondaryColor,l=e.fill,f=e.hidePercentageText,h=e.strokeLinecap,d=r/2-2*i,p=6.28*d,v=p-n/100*p,m=(""+s[0]+s[1]).replace(/#/g,"");return t.createElement("div",{className:TI,style:{height:r+"px",width:r+"px"}},f?null:t.createElement("div",{id:NI},t.createElement("span",{className:PI,style:{fontSize:a,fontFamily:u,color:o}},n,"%")),t.createElement("svg",{width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},t.createElement("linearGradient",{id:m,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},t.createElement("stop",{offset:"0%",stopColor:s[0]}),t.createElement("stop",{offset:"100%",stopColor:s[1]})),t.createElement("circle",{strokeWidth:i,fill:"transparent",r:d,cx:r/2,cy:r/2,stroke:c,strokeDasharray:p+" "+p}),t.createElement("circle",{className:AI,strokeWidth:i,fill:l,r:d,cx:r/2,cy:r/2,stroke:"url(#"+m+")",strokeLinecap:h,strokeDasharray:p+" "+p,strokeDashoffset:v})))};RI.propTypes={percentage:D_().number.isRequired,width:D_().number,strokeWidth:D_().number,strokeLinecap:D_().oneOf(["round","square","butt"]),fontSize:D_().string,fontColor:D_().string,fontFamily:D_().string,primaryColor:D_().array,secondaryColor:D_().string,fill:D_().string,hidePercentageText:D_().bool},RI.defaultProps={width:200,strokeWidth:5,strokeLinecap:"round",fontSize:"inherit",fontColor:"inherit",fontFamily:"inherit",primaryColor:["#00BBFF","#92d7f1"],secondaryColor:"transparent",fill:"transparent"};var OI=n(1641),DI=n(8690);function LI(e){return(0,Pb.jsx)("div",{className:" box-cart p-5",children:(0,Pb.jsx)(kI.Container,{id:"left-tabs-example",defaultActiveKey:"first",children:(0,Pb.jsxs)(_I,{children:[(0,Pb.jsx)(SI,{sm:3,children:(0,Pb.jsxs)(Kx,{variant:"pills",className:"flex-column mt-5",children:[(0,Pb.jsx)(Kx.Item,{children:(0,Pb.jsx)(Kx.Link,{eventKey:"Profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),(0,Pb.jsx)(Kx.Item,{children:(0,Pb.jsx)(Kx.Link,{eventKey:"Orders",children:"\u0417\u0430\u043a\u0430\u0437\u044b"})}),(0,Pb.jsx)(Kx.Item,{children:(0,Pb.jsx)(Kx.Link,{eventKey:"Settings",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})})]})}),(0,Pb.jsx)(SI,{sm:9,className:"profile-content mt-5",children:(0,Pb.jsxs)(kI.Content,{children:[(0,Pb.jsx)(kI.Pane,{eventKey:"Profile",children:(0,Pb.jsxs)("div",{className:"row d-flex align-items-center justify-content-center",children:[(0,Pb.jsx)("div",{className:"col-xl-3 col-10 d-flex justify-content-center",children:(0,Pb.jsxs)("div",{className:"text-center",children:[(0,Pb.jsx)("img",{src:CI,className:"avatar img-fluid p-5",alt:""}),(0,Pb.jsx)("p",{children:"\u0417\u0435\u043b\u0435\u043d\u044b\u0439 \u0413\u043e\u0440\u043e\u0448\u0435\u043a"}),(0,Pb.jsx)("p",{children:"\u041b\u043e\u0433\u0438\u043d: Ruslan_tokko@mail.ru"}),(0,Pb.jsxs)("p",{children:["\u0410\u0434\u0440\u0435\u0441\u0441 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438: \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 ",(0,Pb.jsx)(DI.F,{})]})]})}),(0,Pb.jsx)("div",{className:"col-xl-3 col-12 d-flex justify-content-center",children:(0,Pb.jsxs)("div",{className:"text-center",children:[(0,Pb.jsx)(RI,{percentage:75,strokeWidth:8}),(0,Pb.jsx)("p",{className:"text-center",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c 1"}),(0,Pb.jsx)("p",{children:"1300 \u043e\u043f\u044b\u0442\u0430"}),(0,Pb.jsx)("p",{children:"\u0414\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f"}),(0,Pb.jsxs)("span",{className:"d-flex justify-content-around align-items-center",children:[(0,Pb.jsx)("p",{className:"m-0 p-0",children:"1lvl 0% "}),(0,Pb.jsx)(OI.h,{}),(0,Pb.jsx)("p",{className:"m-0 p-0",children:"2lvl 3%"})]})]})})]})}),(0,Pb.jsx)(kI.Pane,{eventKey:"second"})]})})]})})})}var MI=function(e){return function(){var e=(0,t.useContext)(Yg).matches,n=e[e.length-1];return n?n.params:{}}().id,Dg((function(e){return e.products.products})),(0,Pb.jsx)("div",{className:"d-flex align-items-center justify-content-center individual-card",children:(0,Pb.jsx)("div",{className:"row",children:(0,Pb.jsx)("div",{className:"col-12 box-main",children:(0,Pb.jsxs)("div",{className:"row d",children:[(0,Pb.jsxs)("div",{className:"col-6 box-left mt-5 mb-5",children:[(0,Pb.jsx)("img",{src:oE,alt:"",className:"img-fluid individual-products_img pt-5 pb-5"}),(0,Pb.jsx)("div",{className:"w-100 box-mini-img",children:(0,Pb.jsxs)("div",{className:"d-flex justify-content-around pt-2 pb-2",children:[(0,Pb.jsx)("img",{src:oE,alt:"",className:"img-fluid mini-img p-2"}),(0,Pb.jsx)("img",{src:oE,alt:"",className:"img-fluid mini-img p-2"}),(0,Pb.jsx)("img",{src:oE,alt:"",className:"img-fluid mini-img p-2"}),(0,Pb.jsx)("img",{src:oE,alt:"",className:"img-fluid mini-img p-2"})]})})]}),(0,Pb.jsx)("div",{className:"col-6 box-right mt-4 mb-4 ",children:"asdasd"})]})})})})};function jI(e){var t=dk();console.log(t.pathname);var n="/auth"!==t.pathname?(0,Pb.jsx)(tE,{}):"",r="/auth"!==t.pathname?(0,Pb.jsx)(Rb,{}):"";return(0,Pb.jsxs)(Pb.Fragment,{children:[n,(0,Pb.jsxs)(kk,{children:[(0,Pb.jsx)(yk,{exact:!0,path:"/",element:(0,Pb.jsx)(NE,{})}),(0,Pb.jsx)(yk,{path:"/cart",element:(0,Pb.jsx)(zE,{})}),(0,Pb.jsx)(yk,{path:"/form",element:(0,Pb.jsx)(WE,{})}),(0,Pb.jsx)(yk,{path:"/auth",element:(0,Pb.jsx)(FE,{})}),(0,Pb.jsx)(yk,{path:"/profile",element:(0,Pb.jsx)(LI,{})}),(0,Pb.jsx)(yk,{path:"/individualProducts/:id",element:(0,Pb.jsx)(MI,{})})]}),r]})}var FI=function(e){var t=Dg((function(e){return e.cart.order}));return(0,Pb.jsx)(Pb.Fragment,{children:t.length?(0,Pb.jsx)("div",{className:"position-fixed d-flex align-items-center justify-content-center icon m-5",children:(0,Pb.jsx)(Kx.Link,{as:Xx,href:"#",to:"/cart",children:(0,Pb.jsx)(Gx.b,{style:{fontSize:"30px"},className:"dinamic-icon"})})}):""})};var UI=function(){var e=Pg();return(0,t.useEffect)((function(){e(Ug())}),[]),(0,Pb.jsxs)(Pb.Fragment,{children:[(0,Pb.jsx)(FI,{}),(0,Pb.jsx)(jI,{})]})},VI=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},qI=n(7781),BI={products:[],loading:!0},zI=(0,qI.UY)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case sE:var n=e.order.find((function(e){return e.id===t.payload.id})),r=n?e.order.map((function(e){return e.id===t.payload.id?(0,Ob.Z)((0,Ob.Z)({},e),{},{qty:e.qty+1}):e})):[].concat(Ie(e.order),[(0,Ob.Z)((0,Ob.Z)({},t.payload),{},{qty:1,totalPrice:t.payload.price,totalGram:t.payload.gram})]);return(0,Ob.Z)((0,Ob.Z)({},e),{},{order:r});case fE:var i=e.order.filter((function(e){return e.id!==t.payload.id}));return(0,Ob.Z)((0,Ob.Z)({},e),{},{order:i});case cE:var a=e.order.find((function(e){return e.id===t.payload.id})),o=!!a&&e.order.map((function(e){return e.id===t.payload.id?(0,Ob.Z)((0,Ob.Z)({},e),{},{qty:e.qty+1,totalPrice:e.totalPrice+e.price,totalGram:e.totalGram+e.gram}):e}));return(0,Ob.Z)((0,Ob.Z)({},e),{},{order:o});case lE:var u=e.order.find((function(e){return e.id===t.payload.id})),s=!!u&&e.order.map((function(e){return e.id===t.payload.id?(0,Ob.Z)((0,Ob.Z)({},e),{},{qty:e.qty-1,totalPrice:e.totalPrice-e.price,totalGram:e.totalGram-e.gram}):e}));return(0,Ob.Z)((0,Ob.Z)({},e),{},{order:s});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BI,t=arguments.length>1?arguments[1]:void 0;return t.type===Mg?(0,Ob.Z)((0,Ob.Z)({},e),{},{products:t.payload}):e},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DE,t=arguments.length>1?arguments[1]:void 0;return t.type===PE?(0,Ob.Z)((0,Ob.Z)({},e),{},{login:t.payload.data,user:t.payload.user}):e}}),WI=n(5484),KI=(0,n(2544).default)(),HI=(0,WI.Uo)((0,qI.md)((function(e){return function(t){return function(n){var r=e.getState();return console.log(n,r),t(n)}}}),(function(e){return function(t){return function(n){var r=e.dispatch,i=e.getState;return"function"===typeof n?n(r,i):t(n)}}}),KI)),GI=n(7780);function ZI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var QI;Object.create;var YI="facebook.com",$I="github.com",XI="google.com",JI="password",eS="twitter.com",tS="EMAIL_SIGNIN",nS="PASSWORD_RESET",rS="RECOVER_EMAIL",iS="REVERT_SECOND_FACTOR_ADDITION",aS="VERIFY_AND_CHANGE_EMAIL",oS="VERIFY_EMAIL";function uS(){return(0,i.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var sS=function(){var e;return e={},(0,i.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,i.Z)(e,"argument-error",""),(0,i.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,i.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,i.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,i.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,i.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,i.Z)(e,"cors-unsupported","This browser is not supported."),(0,i.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,i.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,i.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,i.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,i.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,i.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,i.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,i.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,i.Z)(e,"expired-action-code","The action code has expired."),(0,i.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,i.Z)(e,"internal-error","An internal AuthError has occurred."),(0,i.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,i.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,i.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,i.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,i.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,i.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,i.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,i.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,i.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,i.Z)(e,"invalid-email","The email address is badly formatted."),(0,i.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,i.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,i.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,i.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,i.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,i.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,i.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,i.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,i.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,i.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,i.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,i.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,i.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,i.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,i.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,i.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,i.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,i.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,i.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,i.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,i.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,i.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,i.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,i.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,i.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,i.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,i.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,i.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,i.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,i.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,i.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,i.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,i.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,i.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,i.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,i.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,i.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,i.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,i.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,i.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,i.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,i.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,i.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,i.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,i.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,i.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,i.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,i.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,i.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,i.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,i.Z)(e,"timeout","The operation has timed out."),(0,i.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,i.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,i.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,i.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,i.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,i.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,i.Z)(e,"unverified-email","The operation requires a verified email."),(0,i.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,i.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,i.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,i.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,i.Z)(e,"user-signed-out",""),(0,i.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,i.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,i.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},cS=uS,lS=new Z("auth","Firebase",uS()),fS=new qe("@firebase/auth");function hS(e){if(fS.logLevel<=Re.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];fS.error.apply(fS,["Auth (".concat(at,"): ").concat(e)].concat(n))}}function dS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw yS.apply(void 0,[e].concat(n))}function pS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yS.apply(void 0,[e].concat(n))}function vS(e,t,n){var r=Object.assign(Object.assign({},cS()),(0,i.Z)({},t,n));return new Z("auth","Firebase",r).create(t,{appName:e.name})}function mS(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&dS(e,"argument-error"),vS(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function yS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ie(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ie(o)))}return lS.create.apply(lS,[e].concat(n))}function gS(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw yS.apply(void 0,[t].concat(r))}}function kS(e){var t="INTERNAL ASSERTION FAILED: "+e;throw hS(t),new Error(t)}function bS(e,t){e||kS(t)}var wS=new Map;function _S(e){bS(e instanceof Function,"Expected a class definition");var t=wS.get(e);return t?(bS(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,wS.set(e,t),t)}function xS(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ES(){return"http:"===IS()||"https:"===IS()}function IS(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var SS=function(){function e(t,n){a(this,e),this.shortDelay=t,this.longDelay=n,bS(n>t,"Short delay should be less than long delay!"),this.isMobile=V()||z()}return u(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ES()||B()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function CS(e,t){bS(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var TS=function(){function e(){a(this,e)}return u(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void kS("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void kS("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void kS("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),NS=(QI={},(0,i.Z)(QI,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,i.Z)(QI,"MISSING_CUSTOM_TOKEN","internal-error"),(0,i.Z)(QI,"INVALID_IDENTIFIER","invalid-email"),(0,i.Z)(QI,"MISSING_CONTINUE_URI","internal-error"),(0,i.Z)(QI,"INVALID_PASSWORD","wrong-password"),(0,i.Z)(QI,"MISSING_PASSWORD","internal-error"),(0,i.Z)(QI,"EMAIL_EXISTS","email-already-in-use"),(0,i.Z)(QI,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,i.Z)(QI,"INVALID_IDP_RESPONSE","invalid-credential"),(0,i.Z)(QI,"INVALID_PENDING_TOKEN","invalid-credential"),(0,i.Z)(QI,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,i.Z)(QI,"MISSING_REQ_TYPE","internal-error"),(0,i.Z)(QI,"EMAIL_NOT_FOUND","user-not-found"),(0,i.Z)(QI,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,i.Z)(QI,"EXPIRED_OOB_CODE","expired-action-code"),(0,i.Z)(QI,"INVALID_OOB_CODE","invalid-action-code"),(0,i.Z)(QI,"MISSING_OOB_CODE","internal-error"),(0,i.Z)(QI,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,i.Z)(QI,"INVALID_ID_TOKEN","invalid-user-token"),(0,i.Z)(QI,"TOKEN_EXPIRED","user-token-expired"),(0,i.Z)(QI,"USER_NOT_FOUND","user-token-expired"),(0,i.Z)(QI,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,i.Z)(QI,"INVALID_CODE","invalid-verification-code"),(0,i.Z)(QI,"INVALID_SESSION_INFO","invalid-verification-id"),(0,i.Z)(QI,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,i.Z)(QI,"MISSING_SESSION_INFO","missing-verification-id"),(0,i.Z)(QI,"SESSION_EXPIRED","code-expired"),(0,i.Z)(QI,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,i.Z)(QI,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,i.Z)(QI,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,i.Z)(QI,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,i.Z)(QI,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,i.Z)(QI,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,i.Z)(QI,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,i.Z)(QI,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,i.Z)(QI,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,i.Z)(QI,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,i.Z)(QI,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),QI),PS=new SS(3e4,6e4);function AS(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function RS(e,t,n,r){return OS.apply(this,arguments)}function OS(){return OS=Ce(I().mark((function e(t,n,r,i){var a,o=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",DS(t,a,Ce(I().mark((function e(){var a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=oe(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",TS.fetch()(FS(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function DS(e,t,n){return LS.apply(this,arguments)}function LS(){return(LS=Ce(I().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,p;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},NS),n),e.prev=2,a=new US(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw VS(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=d(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw VS(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw VS(t,"email-already-in-use",u);case 25:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw vS(t,p,h);case 30:dS(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof G)){e.next=37;break}throw e.t0;case 37:dS(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function MS(e,t,n,r){return jS.apply(this,arguments)}function jS(){return jS=Ce(I().mark((function e(t,n,r,i){var a,o,u=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,RS(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&dS(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),jS.apply(this,arguments)}function FS(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?CS(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var US=function(){function e(t){var n=this;a(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(pS(n.auth,"network-request-failed"))}),PS.get())}))}return u(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function VS(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=pS(e,t,r);return i.customData._tokenResponse=n,i}function qS(e,t){return BS.apply(this,arguments)}function BS(){return(BS=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zS(e,t){return WS.apply(this,arguments)}function WS(){return(WS=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KS(e,t){return HS.apply(this,arguments)}function HS(){return(HS=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GS(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(_k){}}function ZS(){return ZS=Ce(I().mark((function e(t){var n,r,i,a,o,u,s=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ge(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,gS((a=YS(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:GS(QS(a.auth_time)),issuedAtTime:GS(QS(a.iat)),expirationTime:GS(QS(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ZS.apply(this,arguments)}function QS(e){return 1e3*Number(e)}function YS(e){var t=d(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return hS("JWT malformed, contained fewer than 3 sections"),null;try{var a=L(r);return a?JSON.parse(a):(hS("Failed to decode base64 JWT payload"),null)}catch(_k){return hS("Caught error parsing JWT payload as JSON",_k),null}}function $S(e,t){return XS.apply(this,arguments)}function XS(){return XS=Ce(I().mark((function e(t,n){var r=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof G&&JS(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),XS.apply(this,arguments)}function JS(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var eC=function(){function e(t){a(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return u(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ce(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),tC=function(){function e(t,n){a(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return u(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=GS(this.lastLoginAt),this.creationTime=GS(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function nC(e){return rC.apply(this,arguments)}function rC(){return rC=Ce(I().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,$S(t,KS(r,{idToken:i}));case 6:gS(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?oC(o.providerUserInfo):[],s=aC(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new tC(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),rC.apply(this,arguments)}function iC(){return(iC=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ge(t),e.next=3,nC(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aC(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ie(n),Ie(t))}function oC(e){return e.map((function(e){var t=e.providerId,n=ZI(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function uC(e,t){return sC.apply(this,arguments)}function sC(){return(sC=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DS(t,{},Ce(I().mark((function e(){var r,i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=FS(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",TS.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cC=function(){function e(){a(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return u(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){gS(e.idToken,"internal-error"),gS("undefined"!==typeof e.idToken,"internal-error"),gS("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=YS(e);return gS(t,"internal-error"),gS("undefined"!==typeof t.exp,"internal-error"),gS("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ce(I().mark((function e(t){var n,r=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],gS(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ce(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uC(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return kS("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(gS("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(gS("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(gS("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function lC(e,t){gS("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var fC=function(){function e(t){a(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=ZI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?Ie(o.providerData):[],this.metadata=new tC(o.createdAt||void 0,o.lastLoginAt||void 0)}return u(e,[{key:"getIdToken",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$S(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(gS(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ZS.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return iC.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(gS(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){gS(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ce(I().mark((function e(t){var n,r,i=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,nC(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,$S(this,qS(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;gS(k&&x,t,"internal-error");var E=cC.fromJSON(this.name,x);gS("string"===typeof k,t,"internal-error"),lC(f,t.name),lC(h,t.name),gS("boolean"===typeof b,t,"internal-error"),gS("boolean"===typeof w,t,"internal-error"),lC(d,t.name),lC(p,t.name),lC(v,t.name),lC(m,t.name),lC(y,t.name),lC(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=Ce(I().mark((function t(n,r){var i,a,o,u=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new cC).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,nC(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),hC=function(){function e(){a(this,e),this.type="NONE",this.storage={}}return u(e,[{key:"_isAvailable",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();hC.type="NONE";var dC=hC;function pC(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var vC=function(){function e(t,n,r){a(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,u=i.name;this.fullUserKey=pC(this.userKey,o.apiKey,u),this.fullPersistenceKey=pC("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return u(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?fC._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ce(I().mark((function t(n,r){var i,a,o,u,s,c,f,h,d,p,v,m=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(_S(dC),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||_S(dC),u=pC(i,n.config.apiKey,n.name),s=null,c=l(r),t.prev=10,c.s();case 12:if((f=c.n()).done){t.next=29;break}return h=f.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(d=t.sent)){t.next=23;break}return p=fC._fromJSON(n,d),h!==o&&(s=p),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function mC(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_C(t))return"Blackberry";if(xC(t))return"Webos";if(gC(t))return"Safari";if((t.includes("chrome/")||kC(t))&&!t.includes("edge/"))return"Chrome";if(wC(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function yC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/firefox\//i.test(e)}function gC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function kC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/crios\//i.test(e)}function bC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iemobile/i.test(e)}function wC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/android/i.test(e)}function _C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/blackberry/i.test(e)}function xC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/webos/i.test(e)}function EC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iphone|ipad|ipod/i.test(e)}function IC(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return EC(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function SC(){return W()&&10===document.documentMode}function CC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return EC(e)||wC(e)||xC(e)||_C(e)||/windows phone/i.test(e)||bC(e)}function TC(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=mC(U());break;case"Worker":t="".concat(mC(U()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(at,"/").concat(r)}var NC=function(){function e(t,n,r){a(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AC(this),this.idTokenSubscription=new AC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lS,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return u(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=_S(t)),this._initializationPromise=this.queue(Ce(I().mark((function r(){var i,a;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,vC.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ce(I().mark((function e(t){var n,r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return gS(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nC(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ge(t):null)&&gS(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ce(I().mark((function e(t){var n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&gS(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ce(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(_S(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Z("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return gS(n=t&&_S(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,vC.create(this,[_S(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ce(I().mark((function e(t){var n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return gS(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return gS(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TC(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ce(I().mark((function e(){var t,n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function PC(e){return ge(e)}var AC=function(){function e(t){var n=this;a(this,e),this.auth=t,this.observer=null,this.addObserver=le((function(e){return n.observer=e}))}return u(e,[{key:"next",get:function(){return gS(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function RC(e,t,n){var r=PC(e);gS(r._canInitEmulator,r,"emulator-config-failed"),gS(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=OC(t),o=function(e){var t=OC(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:DC(r.substr(a.length+1))}}var o=d(r.split(":"),2);return{host:o[0],port:DC(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function OC(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function DC(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var LC=function(){function e(t,n){a(this,e),this.providerId=t,this.signInMethod=n}return u(e,[{key:"toJSON",value:function(){return kS("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return kS("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return kS("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return kS("not implemented")}}]),e}();function MC(e,t){return jC.apply(this,arguments)}function jC(){return(jC=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:resetPassword",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FC(e,t){return UC.apply(this,arguments)}function UC(){return(UC=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VC(e,t){return qC.apply(this,arguments)}function qC(){return(qC=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:update",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BC(e,t){return zC.apply(this,arguments)}function zC(){return(zC=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MS(t,"POST","/v1/accounts:signInWithPassword",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WC(e,t){return KC.apply(this,arguments)}function KC(){return(KC=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:sendOobCode",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HC(e,t){return GC.apply(this,arguments)}function GC(){return(GC=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WC(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZC(e,t){return QC.apply(this,arguments)}function QC(){return(QC=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WC(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YC(e,t){return $C.apply(this,arguments)}function $C(){return($C=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WC(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XC(e,t){return JC.apply(this,arguments)}function JC(){return(JC=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WC(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eT(e,t){return tT.apply(this,arguments)}function tT(){return(tT=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MS(t,"POST","/v1/accounts:signInWithEmailLink",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nT(e,t){return rT.apply(this,arguments)}function rT(){return(rT=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MS(t,"POST","/v1/accounts:signInWithEmailLink",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iT=function(e){m(n,e);var t=w(n);function n(e,r,i){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return a(this,n),(o=t.call(this,"password",i))._email=e,o._password=r,o._tenantId=u,o}return u(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",BC(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",eT(t,{email:this._email,oobCode:this._password}));case 5:dS(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",FC(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",nT(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:dS(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(LC);function aT(e,t){return oT.apply(this,arguments)}function oT(){return(oT=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MS(t,"POST","/v1/accounts:signInWithIdp",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uT=function(e){m(n,e);var t=w(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return u(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return aT(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,aT(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,aT(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=oe(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dS("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ZI(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(LC);function sT(e,t){return cT.apply(this,arguments)}function cT(){return(cT=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:sendVerificationCode",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lT(){return(lT=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MS(t,"POST","/v1/accounts:signInWithPhoneNumber",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fT(){return(fT=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MS(t,"POST","/v1/accounts:signInWithPhoneNumber",AS(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw VS(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hT=(0,i.Z)({},"USER_NOT_FOUND","user-not-found");function dT(){return(dT=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",MS(t,"POST","/v1/accounts:signInWithPhoneNumber",AS(t,r),hT));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pT=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this,"phone","phone")).params=e,r}return u(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return lT.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return fT.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return dT.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(LC);var vT=function(){function e(t){var n,r,i,o,u,s;a(this,e);var c=ue(se(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);gS(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(u=c.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return u(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ue(se(e)).link,n=t?ue(se(t)).deep_link_id:null,r=ue(se(e)).deep_link_id;return(r?ue(se(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(ev){return null}}}]),e}();var mT=function(){function e(){a(this,e),this.providerId=e.PROVIDER_ID}return u(e,null,[{key:"credential",value:function(e,t){return iT._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=vT.parseLink(t);return gS(n,"argument-error"),iT._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();mT.PROVIDER_ID="password",mT.EMAIL_PASSWORD_SIGN_IN_METHOD="password",mT.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var yT=function(){function e(t){a(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return u(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),gT=function(e){m(n,e);var t=w(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).scopes=[],e}return u(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ie(this.scopes)}}]),n}(yT),kT=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return gS(e.idToken||e.accessToken,"argument-error"),uT._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return gS("providerId"in t&&"signInMethod"in t,"argument-error"),uT._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(_k){return null}}}]),n}(gT),bT=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.call(this,"facebook.com")}return u(n,null,[{key:"credential",value:function(e){return uT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(ev){return null}}}]),n}(gT);bT.FACEBOOK_SIGN_IN_METHOD="facebook.com",bT.PROVIDER_ID="facebook.com";var wT=function(e){m(n,e);var t=w(n);function n(){var e;return a(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return u(n,null,[{key:"credential",value:function(e,t){return uT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(ev){return null}}}]),n}(gT);wT.GOOGLE_SIGN_IN_METHOD="google.com",wT.PROVIDER_ID="google.com";var _T=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.call(this,"github.com")}return u(n,null,[{key:"credential",value:function(e){return uT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(ev){return null}}}]),n}(gT);_T.GITHUB_SIGN_IN_METHOD="github.com",_T.PROVIDER_ID="github.com";var xT=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return u(n,[{key:"_getIdTokenResponse",value:function(e){return aT(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,aT(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,aT(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(LC),ET=function(e){m(n,e);var t=w(n);function n(e){return a(this,n),gS(e.startsWith("saml."),"argument-error"),t.call(this,e)}return u(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=xT.fromJSON(e);return gS(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return xT._create(r,n)}catch(_k){return null}}}]),n}(yT),IT=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.call(this,"twitter.com")}return u(n,null,[{key:"credential",value:function(e,t){return uT._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(ev){return null}}}]),n}(gT);function ST(e,t){return CT.apply(this,arguments)}function CT(){return(CT=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MS(t,"POST","/v1/accounts:signUp",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}IT.TWITTER_SIGN_IN_METHOD="twitter.com",IT.PROVIDER_ID="twitter.com";var TT=function(){function e(t){a(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return u(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ce(I().mark((function t(n,r,i){var a,o,u,s,c=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,fC._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=NT(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ce(I().mark((function t(n,r,i){var a;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=NT(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function NT(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function PT(){return PT=Ce(I().mark((function e(t){var n,r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=PC(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new TT({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ST(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,TT._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),PT.apply(this,arguments)}var AT=function(e){m(n,e);var t=w(n);function n(e,r,i,o){var u,s;return a(this,n),(u=t.call(this,r.code,r.message)).operationType=i,u.user=o,Object.setPrototypeOf(p(u),n.prototype),u.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},u}return u(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(G);function RT(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw AT._fromErrorAndOperation(e,n,t,r);throw n}))}function OT(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function DT(e,t){return LT.apply(this,arguments)}function LT(){return LT=Ce(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ge(t),e.next=3,FT(!0,r,n);case 3:return e.t0=zS,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=OT(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),LT.apply(this,arguments)}function MT(e,t){return jT.apply(this,arguments)}function jT(){return jT=Ce(I().mark((function e(t,n){var r,i,a=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=$S,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",TT._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),jT.apply(this,arguments)}function FT(e,t,n){return UT.apply(this,arguments)}function UT(){return(UT=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nC(n);case 2:i=OT(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",gS(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VT(e,t){return qT.apply(this,arguments)}function qT(){return qT=Ce(I().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,$S(t,RT(i,a,n,t),r);case 6:return gS((o=e.sent).idToken,i,"internal-error"),gS(u=YS(o.idToken),i,"internal-error"),s=u.sub,gS(t.uid===s,i,"user-mismatch"),e.abrupt("return",TT._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&dS(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),qT.apply(this,arguments)}function BT(e,t){return zT.apply(this,arguments)}function zT(){return zT=Ce(I().mark((function e(t,n){var r,i,a,o,u=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,RT(t,i,n);case 4:return a=e.sent,e.next=7,TT._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),zT.apply(this,arguments)}function WT(e,t){return KT.apply(this,arguments)}function KT(){return(KT=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",BT(PC(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HT(e,t){return GT.apply(this,arguments)}function GT(){return(GT=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ge(t),e.next=3,FT(!1,r,n.providerId);case 3:return e.abrupt("return",MT(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZT(e,t){return QT.apply(this,arguments)}function QT(){return(QT=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",VT(ge(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YT(e,t){return $T.apply(this,arguments)}function $T(){return($T=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",MS(t,"POST","/v1/accounts:signInWithCustomToken",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XT(){return(XT=Ce(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=PC(t),e.next=3,YT(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,TT._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var JT=function(){function e(t,n){a(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return u(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?eN._fromServerResponse(e,t):dS(e,"internal-error")}}]),e}(),eN=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return u(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(JT);function tN(e,t,n){var r;gS((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),gS("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(gS(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(gS(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function nN(){return(nN=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ge(t),a={requestType:"PASSWORD_RESET",email:n},r&&tN(i,a,r),e.next=5,ZC(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rN(){return(rN=Ce(I().mark((function e(t,n,r){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MC(ge(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iN(){return(iN=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VC(ge(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aN(e,t){return oN.apply(this,arguments)}function oN(){return(oN=Ce(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ge(t),e.next=3,MC(r,{oobCode:n});case 3:i=e.sent,gS(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return gS(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:gS(i.mfaInfo,r,"internal-error");case 13:gS(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=JT._fromServerResponse(PC(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uN(){return(uN=Ce(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aN(ge(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sN(e,t,n){return cN.apply(this,arguments)}function cN(){return(cN=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PC(t),e.next=3,ST(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,TT._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lN(){return(lN=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ge(t),a={requestType:"EMAIL_SIGNIN",email:n},gS(r.handleCodeInApp,i,"argument-error"),r&&tN(i,a,r),e.next=6,YC(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fN(){return(fN=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ge(t),gS((a=mT.credentialWithLink(n,r||xS()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",WT(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hN(e,t){return dN.apply(this,arguments)}function dN(){return(dN=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:createAuthUri",AS(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pN(){return(pN=Ce(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ES()?xS():"http://localhost",i={identifier:n,continueUri:r},e.next=4,hN(ge(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vN(){return(vN=Ce(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ge(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&tN(r.auth,a,n),e.next=8,HC(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mN(){return(mN=Ce(I().mark((function e(t,n,r){var i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ge(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&tN(i.auth,o,r),e.next=8,XC(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yN(e,t){return gN.apply(this,arguments)}function gN(){return(gN=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",RS(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kN(){return(kN=Ce(I().mark((function e(t,n){var r,i,a,o,u,s,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ge(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,$S(a,yN(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bN(e,t,n){return wN.apply(this,arguments)}function wN(){return(wN=Ce(I().mark((function e(t,n,r){var i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,$S(t,FC(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _N=u((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),xN=function(e){m(n,e);var t=w(n);function n(e,r,i,o){var u;return a(this,n),(u=t.call(this,e,r,i)).username=o,u}return u(n)}(_N),EN=function(e){m(n,e);var t=w(n);function n(e,r){return a(this,n),t.call(this,e,"facebook.com",r)}return u(n)}(_N),IN=function(e){m(n,e);var t=w(n);function n(e,r){return a(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return u(n)}(xN),SN=function(e){m(n,e);var t=w(n);function n(e,r){return a(this,n),t.call(this,e,"google.com",r)}return u(n)}(_N),CN=function(e){m(n,e);var t=w(n);function n(e,r,i){return a(this,n),t.call(this,e,"twitter.com",r,i)}return u(n)}(xN);function TN(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=YS(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new _N(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new EN(a,i);case"github.com":return new IN(a,i);case"google.com":return new SN(a,i);case"twitter.com":return new CN(a,i,e.screenName||null);case"custom":case"anonymous":return new _N(a,null);default:return new _N(a,r,i)}}(n)}var NN=function(){function e(t,n){a(this,e),this.type=t,this.credential=n}return u(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,i.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),PN=function(){function e(t,n,r){a(this,e),this.session=t,this.hints=n,this.signInResolver=r}return u(e,[{key:"resolveSignIn",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=PC(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return JT._fromServerResponse(r,e)}));gS(i.mfaPendingCredential,r,"internal-error");var o=NN._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ce(I().mark((function e(t){var a,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,TT._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return gS(n.user,r,"internal-error"),e.abrupt("return",TT._forOperation(n.user,n.operationType,u));case 17:dS(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function AN(e,t){return RS(e,"POST","/v2/accounts/mfaEnrollment:start",AS(e,t))}var RN=function(){function e(t){var n=this;a(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return JT._fromServerResponse(t.auth,e)})))}))}return u(e,[{key:"getSession",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=NN,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ce(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,$S(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ce(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,$S(this.user,RS(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",AS(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ON=new WeakMap;var DN="__sak",LN=function(){function e(t,n){a(this,e),this.storageRetriever=t,this.type=n}return u(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(DN,"1"),this.storage.removeItem(DN),Promise.resolve(!0)):Promise.resolve(!1)}catch(ev){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var MN=function(e){m(n,e);var t=w(n);function n(){var e;return a(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=U();return gC(e)||EC(e)}()&&function(){try{return!(!window||window===window.top)}catch(_k){return!1}}(),e.fallbackToPolling=CC(),e._shouldAllowMigration=!0,e}return u(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);SC()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ce(I().mark((function e(t,r){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ce(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(LN);MN.type="LOCAL";var jN=MN,FN=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return u(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(LN);FN.type="SESSION";var UN=FN;function VN(e){return Promise.all(e.map(function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var qN=function(){function e(t){a(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return u(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ce(I().mark((function e(t){var n,r,i,a,o,u,s,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,VN(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function BN(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}qN.receivers=[];var zN=function(){function e(t){a(this,e),this.target=t,this.handlers=new Set}return u(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ce(I().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=BN("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function WN(){return window}function KN(){return"undefined"!==typeof WN().WorkerGlobalScope&&"function"===typeof WN().importScripts}function HN(){return GN.apply(this,arguments)}function GN(){return(GN=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ZN(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var QN="firebaseLocalStorageDb",YN="firebaseLocalStorage",$N="fbase_key",XN=function(){function e(t){a(this,e),this.request=t}return u(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function JN(e,t){return e.transaction([YN],t?"readwrite":"readonly").objectStore(YN)}function eP(){var e=indexedDB.deleteDatabase(QN);return new XN(e).toPromise()}function tP(){var e=indexedDB.open(QN,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(YN,{keyPath:$N})}catch(_k){n(_k)}})),e.addEventListener("success",Ce(I().mark((function n(){var r;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(YN)){n.next=12;break}return r.close(),n.next=5,eP();case 5:return n.t0=t,n.next=8,tP();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function nP(e,t,n){return rP.apply(this,arguments)}function rP(){return rP=Ce(I().mark((function e(t,n,r){var a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=JN(t,!0).put((a={},(0,i.Z)(a,$N,n),(0,i.Z)(a,"value",r),a)),e.abrupt("return",new XN(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),rP.apply(this,arguments)}function iP(e,t){return aP.apply(this,arguments)}function aP(){return aP=Ce(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JN(t,!1).get(n),e.next=3,new XN(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),aP.apply(this,arguments)}function oP(e,t){var n=JN(e,!0).delete(t);return new XN(n).toPromise()}var uP=function(){function e(){a(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return u(e,[{key:"_openDb",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,tP();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KN()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ce(I().mark((function e(){var t=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=qN._getInstance(KN()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ce(I().mark((function e(n,r){var i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ce(I().mark((function e(){var t,n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HN();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new zN(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ZN()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,tP();case 5:return t=e.sent,e.next=8,nP(t,DN,"1");case 8:return e.next=10,oP(t,DN);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ce(I().mark((function e(t,n){var r=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return nP(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return iP(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ce(I().mark((function e(t){var n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return oP(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ce(I().mark((function e(){var t,n,r,i,a,o,u,s,c,f,h;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=JN(e,!1).getAll();return new XN(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=l(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(d){i.e(d)}finally{i.f()}for(c=0,f=Object.keys(this.localCache);c<f.length;c++)h=f[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ce(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();uP.type="LOCAL";var sP=uP;function cP(e,t){return RS(e,"POST","/v2/accounts/mfaSignIn:start",AS(e,t))}function lP(e){return fP.apply(this,arguments)}function fP(){return(fP=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RS(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hP(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=pS("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function dP(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var pP=1e12,vP=function(){function e(t){a(this,e),this.auth=t,this.counter=pP,this._widgets=new Map}return u(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new mP(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||pP;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||pP;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||pP,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),mP=function(){function e(t,n,r){var i=this;a(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var o="string"===typeof t?document.getElementById(t):t;gS(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return u(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(_k){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(_k){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var yP=dP("rcb"),gP=new SS(3e4,6e4),kP="https://www.google.com/recaptcha/api.js?",bP=function(){function e(){a(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!WN().grecaptcha}return u(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return gS(wP(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(WN().grecaptcha):new Promise((function(r,i){var a=WN().setTimeout((function(){i(pS(e,"network-request-failed"))}),gP.get());WN()[yP]=function(){WN().clearTimeout(a),delete WN()[yP];var o=WN().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(pS(e,"internal-error"))},hP("".concat(kP,"?").concat(oe({onload:yP,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(pS(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!WN().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function wP(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var _P=function(){function e(){a(this,e)}return u(e,[{key:"load",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new vP(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),xP="recaptcha",EP={theme:"light",type:"image"},IP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},EP),r=arguments.length>2?arguments[2]:void 0;a(this,e),this.parameters=n,this.type=xP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=PC(r),this.isInvisible="invisible"===this.parameters.size,gS("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;gS(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _P:new bP,this.validateStartingState()}return u(e,[{key:"verify",value:function(){var e=Ce(I().mark((function e(){var t,n,r,i=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(_k){return Promise.reject(_k)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){gS(!this.parameters.sitekey,this.auth,"argument-error"),gS(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),gS("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=WN()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){gS(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ce(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gS(ES()&&!KN(),this.auth,"internal-error"),e.next=3,SP();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,lP(this.auth);case 8:gS(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return gS(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function SP(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var CP=function(){function e(t,n){a(this,e),this.verificationId=t,this.onConfirmation=n}return u(e,[{key:"confirm",value:function(e){var t=pT._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function TP(){return(TP=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PC(t),e.next=3,RP(i,n,ge(r));case 3:return a=e.sent,e.abrupt("return",new CP(a,(function(e){return WT(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NP(e,t,n){return PP.apply(this,arguments)}function PP(){return(PP=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ge(t),e.next=3,FT(!1,i,"phone");case 3:return e.next=5,RP(i.auth,n,ge(r));case 5:return a=e.sent,e.abrupt("return",new CP(a,(function(e){return HT(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AP(){return(AP=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ge(t),e.next=3,RP(i.auth,n,ge(r));case 3:return a=e.sent,e.abrupt("return",new CP(a,(function(e){return ZT(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RP(e,t,n){return OP.apply(this,arguments)}function OP(){return OP=Ce(I().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,gS("string"===typeof a,t,"argument-error"),gS(r.type===xP,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return gS("enroll"===u.type,t,"internal-error"),e.next=13,AN(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return gS("signin"===u.type,t,"internal-error"),gS(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,cP(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,sT(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),OP.apply(this,arguments)}function DP(){return(DP=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MT(ge(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var LP=function(){function e(t){a(this,e),this.providerId=e.PROVIDER_ID,this.auth=PC(t)}return u(e,[{key:"verifyPhoneNumber",value:function(e,t){return RP(this.auth,e,ge(t))}}],[{key:"credential",value:function(e,t){return pT._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?pT._fromTokenResponse(n,r):null}}]),e}();function MP(e,t){return t?_S(t):(gS(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}LP.PROVIDER_ID="phone",LP.PHONE_SIGN_IN_METHOD="phone";var jP=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this,"custom","custom")).params=e,r}return u(n,[{key:"_getIdTokenResponse",value:function(e){return aT(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return aT(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return aT(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(LC);function FP(e){return BT(e.auth,new jP(e),e.bypassAuthState)}function UP(e){var t=e.auth,n=e.user;return gS(n,t,"internal-error"),VT(n,new jP(e),e.bypassAuthState)}function VP(e){return qP.apply(this,arguments)}function qP(){return(qP=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,gS(r=t.user,n,"internal-error"),e.abrupt("return",MT(r,new jP(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var BP=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return u(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ce(I().mark((function t(n,r){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ce(I().mark((function e(t){var n,r,i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FP;case"linkViaPopup":case"linkViaRedirect":return VP;case"reauthViaPopup":case"reauthViaRedirect":return UP;default:dS(this.auth,"internal-error")}}},{key:"resolve",value:function(e){bS(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){bS(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),zP=new SS(2e3,1e4);function WP(e,t,n){return KP.apply(this,arguments)}function KP(){return(KP=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PC(t),mS(t,n,yT),a=MP(i,r),o=new QP(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HP(){return(HP=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mS((i=ge(t)).auth,n,yT),a=MP(i.auth,r),o=new QP(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GP(e,t,n){return ZP.apply(this,arguments)}function ZP(){return(ZP=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mS((i=ge(t)).auth,n,yT),a=MP(i.auth,r),o=new QP(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var QP=function(e){m(n,e);var t=w(n);function n(e,r,i,o,u){var s;return a(this,n),(s=t.call(this,e,r,o,u)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=p(s),s}return u(n,[{key:"executeNotNull",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return gS(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ce(I().mark((function e(){var t,n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bS(1===this.filter.length,"Popup operations only handle one event"),t=BN(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(pS(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(pS(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(pS(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,zP.get())}()}}]),n}(BP);QP.currentPopupAction=null;var YP=new Map,$P=function(e){m(n,e);var t=w(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,i}return u(n,[{key:"execute",value:function(){var e=Ce(I().mark((function e(){var t,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=YP.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,XP(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,jt(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:YP.set(this.auth._key(),t);case 21:return this.bypassAuthState||YP.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ce(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",jt(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",jt(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(BP);function XP(e,t){return JP.apply(this,arguments)}function JP(){return(JP=Ce(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rA(n),i=nA(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eA(e,t){return tA.apply(this,arguments)}function tA(){return(tA=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nA(t)._set(rA(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nA(e){return _S(e._redirectPersistence)}function rA(e){return pC("pendingRedirect",e.config.apiKey,e.name)}function iA(e,t,n){return function(e,t,n){return aA.apply(this,arguments)}(e,t,n)}function aA(){return(aA=Ce(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=PC(t),mS(t,n,yT),a=MP(i,r),e.next=5,eA(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oA(e,t,n){return function(e,t,n){return uA.apply(this,arguments)}(e,t,n)}function uA(){return(uA=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mS((i=ge(t)).auth,n,yT),a=MP(i.auth,r),e.next=5,eA(a,i.auth);case 5:return e.next=7,pA(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sA(e,t,n){return function(e,t,n){return cA.apply(this,arguments)}(e,t,n)}function cA(){return(cA=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mS((i=ge(t)).auth,n,yT),a=MP(i.auth,r),e.next=5,FT(!1,i,n.providerId);case 5:return e.next=7,eA(a,i.auth);case 7:return e.next=9,pA(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lA(e,t){return fA.apply(this,arguments)}function fA(){return(fA=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PC(t)._initializationPromise;case 2:return e.abrupt("return",hA(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hA(e,t){return dA.apply(this,arguments)}function dA(){return dA=Ce(I().mark((function e(t,n){var r,i,a,o,u,s=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=PC(t),a=MP(i,n),o=new $P(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),dA.apply(this,arguments)}function pA(e){return vA.apply(this,arguments)}function vA(){return(vA=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=BN("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mA=function(){function e(t){a(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return u(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gA(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!gA(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pS(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yA(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(yA(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function yA(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function gA(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function kA(e){return bA.apply(this,arguments)}function bA(){return bA=Ce(I().mark((function e(t){var n,r=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",RS(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),bA.apply(this,arguments)}var wA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_A=/^https?/;function xA(){return(xA=Ce(I().mark((function e(t){var n,r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,kA(t);case 4:n=e.sent,r=n.authorizedDomains,i=l(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!EA(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:dS(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function EA(e){var t=xS(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!_A.test(r))return!1;if(wA.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var IA=new SS(3e4,6e4);function SA(){var e=WN().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ie(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var CA=null;function TA(e){return CA=CA||function(e){return new Promise((function(t,n){var r,i,a;function o(){SA(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){SA(),n(pS(e,"network-request-failed"))},timeout:IA.get()})}if(null===(i=null===(r=WN().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=WN().gapi)||void 0===a?void 0:a.load)){var u=dP("iframefcb");return WN()[u]=function(){gapi.load?o():n(pS(e,"network-request-failed"))},hP("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw CA=null,e}))}(e),CA}var NA=new SS(5e3,15e3),PA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RA(e){var t=e.config;gS(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?CS(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:at},i=AA.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(oe(r).slice(1))}function OA(e){return DA.apply(this,arguments)}function DA(){return DA=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TA(t);case 2:return n=e.sent,gS(r=WN().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:RA(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PA,dontclear:!0},(function(e){return new Promise(function(){var n=Ce(I().mark((function n(r,i){var a,o,u;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){WN().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=pS(t,"network-request-failed"),o=WN().setTimeout((function(){i(a)}),NA.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),DA.apply(this,arguments)}var LA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MA="_blank",jA="http://localhost",FA=function(){function e(t){a(this,e),this.window=t,this.associatedEvent=null}return u(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(_k){}}}]),e}();function UA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},LA),{width:r.toString(),height:i.toString(),top:a,left:o}),c=U().toLowerCase();n&&(u=kC(c)?MA:n),yC(c)&&(t=t||jA,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=d(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(IC(c)&&"_self"!==u)return VA(t||"",u),new FA(null);var f=window.open(t||"",u,l);gS(f,e,"popup-blocked");try{f.focus()}catch(_k){}return new FA(f)}function VA(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var qA="__/auth/handler",BA="emulator/auth/handler";function zA(e,t,n,r,i,a){gS(e.config.authDomain,e,"auth-domain-config-required"),gS(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:at,eventId:i};if(t instanceof yT){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ne(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=d(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof gT){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(qA);return CS(t,BA)}(e),"?").concat(oe(p).slice(1))}var WA="webStorageSupport",KA=function(){function e(){a(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UN,this._completeRedirectFn=hA}return u(e,[{key:"_openPopup",value:function(){var e=Ce(I().mark((function e(t,n,r,i){var a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bS(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=zA(t,n,r,xS(),i),e.abrupt("return",UA(t,o,BN()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ce(I().mark((function e(t,n,r,i){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=zA(t,n,r,xS(),i),WN().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(bS(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OA(t);case 2:return n=e.sent,r=new mA(t),n.register("authEvent",(function(e){return gS(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(WA,{type:WA},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),dS(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return xA.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return CC()||gC()||EC()}}]),e}(),HA=KA,GA=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this,"phone")).credential=e,r}return u(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return RS(e,"POST","/v2/accounts/mfaEnrollment:finalize",AS(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return RS(e,"POST","/v2/accounts/mfaSignIn:finalize",AS(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){a(this,e),this.factorId=t}return u(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return kS("unexpected MultiFactorSessionType")}}}]),e}()),ZA=function(){function e(){a(this,e)}return u(e,null,[{key:"assertion",value:function(e){return GA._fromCredential(e)}}]),e}();ZA.FACTOR_ID="phone";var QA,YA="@firebase/auth",$A="0.19.12",XA=function(){function e(t){a(this,e),this.auth=t,this.internalListeners=new Map}return u(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){gS(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();QA="Browser",Xe(new Te("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){gS(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),gS(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:QA,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TC(QA)},i=new NC(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_S);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Xe(new Te("auth-internal",(function(e){return function(e){return new XA(e)}(PC(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ft(YA,$A,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(QA)),ft(YA,$A,"esm2017");var JA=n(9969),eR=Lt.initializeApp({apiKey:"AIzaSyCJonn2C_qVKKkjnUwDjsFep48AthW8mXs",authDomain:"microgreens-c3970.firebaseapp.com",projectId:"microgreens-c3970",storageBucket:"microgreens-c3970.appspot.com",messagingSenderId:"136019085614",appId:"1:136019085614:web:672ad672ad470008a0d2bf",measurementId:"G-EWC1W1Q7XK"}),tR=new JA.Z(eR),nR=I().mark(iR),rR=I().mark(aR);function iR(){var e,t;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,GI.call)(tR.firestore.getCollection,"products");case 2:return e=n.sent,t=e.docs.map((function(e){return(0,Ob.Z)({id:e.id},e.data())})),n.next=6,(0,GI.put)(Fg(t));case 6:case"end":return n.stop()}}),nR)}function aR(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,GI.takeEvery)(jg,iR);case 2:case"end":return e.stop()}}),rR)}function oR(){return window}function uR(e,t,n){return sR.apply(this,arguments)}function sR(){return sR=Ce(I().mark((function e(t,n,r){var i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oR(),o=a.BuildInfo,bS(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,pR(n.sessionId);case 4:return u=e.sent,s={},EC()?s.ibi=o.packageName:wC()?s.apn=o.packageName:dS(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",zA(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),sR.apply(this,arguments)}function cR(){return(cR=Ce(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oR(),r=n.BuildInfo,i={},EC()?i.iosBundleId=r.packageName:wC()?i.androidPackageName=r.packageName:dS(t,"operation-not-supported-in-this-environment"),e.next=5,kA(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lR(e){var t=oR().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function fR(e,t,n){return hR.apply(this,arguments)}function hR(){return hR=Ce(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oR(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(pS(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),wC()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),hR.apply(this,arguments)}function dR(e){var t,n,r,i,a,o,u,s,c,l,f=oR();gS("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),gS("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),gS("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),gS("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),gS("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function pR(e){return vR.apply(this,arguments)}function vR(){return(vR=Ce(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mR(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mR(e){if(bS(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var yR=function(e){m(n,e);var t=w(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return u(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),jt(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(mA);function gR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:xR(),postBody:null,tenantId:e.tenantId,error:pS(e,"no-auth-event")}}function kR(e,t){return ER()._set(IR(e),t)}function bR(e){return wR.apply(this,arguments)}function wR(){return(wR=Ce(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ER()._get(IR(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,ER()._remove(IR(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _R(e,t){var n,r,i=function(e){var t=SR(e),n=t.link?decodeURIComponent(t.link):void 0,r=SR(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return SR(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=SR(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(_k){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?pS(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function xR(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function ER(){return _S(jN)}function IR(e){return pC("authEvent",e.config.apiKey,e.name)}function SR(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=f(t=n)||Ee(t)||c(t)||h();r[0];return ue(r.slice(1).join("?"))}var CR=function(){function e(){a(this,e),this._redirectPersistence=UN,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hA}return u(e,[{key:"_initialize",value:function(){var e=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new yR(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){dS(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ce(I().mark((function e(t,n,r,i){var a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dR(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),YP.clear(),e.next=10,this._originValidation(t);case 10:return o=gR(t,r,i),e.next=13,kR(t,o);case 13:return e.next=15,uR(t,o,n);case 15:return u=e.sent,e.next=18,lR(u);case 18:return s=e.sent,e.abrupt("return",fR(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return cR.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=oR(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ce(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,bR(e);case 2:t.onEvent(NR());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ce(I().mark((function n(r){var i,a;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,bR(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=_R(i,r.url)),t.onEvent(a||NR());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");oR().handleOpenURL=function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(_k){console.error(_k)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),TR=CR;function NR(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pS("no-auth-event")}}function PR(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function AR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return!("file:"!==PR()&&"ionic:"!==PR()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function RR(){return W()&&11===(null===document||void 0===document?void 0:document.documentMode)}function OR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/Edge\/\d+/.test(e)}function DR(){try{var e=self.localStorage,t=BN();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return RR()||OR(e)}()||H()}catch(_k){return LR()&&H()}return!1}function LR(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function MR(){return("http:"===PR()||"https:"===PR()||B()||AR())&&!(z()||q())&&DR()&&!LR()}function jR(){return AR()&&"undefined"!==typeof document}function FR(){return UR.apply(this,arguments)}function UR(){return(UR=Ce(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jR()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var VR={LOCAL:"local",NONE:"none",SESSION:"session"},qR=gS,BR="persistence";function zR(e,t){qR(Object.values(VR).includes(t),e,"invalid-persistence-type"),z()?qR(t!==VR.SESSION,e,"unsupported-persistence-type"):q()?qR(t===VR.NONE,e,"unsupported-persistence-type"):LR()?qR(t===VR.NONE||t===VR.LOCAL&&H(),e,"unsupported-persistence-type"):qR(t===VR.NONE||DR(),e,"unsupported-persistence-type")}function WR(e){return KR.apply(this,arguments)}function KR(){return(KR=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=HR(),r=pC(BR,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HR(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(_k){return null}}var GR=gS,ZR=function(){function e(){a(this,e),this.browserResolver=_S(HA),this.cordovaResolver=_S(TR),this.underlyingResolver=null,this._redirectPersistence=UN,this._completeRedirectFn=hA}return u(e,[{key:"_initialize",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ce(I().mark((function e(t,n,r,i){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ce(I().mark((function e(t,n,r,i){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return jR()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return GR(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,FR();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function QR(e){return e.unwrap()}function YR(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new tO(e,function(e,t){var n,r=ge(e),i=t;return gS(t.customData.operationType,r,"argument-error"),gS(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),PN._fromError(r,i)}(e,t));else if(r){var i=$R(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function $R(e){var t=(e instanceof G?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof G)&&"temporaryProof"in t&&"phoneNumber"in t)return LP.credentialFromResult(e);var n,r=t.providerId;if(!r||r===JI)return null;switch(r){case XI:n=wT;break;case YI:n=bT;break;case $I:n=_T;break;case eS:n=IT;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?xT._create(r,u):uT._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new kT(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof G?n.credentialFromError(e):n.credentialFromResult(e)}function XR(e,t){return t.catch((function(t){throw t instanceof G&&YR(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,$R(t)),additionalUserInfo:TN(e),user:nO.getOrCreate(r)}}))}function JR(e,t){return eO.apply(this,arguments)}function eO(){return(eO=Ce(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return XR(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tO=function(){function e(t,n){a(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return u(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return XR(QR(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),nO=function(){function e(t){a(this,e),this._delegate=t,this.multiFactor=function(e){var t=ge(e);return ON.has(t)||ON.set(t,RN._fromUser(t)),ON.get(t)}(t)}return u(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XR(this.auth,HT(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JR(this.auth,NP(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XR(this.auth,GP(this._delegate,t,ZR)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WR(PC(this.auth));case 2:return e.abrupt("return",sA(this._delegate,t,ZR));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XR(this.auth,ZT(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return JR(this.auth,function(e,t,n){return AP.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return XR(this.auth,function(e,t,n){return HP.apply(this,arguments)}(this._delegate,e,ZR))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WR(PC(this.auth));case 2:return e.abrupt("return",oA(this._delegate,t,ZR));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return vN.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DT(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return bN(ge(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return bN(ge(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return DP.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return kN.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return mN.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();nO.USER_MAP=new WeakMap;var rO=gS,iO=function(){function e(t,n){if(a(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;rO(r,"invalid-api-key",{appName:t.name}),rO(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ZR:void 0;this._delegate=n.initialize({options:{persistence:oO(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(sS),this.linkUnderlyingAuth()}return u(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?nO.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){RC(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return iN.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return aN(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return rN.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ce(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XR(this._delegate,sN(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return pN.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=vT.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ce(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rO(MR(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,lA(this._delegate,ZR);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",XR(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){PC(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=aO(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=aO(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return lN.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return nN.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ce(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zR(this._delegate,t),e.t0=t,e.next=e.t0===VR.SESSION?4:e.t0===VR.LOCAL?6:e.t0===VR.NONE?11:13;break;case 4:return n=UN,e.abrupt("break",14);case 6:return e.next=8,_S(sP)._isAvailable();case 8:return r=e.sent,n=r?sP:jN,e.abrupt("break",14);case 11:return n=dC,e.abrupt("break",14);case 13:return e.abrupt("return",dS("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return XR(this._delegate,function(e){return PT.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return XR(this._delegate,WT(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return XR(this._delegate,function(e,t){return XT.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return XR(this._delegate,function(e,t,n){return WT(ge(e),mT.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return XR(this._delegate,function(e,t,n){return fN.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return JR(this._delegate,function(e,t,n){return TP.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rO(MR(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",XR(this._delegate,WP(this._delegate,t,ZR)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ce(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rO(MR(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,WR(this._delegate);case 3:return e.abrupt("return",iA(this._delegate,t,ZR));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return uN.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function aO(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&nO.getOrCreate(e))},error:t,complete:n}}function oO(e,t){var n=function(e,t){var n=HR();if(!n)return[];var r=pC(BR,e,t);switch(n.getItem(r)){case VR.NONE:return[dC];case VR.LOCAL:return[sP,UN];case VR.SESSION:return[UN];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(sP)||n.push(sP),"undefined"!==typeof window)for(var r=0,i=[jN,UN];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(dC)||n.push(dC),n}iO.Persistence=VR;var uO=function(){function e(){a(this,e),this.providerId="phone",this._delegate=new LP(QR(Lt.auth()))}return u(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return LP.credential(e,t)}}]),e}();uO.PHONE_SIGN_IN_METHOD=LP.PHONE_SIGN_IN_METHOD,uO.PROVIDER_ID=LP.PROVIDER_ID;var sO=gS,cO=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt.app();a(this,e),sO(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new IP(t,n,i.auth()),this.type=this._delegate.type}return u(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Te("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new iO(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:tS,PASSWORD_RESET:nS,RECOVER_EMAIL:rS,REVERT_SECOND_FACTOR_ADDITION:iS,VERIFY_AND_CHANGE_EMAIL:aS,VERIFY_EMAIL:oS}},EmailAuthProvider:mT,FacebookAuthProvider:bT,GithubAuthProvider:_T,GoogleAuthProvider:wT,OAuthProvider:kT,SAMLAuthProvider:ET,PhoneAuthProvider:uO,PhoneMultiFactorGenerator:ZA,RecaptchaVerifier:cO,TwitterAuthProvider:IT,Auth:iO,AuthCredential:LC,Error:G}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.12")}(Lt);var lO="@firebase/database",fO="0.12.8",hO="";function dO(e){hO=e}var pO=function(){function e(t){a(this,e),this.domStorage_=t,this.prefix_="firebase:"}return u(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),X(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:$(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),vO=function(){function e(){a(this,e),this.cache_={},this.isInMemoryStorage=!0}return u(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ee(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),mO=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new pO(t)}}catch(_k){}return new vO},yO=mO("localStorage"),gO=mO("sessionStorage"),kO=new qe("@firebase/database"),bO=function(){var e=1;return function(){return e++}}(),wO=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,N(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ce;n.update(t);var r=n.digest();return R.encodeByteArray(r)},_O=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?X(r):r,t+=" "}return t},xO=null,EO=!0,IO=function(e,t){N(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(kO.logLevel=Re.VERBOSE,xO=kO.log.bind(kO),t&&gO.set("logging_enabled",!0)):"function"===typeof e?xO=e:(xO=null,gO.remove("logging_enabled"))},SO=function(){if(!0===EO&&(EO=!1,null===xO&&!0===gO.get("logging_enabled")&&IO(!0)),xO){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=_O.apply(null,t);xO(r)}},CO=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];SO.apply(void 0,[e].concat(n))}},TO=function(){var e="FIREBASE INTERNAL ERROR: "+_O.apply(void 0,arguments);kO.error(e)},NO=function(){var e="FIREBASE FATAL ERROR: ".concat(_O.apply(void 0,arguments));throw kO.error(e),new Error(e)},PO=function(){var e="FIREBASE WARNING: "+_O.apply(void 0,arguments);kO.warn(e)},AO=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},RO="[MIN_NAME]",OO="[MAX_NAME]",DO=function(e,t){if(e===t)return 0;if(e===RO||t===OO)return-1;if(t===RO||e===OO)return 1;var n=WO(e),r=WO(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},LO=function(e,t){return e===t?0:e<t?-1:1},MO=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+X(t))},jO=function e(t){if("object"!==typeof t||null===t)return X(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=X(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},FO=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function UO(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var VO=function(e){N(!AO(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var qO=new RegExp("^-?(0*)\\d{1,10}$"),BO=-2147483648,zO=2147483647,WO=function(e){if(qO.test(e)){var t=Number(e);if(t>=BO&&t<=zO)return t}return null},KO=function(e){try{e()}catch(_k){setTimeout((function(){var t=_k.stack||"";throw PO("Exception was thrown by user callback.",t),_k}),Math.floor(0))}},HO=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},GO=function(){function e(t,n){var r=this;a(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return u(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){PO('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),ZO=function(){function e(t,n,r){var i=this;a(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return u(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(SO("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',PO(e)}}]),e}(),QO=function(){function e(t){a(this,e),this.accessToken=t}return u(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();QO.OWNER="owner";var YO="5",$O=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XO="websocket",JO="long_polling",eD=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];a(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yO.get("host:"+t)||this._host}return u(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yO.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function tD(e,t,n){var r;if(N("string"===typeof t,"typeof type must == string"),N("object"===typeof n,"typeof params must == object"),t===XO)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==JO)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return UO(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var nD=function(){function e(){a(this,e),this.counters_={}}return u(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ee(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return M(void 0,this.counters_)}}]),e}(),rD={},iD={};function aD(e){var t=e.toString();return rD[t]||(rD[t]=new nD),rD[t]}var oD=function(){function e(t){a(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return u(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&KO((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),uD="start",sD="close",cD=function(){function e(t,n,r,i,o,u,s){var c=this;a(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=u,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=CO(t),this.stats_=aD(n),this.urlFn=function(e){return c.appCheckToken&&(e.ac=c.appCheckToken),tD(n,JO,e)}}return u(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new oD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(K()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new lD((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===uD)n.id=a,n.password=o;else{if(i!==sD)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=YO,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&$O.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=X(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=O(t),r=FO(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!K()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=X(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!K()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),lD=function(){function e(t,n,r,i){if(a(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,K())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=bO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(_k){SO("frame writing exception"),_k.stack&&SO(_k.stack),SO(_k)}}}return u(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;K()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){SO("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(_k){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||SO("No IE domain setting required")}catch(_k){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),fD=null;"undefined"!==typeof MozWebSocket?fD=MozWebSocket:"undefined"!==typeof WebSocket&&(fD=WebSocket);var hD=function(){function e(t,n,r,i,o,u,s){a(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=CO(this.connId),this.stats_=aD(n),this.connURL=e.connectionURL_(n,u,s,i),this.nodeAdmin=n.nodeAdmin}return u(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yO.set("previous_websocket_failure",!0);try{if(K()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(YO,"/").concat(hO,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/microgreens",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new fD(this.connURL,[],i)}else{var u={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new fD(this.connURL,[],u)}}catch(_k){this.log_("Error instantiating WebSocket.");var s=_k.message||_k.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){yO.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=$(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(N(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=X(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=FO(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(_k){this.log_("Exception thrown from WebSocket.send():",_k.message||_k.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=YO,!K()&&"undefined"!==typeof location&&location.hostname&&$O.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),tD(e,XO,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==fD&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return yO.isInMemoryStorage||!0===yO.get("previous_websocket_failure")}}]),e}();hD.responsesRequiredToBeHealthy=2,hD.healthyTimeout=3e4;var dD=function(){function e(t){a(this,e),this.initTransports_(t)}return u(e,[{key:"initTransports_",value:function(t){var n=hD&&hD.isAvailable(),r=n&&!hD.previouslyFailed();if(t.webSocketOnly&&(n||PO("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hD];else{var i,a=this.transports_=[],o=l(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[cD,hD]}}]),e}(),pD=function(){function e(t,n,r,i,o,u,s,c,l,f){a(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=u,this.onReady_=s,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=CO("c:"+this.id+":"),this.transportManager_=new dD(n),this.log_("Connection created"),this.start_()}return u(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=HO((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=MO("t",e),n=MO("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=MO("t",e),n=MO("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=MO("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?TO("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TO("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),YO!==n&&PO("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),HO((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):HO((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yO.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),vD=function(){function e(){a(this,e)}return u(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),mD=function(){function e(t){a(this,e),this.allowedEvents_=t,this.listeners_={},N(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return u(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Ie(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){N(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),yD=function(e){m(n,e);var t=w(n);function n(){var e;return a(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||V()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return u(n,[{key:"getInitialEvent",value:function(e){return N("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(mD),gD=function(){function e(t,n){if(a(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return u(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function kD(){return new gD("")}function bD(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function wD(e){return e.pieces_.length-e.pieceNum_}function _D(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new gD(e.pieces_,t)}function xD(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ED(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ID(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new gD(t,0)}function SD(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof gD)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new gD(n,0)}function CD(e){return e.pieceNum_>=e.pieces_.length}function TD(e,t){var n=bD(e),r=bD(t);if(null===n)return t;if(n===r)return TD(_D(e),_D(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ND(e,t){for(var n=ED(e,0),r=ED(t,0),i=0;i<n.length&&i<r.length;i++){var a=DO(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function PD(e,t){if(wD(e)!==wD(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function AD(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(wD(e)>wD(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var RD=u((function e(t,n){a(this,e),this.errorPrefix_=n,this.parts_=ED(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ye(this.parts_[r]);OD(this)}));function OD(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+DD(e))}function DD(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var LD=function(e){m(n,e);var t=w(n);function n(){var e,r,i;return a(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return u(n,[{key:"getInitialEvent",value:function(e){return N("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(mD),MD=1e3,jD=function(e){m(n,e);var t=w(n);function n(e,r,i,o,u,s,c,l){var f;if(a(this,n),(f=t.call(this)).repoInfo_=e,f.applicationId_=r,f.onDataUpdate_=i,f.onConnectStatus_=o,f.onServerInfoUpdate_=u,f.authTokenProvider_=s,f.appCheckTokenProvider_=c,f.authOverride_=l,f.id=n.nextPersistentConnectionId_++,f.log_=CO("p:"+f.id+":"),f.interruptReasons_={},f.listens=new Map,f.outstandingPuts_=[],f.outstandingGets_=[],f.outstandingPutCount_=0,f.outstandingGetCount_=0,f.onDisconnectRequestQueue_=[],f.connected_=!1,f.reconnectDelay_=MD,f.maxReconnectDelay_=3e5,f.securityDebugCallback_=null,f.lastSessionId=null,f.establishConnectionTimer_=null,f.visible_=!1,f.requestCBHash_={},f.requestNumber_=0,f.realtime_=null,f.authToken_=null,f.appCheckToken_=null,f.forceTokenRefresh_=!1,f.invalidAuthTokenCount_=0,f.invalidAppCheckTokenCount_=0,f.firstConnection_=!0,f.lastConnectionAttemptTime_=null,f.lastConnectionEstablishedTime_=null,l&&!K())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return LD.getInstance().on("visible",f.onVisible_,p(f)),-1===e.host.indexOf("fblocal")&&yD.getInstance().on("online",f.onOnline_,p(f)),f}return u(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(X(i)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new j,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=J(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=J(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+X(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):TO("Unrecognized action received from server: "+X(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=MD,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=MD,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=MD),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ce(I().mark((function e(){var t,r,i,a,o,u,s,c,l,f,h,p,v,m,y=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){N(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:h=e.sent,p=d(h,2),v=p[0],m=p[1],u?SO("getToken() completed but was canceled"):(SO("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,s=new pD(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){PO(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&PO(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){SO("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){SO("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ne(this.interruptReasons_)&&(this.reconnectDelay_=MD,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return jO(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new gD(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){SO("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){SO("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=l(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=l(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";K()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+hO.replace(/\./g,"-")]=1,V()?e["framework.cordova"]=1:z()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=yD.getInstance().currentlyOnline();return ne(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ee(e,"w")){var n=te(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();PO("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(vD);jD.nextPersistentConnectionId_=0,jD.nextConnectionId_=0;var FD,UD=function(){function e(t,n){a(this,e),this.name=t,this.node=n}return u(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),VD=function(){function e(){a(this,e)}return u(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new UD(RO,e),r=new UD(RO,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return UD.MIN}}]),e}(),qD=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"compare",value:function(e,t){return DO(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw P("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return UD.MIN}},{key:"maxPost",value:function(){return new UD(OO,FD)}},{key:"makePost",value:function(e,t){return N("string"===typeof e,"KeyIndex indexValue must always be a string."),new UD(e,FD)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return FD},set:function(e){FD=e}}]),n}(VD),BD=new qD,zD=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;a(this,e),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var u=1;!t.isEmpty();)if(t=t,u=n?r(t.key,n):1,i&&(u*=-1),u<0)t=this.isReverse_?t.left:t.right;else{if(0===u){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return u(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),WD=function(){function e(t,n,r,i,o){a(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:GD.EMPTY_NODE,this.right=null!=o?o:GD.EMPTY_NODE}return u(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return GD.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return GD.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();WD.RED=!0,WD.BLACK=!1;var KD,HD=function(){function e(){a(this,e)}return u(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new WD(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),GD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;a(this,e),this.comparator_=t,this.root_=n}return u(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,WD.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,WD.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new zD(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new zD(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new zD(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new zD(this.root_,null,this.comparator_,!0,e)}}]),e}();function ZD(e,t){return DO(e.name,t.name)}function QD(e,t){return DO(e,t)}GD.EMPTY_NODE=new HD;var YD,$D,XD,JD=function(e){return"number"===typeof e?"number:"+VO(e):"string:"+e},eL=function(e){if(e.isLeafNode()){var t=e.val();N("string"===typeof t||"number"===typeof t||"object"===typeof t&&ee(t,".sv"),"Priority must be a string or number.")}else N(e===KD||e.isEmpty(),"priority of unexpected type.");N(e===KD||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},tL=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;a(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,N(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),eL(this.priorityNode_)}return u(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return CD(t)?this:".priority"===bD(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=bD(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(N(".priority"!==r||1===wD(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(_D(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+JD(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?VO(this.value_):this.value_,this.lazyHash_=wO(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(N(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return N(i>=0,"Unknown leaf type: "+n),N(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return YD},set:function(e){YD=e}}]),e}();tL.VALUE_TYPE_ORDER=["object","boolean","number","string"];var nL,rL,iL=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?DO(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return UD.MIN}},{key:"maxPost",value:function(){return new UD(OO,new tL("[PRIORITY-POST]",XD))}},{key:"makePost",value:function(e,t){var n=$D(e);return new UD(t,new tL("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(VD),aL=new iL,oL=Math.log(2),uL=function(){function e(t){a(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/oL,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return u(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),sL=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new WD(o,a.node,WD.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new WD(o,a.node,WD.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new WD(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,WD.BLACK):(u(f,WD.BLACK),u(f,WD.RED))}return a}(new uL(e.length));return new GD(r||t,a)},cL={},lL=function(){function e(t,n){a(this,e),this.indexes_=t,this.indexSet_=n}return u(e,[{key:"get",value:function(e){var t=te(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof GD?t:null}},{key:"hasIndex",value:function(e){return ee(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){N(t!==BD,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(UD.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?sL(i,t.getCompare()):cL;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(re(this.indexes_,(function(e,i){var a=te(r.indexSet_,i);if(N(a,"Missing index implementation for "+i),e===cL){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(UD.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),sL(o,a.getCompare())}return cL}var c=n.get(t.name),l=e;return c&&(l=l.remove(new UD(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(re(this.indexes_,(function(e){if(e===cL)return e;var r=n.get(t.name);return r?e.remove(new UD(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return N(cL&&aL,"ChildrenNode.ts has not been loaded"),nL=nL||new e({".priority":cL},{".priority":aL})}}]),e}(),fL=function(){function e(t,n,r){a(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&eL(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return u(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||rL}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?rL:t}},{key:"getChild",value:function(e){var t=bD(e);return null===t?this:this.getImmediateChild(t).getChild(_D(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(N(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new UD(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?rL:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=bD(e);if(null===n)return t;N(".priority"!==bD(e)||1===wD(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(_D(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(aL,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+JD(this.getPriority().val())+":"),this.forEachChild(aL,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":wO(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new UD(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new UD(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new UD(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,UD.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,UD.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hL?-1:0}},{key:"withIndex",value:function(t){if(t===BD||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===BD||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(aL),r=t.getIterator(aL),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===BD?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return rL||(rL=new e(new GD(QD),null,lL.Default))}}]),e}();fL.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var hL=new(function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.call(this,new GD(QD),fL.EMPTY_NODE,lL.Default)}return u(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return fL.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(fL));Object.defineProperties(UD,{MIN:{value:new UD(RO,fL.EMPTY_NODE)},MAX:{value:new UD(OO,hL)}}),qD.__EMPTY_NODE=fL.EMPTY_NODE,tL.__childrenNodeConstructor=fL,KD=hL,function(e){XD=e}(hL);function dL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return fL.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),N(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new tL(n,dL(t))}if(e instanceof Array){var r=fL.EMPTY_NODE;return UO(e,(function(t,n){if(ee(e,t)&&"."!==t.substring(0,1)){var i=dL(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(dL(t))}var i=[],a=!1,o=e;if(UO(o,(function(e,t){if("."!==e.substring(0,1)){var n=dL(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new UD(e,n)))}})),0===i.length)return fL.EMPTY_NODE;var u=sL(i,ZD,(function(e){return e.name}),QD);if(a){var s=sL(i,aL.getCompare());return new fL(u,dL(t),new lL({".priority":s},{".priority":aL}))}return new fL(u,dL(t),lL.Default)}!function(e){$D=e}(dL);var pL=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this)).indexPath_=e,N(!CD(e)&&".priority"!==bD(e),"Can't create PathIndex with empty path or .priority key"),r}return u(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?DO(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=dL(e),r=fL.EMPTY_NODE.updateChild(this.indexPath_,n);return new UD(t,r)}},{key:"maxPost",value:function(){var e=fL.EMPTY_NODE.updateChild(this.indexPath_,hL);return new UD(OO,e)}},{key:"toString",value:function(){return ED(this.indexPath_,0).join("/")}}]),n}(VD),vL=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?DO(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return UD.MIN}},{key:"maxPost",value:function(){return UD.MAX}},{key:"makePost",value:function(e,t){var n=dL(e);return new UD(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(VD),mL=new vL,yL="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gL=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=yL.charAt(n%64),n=Math.floor(n/64);N(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=yL.charAt(t[r]);return N(20===o.length,"nextPushId: Length should be 20."),o}}(),kL=function(e){if("2147483647"===e)return"-";var t=WO(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return OO;var a=n[i],o=yL.charAt(yL.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},bL=function(e){if("-2147483648"===e)return RO;var t=WO(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=yL.charAt(yL.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function wL(e){return{type:"value",snapshotNode:e}}function _L(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function xL(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function EL(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var IL=function(){function e(t){a(this,e),this.index_=t}return u(e,[{key:"updateChild",value:function(e,t,n,r,i,a){N(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(xL(t,o)):N(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(_L(t,n)):a.trackChildChange(EL(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(aL,(function(e,r){t.hasChild(e)||n.trackChildChange(xL(e,r))})),t.isLeafNode()||t.forEachChild(aL,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(EL(t,r,i))}else n.trackChildChange(_L(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?fL.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),SL=function(){function e(t){a(this,e),this.indexedFilter_=new IL(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return u(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new UD(t,n))||(n=fL.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=fL.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(fL.EMPTY_NODE);var i=this;return t.forEachChild(aL,(function(e,t){i.matches(new UD(e,t))||(r=r.updateImmediateChild(e,fL.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),CL=function(){function e(t){a(this,e),this.rangedFilter_=new SL(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return u(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new UD(t,n))||(n=fL.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=fL.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=fL.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(fL.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var f=this.index_.getCompare();c=function(e,t){return f(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var h=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&h<this.limit_&&c(p,s)<=0?h++:r=r.updateImmediateChild(p.name,fL.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;N(u.numChildren()===this.limit_,"");var s=new UD(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||u.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(EL(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(xL(t,f));var p=u.updateImmediateChild(t,fL.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(_L(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(xL(c.name,c.node)),i.trackChildChange(_L(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,fL.EMPTY_NODE)):e}}]),e}(),TL=function(){function e(){a(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=aL}return u(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:RO}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:OO}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===aL}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function NL(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function PL(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function AL(e,t){var n=e.copy();return n.index_=t,n}function RL(e){var t,n={};return e.isDefault()||(e.index_===aL?t="$priority":e.index_===mL?t="$value":e.index_===BD?t="$key":(N(e.index_ instanceof pL,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=X(t),e.startSet_&&(n.startAt=X(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+X(e.indexStartName_))),e.endSet_&&(n.endAt=X(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+X(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function OL(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==aL&&(t.i=e.index_.toString()),t}var DL=function(e){m(n,e);var t=w(n);function n(e,r,i,o){var u;return a(this,n),(u=t.call(this)).repoInfo_=e,u.onDataUpdate_=r,u.authTokenProvider_=i,u.appCheckTokenProvider_=o,u.log_=CO("p:rest:"),u.listens_={},u}return u(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=RL(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),te(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=RL(e._queryParams),r=e._path.toString(),i=new j;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=d(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+oe(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=$(c.responseText)}catch(_k){PO("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&PO("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(N(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(vD),LL=function(){function e(){a(this,e),this.rootNode_=fL.EMPTY_NODE}return u(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function ML(){return{value:null,children:new Map}}function jL(e,t,n){if(CD(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=bD(t);e.children.has(r)||e.children.set(r,ML()),jL(e.children.get(r),t=_D(t),n)}}function FL(e,t){if(CD(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(aL,(function(t,n){jL(e,new gD(t),n)})),FL(e,t)}if(e.children.size>0){var r=bD(t);if(t=_D(t),e.children.has(r))FL(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function UL(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){UL(r,new gD(t.toString()+"/"+e),n)}))}var VL,qL=function(){function e(t){a(this,e),this.collection_=t,this.last_=null}return u(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&UO(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),BL=function(){function e(t,n){a(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new qL(t);var r=1e4+2e4*Math.random();HO(this.reportStats_.bind(this),Math.floor(r))}return u(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;UO(t,(function(t,i){i>0&&ee(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),HO(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function zL(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(VL||(VL={}));var WL,KL=function(){function e(t,n,r){a(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=VL.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return u(e,[{key:"operationForChild",value:function(t){if(CD(this.path)){if(null!=this.affectedTree.value)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new gD(t));return new e(kD(),n,this.revert)}return N(bD(this.path)===t,"operationForChild called for unrelated child."),new e(_D(this.path),this.affectedTree,this.revert)}}]),e}(),HL=function(){function e(t,n){a(this,e),this.source=t,this.path=n,this.type=VL.LISTEN_COMPLETE}return u(e,[{key:"operationForChild",value:function(t){return CD(this.path)?new e(this.source,kD()):new e(this.source,_D(this.path))}}]),e}(),GL=function(){function e(t,n,r){a(this,e),this.source=t,this.path=n,this.snap=r,this.type=VL.OVERWRITE}return u(e,[{key:"operationForChild",value:function(t){return CD(this.path)?new e(this.source,kD(),this.snap.getImmediateChild(t)):new e(this.source,_D(this.path),this.snap)}}]),e}(),ZL=function(){function e(t,n,r){a(this,e),this.source=t,this.path=n,this.children=r,this.type=VL.MERGE}return u(e,[{key:"operationForChild",value:function(t){if(CD(this.path)){var n=this.children.subtree(new gD(t));return n.isEmpty()?null:n.value?new GL(this.source,kD(),n.value):new e(this.source,kD(),n)}return N(bD(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,_D(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),QL=function(){function e(t,n,r){a(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return u(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(CD(e))return this.isFullyInitialized()&&!this.filtered_;var t=bD(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),YL=u((function e(t){a(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function $L(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw P("Should only compare child_ events.");var r=new UD(t.childName,t.snapshotNode),i=new UD(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function XL(e,t){return{eventCache:e,serverCache:t}}function JL(e,t,n,r){return XL(new QL(t,n,r),e.serverCache)}function eM(e,t,n,r){return XL(e.eventCache,new QL(t,n,r))}function tM(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function nM(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var rM=function(){return WL||(WL=new GD(LO)),WL},iM=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rM();a(this,e),this.value=t,this.children=n}return u(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:kD(),value:this.value};if(CD(e))return null;var n=bD(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(_D(e),t);return null!=i?{path:SD(new gD(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(CD(t))return this;var n=bD(t),r=this.children.get(n);return null!==r?r.subtree(_D(t)):new e(null)}},{key:"set",value:function(t,n){if(CD(t))return new e(n,this.children);var r=bD(t),i=(this.children.get(r)||new e(null)).set(_D(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(CD(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=bD(t),r=this.children.get(n);if(r){var i,a=r.remove(_D(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(CD(e))return this.value;var t=bD(e),n=this.children.get(t);return n?n.get(_D(e)):null}},{key:"setTree",value:function(t,n){if(CD(t))return n;var r,i=bD(t),a=(this.children.get(i)||new e(null)).setTree(_D(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(kD(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(SD(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,kD(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(CD(e))return null;var i=bD(e),a=this.children.get(i);return a?a.findOnPath_(_D(e),SD(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,kD(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(CD(t))return this;this.value&&r(n,this.value);var i=bD(t),a=this.children.get(i);return a?a.foreachOnPath_(_D(t),SD(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(kD(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(SD(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return UO(t,(function(e,t){n=n.set(new gD(e),t)})),n}}]),e}(),aM=function(){function e(t){a(this,e),this.writeTree_=t}return u(e,null,[{key:"empty",value:function(){return new e(new iM(null))}}]),e}();function oM(e,t,n){if(CD(t))return new aM(new iM(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=TD(i,t);return a=a.updateChild(o,n),new aM(e.writeTree_.set(i,a))}var u=new iM(n),s=e.writeTree_.setTree(t,u);return new aM(s)}function uM(e,t,n){var r=e;return UO(n,(function(e,n){r=oM(r,SD(t,e),n)})),r}function sM(e,t){if(CD(t))return aM.empty();var n=e.writeTree_.setTree(t,new iM(null));return new aM(n)}function cM(e,t){return null!=lM(e,t)}function lM(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(TD(n.path,t)):null}function fM(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(aL,(function(e,n){t.push(new UD(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new UD(e,n.value))})),t}function hM(e,t){if(CD(t))return e;var n=lM(e,t);return new aM(null!=n?new iM(n):e.writeTree_.subtree(t))}function dM(e){return e.writeTree_.isEmpty()}function pM(e,t){return vM(kD(),e.writeTree_,t)}function vM(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(N(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=vM(SD(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(SD(e,".priority"),r)),n}function mM(e,t){return PM(t,e)}function yM(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function gM(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));N(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&kM(u,r.path)?i=!1:AD(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=wM(e.allWrites,bM,kD()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=sM(e.visibleWrites,r.path):UO(r.children,(function(t){e.visibleWrites=sM(e.visibleWrites,SD(r.path,t))}));return!0}return!1}function kM(e,t){if(e.snap)return AD(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&AD(SD(e.path,n),t))return!0;return!1}function bM(e){return e.visible}function wM(e,t,n){for(var r=aM.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)AD(n,o)?r=oM(r,u=TD(n,o),a.snap):AD(o,n)&&(u=TD(o,n),r=oM(r,kD(),a.snap.getChild(u)));else{if(!a.children)throw P("WriteRecord should have .snap or .children");if(AD(n,o))r=uM(r,u=TD(n,o),a.children);else if(AD(o,n))if(CD(u=TD(o,n)))r=uM(r,kD(),a.children);else{var s=te(a.children,bD(u));if(s){var c=s.getChild(_D(u));r=oM(r,kD(),c)}}}}}return r}function _M(e,t,n,r,i){if(r||i){var a=hM(e.visibleWrites,t);if(!i&&dM(a))return n;if(i||null!=n||cM(a,kD())){return pM(wM(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(AD(e.path,t)||AD(t,e.path))}),t),n||fL.EMPTY_NODE)}return null}var o=lM(e.visibleWrites,t);if(null!=o)return o;var u=hM(e.visibleWrites,t);return dM(u)?n:null!=n||cM(u,kD())?pM(u,n||fL.EMPTY_NODE):null}function xM(e,t,n,r){return _M(e.writeTree,e.treePath,t,n,r)}function EM(e,t){return function(e,t,n){var r=fL.EMPTY_NODE,i=lM(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(aL,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=hM(e.visibleWrites,t);return n.forEachChild(aL,(function(e,t){var n=pM(hM(a,new gD(e)),t);r=r.updateImmediateChild(e,n)})),fM(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return fM(hM(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function IM(e,t,n,r){return function(e,t,n,r,i){N(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=SD(t,n);if(cM(e.visibleWrites,a))return null;var o=hM(e.visibleWrites,a);return dM(o)?i.getChild(n):pM(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function SM(e,t){return function(e,t){return lM(e.visibleWrites,t)}(e.writeTree,SD(e.treePath,t))}function CM(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=hM(e.visibleWrites,t),c=lM(s,kD());if(null!=c)u=c;else{if(null==n)return[];u=pM(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function TM(e,t,n){return function(e,t,n,r){var i=SD(t,n),a=lM(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?pM(hM(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function NM(e,t){return PM(SD(e.treePath,t),e.writeTree)}function PM(e,t){return{treePath:e,writeTree:t}}var AM=function(){function e(){a(this,e),this.changeMap=new Map}return u(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;N("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),N(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,EL(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,xL(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,_L(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw P("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,EL(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),RM=new(function(){function e(){a(this,e)}return u(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),OM=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return u(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new QL(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TM(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:nM(this.viewCache_),i=CM(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function DM(e,t,n,r,i){var a,o,u=new AM;if(n.type===VL.OVERWRITE){var s=n;s.source.fromUser?a=jM(e,t,s.path,s.snap,r,i,u):(N(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!CD(s.path),a=MM(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===VL.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=SD(n,r);FM(t,bD(c))&&(u=jM(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=SD(n,r);FM(t,bD(c))||(u=jM(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(N(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=VM(e,t,c.path,c.children,r,i,o,u))}else if(n.type===VL.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=SM(r,n))return t;var u,s=new OM(r,t,i),c=t.eventCache.getNode();if(CD(n)||".priority"===bD(n)){var l;if(t.serverCache.isFullyInitialized())l=xM(r,nM(t));else{var f=t.serverCache.getNode();N(f instanceof fL,"serverChildren would be complete if leaf node"),l=EM(r,f)}l=l,u=e.filter.updateFullNode(c,l,a)}else{var h=bD(n),d=TM(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,_D(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,fL.EMPTY_NODE,_D(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=xM(r,nM(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=SM(r,kD()),JL(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=SM(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(CD(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return MM(e,t,n,s.getNode().getChild(n),i,a,u,o);if(CD(n)){var c=new iM(null);return s.getNode().forEachChild(BD,(function(e,t){c=c.set(new gD(e),t)})),VM(e,t,n,c,i,a,u,o)}return t}var l=new iM(null);return r.foreach((function(e,t){var r=SD(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),VM(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==VL.LISTEN_COMPLETE)throw P("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=eM(t,a.getNode(),a.isFullyInitialized()||CD(n),a.isFiltered());return LM(e,o,n,r,RM,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=tM(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(wL(tM(t)))}}(t,a,f),{viewCache:a,changes:f}}function LM(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=SM(r,n))return t;if(CD(n))if(N(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=nM(t),l=EM(r,c instanceof fL?c:fL.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=xM(r,nM(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=bD(n);if(".priority"===h){N(1===wD(n),"Can't have a priority with additional path components");var d=s.getNode(),p=IM(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,m=_D(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var y=IM(r,n,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(h).updateChild(m,y):s.getNode().getImmediateChild(h)}else v=TM(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,m,i,a):s.getNode()}}return JL(t,o,s.isFullyInitialized()||CD(n),e.filter.filtersNodes())}function MM(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(CD(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=bD(n);if(!c.isCompleteForPath(n)&&wD(n)>1)return t;var d=_D(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,RM,null)}var v=eM(t,s,c.isFullyInitialized()||CD(n),l.filtersNodes());return LM(e,v,n,i,new OM(i,v,a),u)}function jM(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new OM(i,t,a);if(CD(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=JL(t,s,!0,e.filter.filtersNodes());else{var f=bD(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=JL(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=_D(n),p=c.getNode().getImmediateChild(f);if(CD(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===xD(d)&&v.getChild(ID(d)).isEmpty()?v:v.updateChild(d,r):fL.EMPTY_NODE}if(p.equals(h))u=t;else u=JL(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function FM(e,t){return e.eventCache.isCompleteForChild(t)}function UM(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function VM(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=CD(n)?r:new iM(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=UM(0,t.serverCache.getNode().getImmediateChild(n),r);c=MM(e,c,new gD(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var f=UM(0,t.serverCache.getNode().getImmediateChild(n),r);c=MM(e,c,new gD(n),f,i,a,o,u)}})),c}var qM,BM=function(){function e(t,n){a(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,o=new IL(i.getIndex()),u=(r=i).loadsAllData()?new IL(r.getIndex()):r.hasLimit()?new CL(r):new SL(r);this.processor_=function(e){return{filter:e}}(u);var s=n.serverCache,c=n.eventCache,l=o.updateFullNode(fL.EMPTY_NODE,s.getNode(),null),f=u.updateFullNode(fL.EMPTY_NODE,c.getNode(),null),h=new QL(l,s.isFullyInitialized(),o.filtersNodes()),d=new QL(f,c.isFullyInitialized(),u.filtersNodes());this.viewCache_=XL(d,h),this.eventGenerator_=new YL(this.query_)}return u(e,[{key:"query",get:function(){return this.query_}}]),e}();function zM(e,t){var n=nM(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!CD(t)&&!n.getImmediateChild(bD(t)).isEmpty())?n.getChild(t):null}function WM(e){return 0===e.eventRegistrations_.length}function KM(e,t,n){var r=[];if(n){N(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function HM(e,t,n,r){t.type===VL.MERGE&&null!==t.source.queryId&&(N(nM(e.viewCache_),"We should always have a full cache before handling merges"),N(tM(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=DM(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,N(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),N(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),N(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,GM(e,u.changes,u.viewCache.eventCache.getNode(),null)}function GM(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),$L(e,i,"child_removed",t,r,n),$L(e,i,"child_added",t,r,n),$L(e,i,"child_moved",a,r,n),$L(e,i,"child_changed",t,r,n),$L(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var ZM,QM=u((function e(){a(this,e),this.views=new Map}));function YM(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return N(null!=a,"SyncTree gave us an op for an invalid query."),HM(a,t,n,r)}var o,u=[],s=l(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(HM(c,t,n,r))}}catch(f){s.e(f)}finally{s.f()}return u}function $M(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=xM(n,i?r:null),s=!1;u?s=!0:r instanceof fL?(u=EM(n,r),s=!1):(u=fL.EMPTY_NODE,s=!1);var c=XL(new QL(u,s,!1),new QL(r,i,!1));return new BM(t,c)}return o}function XM(e,t,n,r,i,a){var o=$M(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(aL,(function(e,t){r.push(_L(e,t))})),n.isFullyInitialized()&&r.push(wL(n.getNode())),GM(e,r,n.getNode(),t)}(o,n)}function JM(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=ij(e);if("default"===i){var s,c=l(e.views.entries());try{for(c.s();!(s=c.n()).done;){var f=d(s.value,2),h=f[0],p=f[1];o=o.concat(KM(p,n,r)),WM(p)&&(e.views.delete(h),p.query._queryParams.loadsAllData()||a.push(p.query))}}catch(m){c.e(m)}finally{c.f()}}else{var v=e.views.get(i);v&&(o=o.concat(KM(v,n,r)),WM(v)&&(e.views.delete(i),v.query._queryParams.loadsAllData()||a.push(v.query)))}return u&&!ij(e)&&a.push(new(N(qM,"Reference.ts has not been loaded"),qM)(t._repo,t._path)),{removed:a,events:o}}function ej(e){var t,n=[],r=l(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function tj(e,t){var n,r=null,i=l(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||zM(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function nj(e,t){if(t._queryParams.loadsAllData())return aj(e);var n=t._queryIdentifier;return e.views.get(n)}function rj(e,t){return null!=nj(e,t)}function ij(e){return null!=aj(e)}function aj(e){var t,n=l(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var oj=1,uj=u((function e(t){a(this,e),this.listenProvider_=t,this.syncPointTree_=new iM(null),this.pendingWriteTree_={visibleWrites:aM.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function sj(e,t,n,r,i){return function(e,t,n,r,i){N(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=oM(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?mj(e,new GL({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function cj(e,t,n,r){!function(e,t,n,r){N(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=uM(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=iM.fromObject(n);return mj(e,new ZL({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function lj(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=yM(e.pendingWriteTree_,t),i=gM(e.pendingWriteTree_,t);if(i){var a=new iM(null);return null!=r.snap?a=a.set(kD(),!0):UO(r.children,(function(e){a=a.set(new gD(e),!0)})),mj(e,new KL(r.path,a,n))}return[]}function fj(e,t,n){return mj(e,new GL({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function hj(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||rj(a,t))){var u=JM(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var s=u.removed;o=u.events;var c=-1!==s.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return ij(t)}));if(c&&!l){var f=e.syncPointTree_.subtree(i);if(!f.isEmpty())for(var h=function(e){return e.fold((function(e,t,n){if(t&&ij(t))return[aj(t)];var r=[];return t&&(r=ej(t)),UO(n,(function(e,t){r=r.concat(t)})),r}))}(f),d=0;d<h.length;++d){var p=h[d],v=p.query,m=kj(e,p);e.listenProvider_.startListening(Ij(v),bj(e,v),m.hashFn,m.onComplete)}}if(!l&&s.length>0&&!r)if(c){e.listenProvider_.stopListening(Ij(t),null)}else s.forEach((function(t){var n=e.queryToTagMap.get(wj(t));e.listenProvider_.stopListening(Ij(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=wj(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,s)}return o}function dj(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=TD(e,r);i=i||tj(t,n),a=a||ij(t)}));var o,u=e.syncPointTree_.get(r);(u?(a=a||ij(u),i=i||tj(u,kD())):(u=new QM,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?o=!0:(o=!1,i=fL.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=tj(t,kD());n&&(i=i.updateImmediateChild(e,n))})));var s=rj(u,t);if(!s&&!t._queryParams.loadsAllData()){var c=wj(t);N(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=oj++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var f=XM(u,t,n,mM(e.pendingWriteTree_,r),i,o);if(!s&&!a){var h=nj(u,t);f=f.concat(function(e,t,n){var r=t._path,i=bj(e,t),a=kj(e,n),o=e.listenProvider_.startListening(Ij(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)N(!ij(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!CD(e)&&t&&ij(t))return[aj(t).query];var r=[];return t&&(r=r.concat(ej(t).map((function(e){return e.query})))),UO(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(Ij(l),bj(e,l))}return o}(e,t,h))}return f}function pj(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=tj(n,TD(e,t));if(r)return r}));return _M(r,t,i,n,!0)}function vj(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=TD(e,n);r=r||tj(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||tj(i,kD()):(i=new QM,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new QL(r,!0,!1):null;return function(e){return tM(e.viewCache_)}($M(i,t,mM(e.pendingWriteTree_,t._path),a?o.getNode():fL.EMPTY_NODE,a))}function mj(e,t){return yj(t,e.syncPointTree_,null,mM(e.pendingWriteTree_,kD()))}function yj(e,t,n,r){if(CD(e.path))return gj(e,t,n,r);var i=t.get(kD());null==n&&null!=i&&(n=tj(i,kD()));var a=[],o=bD(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=NM(r,o);a=a.concat(yj(u,s,c,l))}return i&&(a=a.concat(YM(i,e,r,n))),a}function gj(e,t,n,r){var i=t.get(kD());null==n&&null!=i&&(n=tj(i,kD()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=NM(r,t),s=e.operationForChild(t);s&&(a=a.concat(gj(s,i,o,u)))})),i&&(a=a.concat(YM(i,e,r,n))),a}function kj(e,t){var n=t.query,r=bj(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||fL.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=_j(e,n);if(r){var i=xj(r),a=i.path,o=i.queryId,u=TD(a,t);return Ej(e,a,new HL(zL(o),u))}return[]}(e,n._path,r):function(e,t){return mj(e,new HL({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return hj(e,n,null,i)}}}function bj(e,t){var n=wj(t);return e.queryToTagMap.get(n)}function wj(e){return e._path.toString()+"$"+e._queryIdentifier}function _j(e,t){return e.tagToQueryMap.get(t)}function xj(e){var t=e.indexOf("$");return N(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new gD(e.substr(0,t))}}function Ej(e,t,n){var r=e.syncPointTree_.get(t);return N(r,"Missing sync point for query tag that we're tracking"),YM(r,n,mM(e.pendingWriteTree_,t),null)}function Ij(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(N(ZM,"Reference.ts has not been loaded"),ZM)(e._repo,e._path):e}var Sj=function(){function e(t){a(this,e),this.node_=t}return u(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Cj=function(){function e(t,n){a(this,e),this.syncTree_=t,this.path_=n}return u(e,[{key:"getImmediateChild",value:function(t){var n=SD(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return pj(this.syncTree_,this.path_)}}]),e}(),Tj=function(e,t,n){return e&&"object"===typeof e?(N(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Nj(e[".sv"],t,n):"object"===typeof e[".sv"]?Pj(e[".sv"],t):void N(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Nj=function(e,t,n){if("timestamp"===e)return n.timestamp;N(!1,"Unexpected server value: "+e)},Pj=function(e,t,n){e.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&N(!1,"Unexpected increment value: "+r);var i=t.node();if(N(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Aj=function(e,t,n,r){return Oj(t,new Cj(n,e),r)},Rj=function(e,t,n){return Oj(e,new Sj(t),n)};function Oj(e,t,n){var r,i=e.getPriority().val(),a=Tj(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=Tj(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new tL(u,dL(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new tL(a))),s.forEachChild(aL,(function(e,i){var a=Oj(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Dj=u((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};a(this,e),this.name=t,this.parent=n,this.node=r}));function Lj(e,t){for(var n=t instanceof gD?t:new gD(t),r=e,i=bD(n);null!==i;){var a=te(r.node.children,i)||{children:{},childCount:0};r=new Dj(i,r,a),i=bD(n=_D(n))}return r}function Mj(e){return e.node.value}function jj(e,t){e.node.value=t,Bj(e)}function Fj(e){return e.node.childCount>0}function Uj(e,t){UO(e.node.children,(function(n,r){t(new Dj(n,e,r))}))}function Vj(e,t,n,r){n&&!r&&t(e),Uj(e,(function(e){Vj(e,t,!0,r)})),n&&r&&t(e)}function qj(e){return new gD(null===e.parent?e.name:qj(e.parent)+"/"+e.name)}function Bj(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Mj(e)&&!Fj(e)}(n),i=ee(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Bj(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Bj(e))}(e.parent,e.name,e)}var zj=/[\[\].#$\/\u0000-\u001F\u007F]/,Wj=/[\[\].#$\u0000-\u001F\u007F]/,Kj=10485760,Hj=function(e){return"string"===typeof e&&0!==e.length&&!zj.test(e)},Gj=function(e){return"string"===typeof e&&0!==e.length&&!Wj.test(e)},Zj=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!AO(e)||e&&"object"===typeof e&&ee(e,".sv")},Qj=function(e,t,n,r){r&&void 0===t||Yj(pe(e,"value"),t,n)},Yj=function e(t,n,r){var i=r instanceof gD?new RD(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+DD(i));if("function"===typeof n)throw new Error(t+"contains a function "+DD(i)+" with contents = "+n.toString());if(AO(n))throw new Error(t+"contains "+n.toString()+" "+DD(i));if("string"===typeof n&&n.length>Kj/3&&ye(n)>Kj)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+DD(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(UO(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Hj(n)))throw new Error(t+" contains an invalid key ("+n+") "+DD(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=ye(s),OD(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ye(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+DD(i)+" in addition to actual children.")}},$j=function(e,t,n,r){if(!r||void 0!==t){var i=pe(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];UO(t,(function(e,t){var r=new gD(e);if(Yj(i,t,SD(n,r)),".priority"===xD(r)&&!Zj(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=ED(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!Hj(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(ND);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&AD(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Xj=function(e,t,n){if(!n||void 0!==t){if(AO(t))throw new Error(pe(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zj(t))throw new Error(pe(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Jj=function(e,t,n,r){if((!r||void 0!==n)&&!Hj(n))throw new Error(pe(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},eF=function(e,t,n,r){if((!r||void 0!==n)&&!Gj(n))throw new Error(pe(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tF=function(e,t){if(".info"===bD(t))throw new Error(e+" failed = Can't modify data under /.info/")},nF=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Hj(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Gj(e)}(n))throw new Error(pe(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},rF=u((function e(){a(this,e),this.eventLists_=[],this.recursionDepth_=0}));function iF(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||PD(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function aF(e,t,n){iF(e,n),uF(e,(function(e){return PD(e,t)}))}function oF(e,t,n){iF(e,n),uF(e,(function(e){return AD(e,t)||AD(t,e)}))}function uF(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(sF(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function sF(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();xO&&SO("event: "+n.toString()),KO(r)}}}var cF="repo_interrupt",lF=function(){function e(t,n,r,i){a(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ML(),this.transactionQueueTree_=new Dj,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return u(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function fF(e,t,n){if(e.stats_=aD(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new DL(e.repoInfo_,(function(t,n,r,i){pF(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return vF(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{X(n)}catch(_k){throw new Error("Invalid authOverride provided: "+_k)}}e.persistentConnection_=new jD(e.repoInfo_,t,(function(t,n,r,i){pF(e,t,n,r,i)}),(function(t){vF(e,t)}),(function(t){!function(e,t){UO(t,(function(t,n){mF(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return iD[n]||(iD[n]=t()),iD[n]}(e.repoInfo_,(function(){return new BL(e.stats_,e.server_)})),e.infoData_=new LL,e.infoSyncTree_=new uj({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=fj(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),mF(e,"connected",!1),e.serverSyncTree_=new uj({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);oF(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function hF(e){var t=e.infoData_.getNode(new gD(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function dF(e){return(t=(t={timestamp:hF(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function pF(e,t,n,r,i){e.dataUpdateCount++;var a=new gD(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=re(n,(function(e){return dL(e)}));o=function(e,t,n,r){var i=_j(e,r);if(i){var a=xj(i),o=a.path,u=a.queryId,s=TD(o,t),c=iM.fromObject(n);return Ej(e,o,new ZL(zL(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=dL(n);o=function(e,t,n,r){var i=_j(e,r);if(null!=i){var a=xj(i),o=a.path,u=a.queryId,s=TD(o,t);return Ej(e,o,new GL(zL(u),s,n))}return[]}(e.serverSyncTree_,a,s,i)}else if(r){var c=re(n,(function(e){return dL(e)}));o=function(e,t,n){var r=iM.fromObject(n);return mj(e,new ZL({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=dL(n);o=fj(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=TF(e,a)),oF(e.eventQueue_,f,o)}function vF(e,t){mF(e,"connected",t),!1===t&&function(e){xF(e,"onDisconnectEvents");var t=dF(e),n=ML();UL(e.onDisconnect_,kD(),(function(r,i){var a=Aj(r,i,e.serverSyncTree_,t);jL(n,r,a)}));var r=[];UL(n,kD(),(function(t,n){r=r.concat(fj(e.serverSyncTree_,t,n));var i=OF(e,t);TF(e,i)})),e.onDisconnect_=ML(),oF(e.eventQueue_,kD(),r)}(e)}function mF(e,t,n){var r=new gD("/.info/"+t),i=dL(n);e.infoData_.updateSnapshot(r,i);var a=fj(e.infoSyncTree_,r,i);oF(e.eventQueue_,r,a)}function yF(e){return e.nextWriteId_++}function gF(e,t,n,r,i){xF(e,"set",{path:t.toString(),value:n,priority:r});var a=dF(e),o=dL(n,r),u=pj(e.serverSyncTree_,t),s=Rj(o,u,a),c=yF(e),l=sj(e.serverSyncTree_,t,s,c,!0);iF(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||PO("set at "+t+" failed: "+n);var o=lj(e.serverSyncTree_,c,!a);oF(e.eventQueue_,t,o),EF(e,i,n,r)}));var f=OF(e,t);TF(e,f),oF(e.eventQueue_,f,[])}function kF(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&FL(e.onDisconnect_,t),EF(e,n,r,i)}))}function bF(e,t,n,r){var i=dL(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&jL(e.onDisconnect_,t,i),EF(e,r,n,a)}))}function wF(e,t,n){var r;r=".info"===bD(t._path)?hj(e.infoSyncTree_,t,n):hj(e.serverSyncTree_,t,n),aF(e.eventQueue_,t._path,r)}function _F(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cF)}function xF(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];SO.apply(void 0,[t].concat(r))}function EF(e,t,n,r){t&&KO((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function IF(e,t,n){return pj(e.serverSyncTree_,t,n)||fL.EMPTY_NODE}function SF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||RF(e,t),Mj(t)){var n=PF(e,t);N(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&CF(e,qj(t),n)}else Fj(t)&&Uj(t,(function(t){SF(e,t)}))}function CF(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=IF(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];N(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=TD(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){xF(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(lj(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);RF(e,Lj(e.transactionQueueTree_,t)),SF(e,e.transactionQueueTree_),oF(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)KO(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{PO("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}TF(e,t)}}),o)}function TF(e,t){var n=NF(e,t),r=qj(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=TD(n,s.path),l=!1,f=void 0;if(N(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(lj(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(lj(e.serverSyncTree_,s.currentWriteId,!0));else{var h=IF(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Yj("transaction failed: Data returned ",d,s.path);var p=dL(d);"object"===typeof d&&null!=d&&ee(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,m=dF(e),y=Rj(p,h,m);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=yF(e),o.splice(o.indexOf(v),1),i=(i=i.concat(sj(e.serverSyncTree_,s.path,y,s.currentWriteId,s.applyLocally))).concat(lj(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(lj(e.serverSyncTree_,s.currentWriteId,!0))}oF(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);RF(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)KO(r[c]);SF(e,e.transactionQueueTree_)}(e,PF(e,n),r),r}function NF(e,t){var n,r=e.transactionQueueTree_;for(n=bD(t);null!==n&&void 0===Mj(r);)r=Lj(r,n),n=bD(t=_D(t));return r}function PF(e,t){var n=[];return AF(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function AF(e,t,n){var r=Mj(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Uj(t,(function(t){AF(e,t,n)}))}function RF(e,t){var n=Mj(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,jj(t,n.length>0?n:void 0)}Uj(t,(function(t){RF(e,t)}))}function OF(e,t){var n=qj(NF(e,t)),r=Lj(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){DF(e,t)})),DF(e,r),Vj(r,(function(t){DF(e,t)})),n}function DF(e,t){var n=Mj(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(N(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(N(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(lj(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?jj(t,void 0):n.length=a+1,oF(e.eventQueue_,qj(t),i);for(var u=0;u<r.length;u++)KO(r[u])}}var LF=function(e,t){var n=MF(e),r=n.namespace;"firebase.com"===n.domain&&NO(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||NO("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&PO("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new eD(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new gD(n.pathString)}},MF=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var f=e.indexOf("/");-1===f&&(f=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(f,h)),f<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(_k){}t+="/"+i}return t}(e.substring(f,h)));var d=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=l(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):PO("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in d&&(a=d.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},jF=function(){function e(t,n,r,i){a(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return u(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+X(this.snapshot.exportVal())}}]),e}(),FF=function(){function e(t,n,r){a(this,e),this.eventRegistration=t,this.error=n,this.path=r}return u(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),UF=function(){function e(t,n){a(this,e),this.snapshotCallback=t,this.cancelCallback=n}return u(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),VF=function(){function e(t,n){a(this,e),this._repo=t,this._path=n}return u(e,[{key:"cancel",value:function(){var e=new j;return kF(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){tF("OnDisconnect.remove",this._path);var e=new j;return bF(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){tF("OnDisconnect.set",this._path),Qj("OnDisconnect.set",e,this._path,!1);var t=new j;return bF(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){tF("OnDisconnect.setWithPriority",this._path),Qj("OnDisconnect.setWithPriority",e,this._path,!1),Xj("OnDisconnect.setWithPriority",t,!1);var n=new j;return function(e,t,n,r,i){var a=dL(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&jL(e.onDisconnect_,t,a),EF(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){tF("OnDisconnect.update",this._path),$j("OnDisconnect.update",e,this._path,!1);var t=new j;return function(e,t,n,r){if(ne(n))return SO("onDisconnect().update() called with empty data.  Don't do anything."),void EF(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&UO(n,(function(n,r){var i=dL(r);jL(e.onDisconnect_,SD(t,n),i)})),EF(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),qF=function(){function e(t,n,r,i){a(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return u(e,[{key:"key",get:function(){return CD(this._path)?null:xD(this._path)}},{key:"ref",get:function(){return new KF(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=OL(this._queryParams),t=jO(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return OL(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ge(t))instanceof e))return!1;var n=this._repo===t._repo,r=PD(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function BF(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function zF(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===BD){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==RO)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==OO)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===aL){if(null!=t&&!Zj(t)||null!=n&&!Zj(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(N(e.getIndex()instanceof pL||e.getIndex()===mL,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function WF(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var KF=function(e){m(n,e);var t=w(n);function n(e,r){return a(this,n),t.call(this,e,r,new TL,!1)}return u(n,[{key:"parent",get:function(){var e=ID(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(qF),HF=function(){function e(t,n,r){a(this,e),this._node=t,this.ref=n,this._index=r}return u(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new gD(t),r=QF(this.ref,t);return new e(this._node.getChild(n),r,aL)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,QF(n.ref,r),aL))}))}},{key:"hasChild",value:function(e){var t=new gD(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function GF(e,t){return(e=ge(e))._checkNotDeleted("ref"),void 0!==t?QF(e._root,t):e._root}function ZF(e,t){(e=ge(e))._checkNotDeleted("refFromURL");var n=LF(t,e._repo.repoInfo_.nodeAdmin);nF("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||NO("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),GF(e,n.path.toString())}function QF(e,t){var n,r,i,a;return null===bD((e=ge(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),eF(n,r,i,a)):eF("child","path",t,!1),new KF(e._repo,SD(e._path,t))}function YF(e,t){e=ge(e),tF("push",e._path),Qj("push",t,e._path,!0);var n,r=hF(e._repo),i=gL(r),a=QF(e,i),o=QF(e,i);return n=null!=t?XF(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function $F(e){return tF("remove",e._path),XF(e,null)}function XF(e,t){e=ge(e),tF("set",e._path),Qj("set",t,e._path,!1);var n=new j;return gF(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function JF(e,t){e=ge(e),tF("setPriority",e._path),Xj("setPriority",t,!1);var n=new j;return gF(e._repo,SD(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function eU(e,t,n){if(tF("setWithPriority",e._path),Qj("setWithPriority",t,e._path,!1),Xj("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new j;return gF(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function tU(e,t){$j("update",t,e._path,!1);var n=new j;return function(e,t,n,r){xF(e,"update",{path:t.toString(),value:n});var i=!0,a=dF(e),o={};if(UO(n,(function(n,r){i=!1,o[n]=Aj(SD(t,n),dL(r),e.serverSyncTree_,a)})),i)SO("update() called with empty data.  Don't do anything."),EF(0,r,"ok",void 0);else{var u=yF(e),s=cj(e.serverSyncTree_,t,o,u);iF(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||PO("update at "+t+" failed: "+n);var o=lj(e.serverSyncTree_,u,!a),s=o.length>0?TF(e,t):t;oF(e.eventQueue_,s,o),EF(0,r,n,i)})),UO(n,(function(n){var r=OF(e,SD(t,n));TF(e,r)})),oF(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function nU(e){return function(e,t){var n=vj(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=dL(n).withIndex(t._queryParams.getIndex()),i=fj(e.serverSyncTree_,t._path,r);return aF(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return xF(e,"get for query "+X(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=ge(e))._repo,e).then((function(t){return new HF(t,new KF(e._repo,e._path),e._queryParams.getIndex())}))}var rU=function(){function e(t){a(this,e),this.callbackContext=t}return u(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new jF("value",this,new HF(e.snapshotNode,new KF(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new FF(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),iU=function(){function e(t,n){a(this,e),this.eventType=t,this.callbackContext=n}return u(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new FF(this,e,t):null}},{key:"createEvent",value:function(e,t){N(null!=e.childName,"Child events should have a childName.");var n=QF(new KF(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new jF(e.type,this,new HF(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function aU(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){wF(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new UF(n,a||void 0),c="value"===t?new rU(s):new iU(t,s);return function(e,t,n){var r;r=".info"===bD(t._path)?dj(e.infoSyncTree_,t,n):dj(e.serverSyncTree_,t,n),aF(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return wF(e._repo,e,c)}}function oU(e,t,n,r){return aU(e,"value",t,n,r)}function uU(e,t,n,r){return aU(e,"child_added",t,n,r)}function sU(e,t,n,r){return aU(e,"child_changed",t,n,r)}function cU(e,t,n,r){return aU(e,"child_moved",t,n,r)}function lU(e,t,n,r){return aU(e,"child_removed",t,n,r)}function fU(e,t,n){var r=null,i=n?new UF(n):null;"value"===t?r=new rU(i):t&&(r=new iU(t,i)),wF(e._repo,e,r)}var hU=u((function e(){a(this,e)})),dU=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this))._value=e,i._key=r,i}return u(n,[{key:"_apply",value:function(e){Qj("endAt",this._value,e._path,!0);var t=PL(e._queryParams,this._value,this._key);if(WF(t),zF(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qF(e._repo,e._path,t,e._orderByCalled)}}]),n}(hU);function pU(e,t){return Jj("endAt","key",t,!0),new dU(e,t)}var vU=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this))._value=e,i._key=r,i}return u(n,[{key:"_apply",value:function(e){Qj("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===BD?("string"===typeof t&&(t=bL(t)),r=PL(e,t,n)):r=PL(e,t,null==n?RO:bL(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(WF(t),zF(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qF(e._repo,e._path,t,e._orderByCalled)}}]),n}(hU);function mU(e,t){return Jj("endBefore","key",t,!0),new vU(e,t)}var yU=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this))._value=e,i._key=r,i}return u(n,[{key:"_apply",value:function(e){Qj("startAt",this._value,e._path,!0);var t=NL(e._queryParams,this._value,this._key);if(WF(t),zF(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qF(e._repo,e._path,t,e._orderByCalled)}}]),n}(hU);function gU(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Jj("startAt","key",t,!0),new yU(e,t)}var kU=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this))._value=e,i._key=r,i}return u(n,[{key:"_apply",value:function(e){Qj("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===BD?("string"===typeof t&&(t=kL(t)),r=NL(e,t,n)):r=NL(e,t,null==n?OO:kL(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(WF(t),zF(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qF(e._repo,e._path,t,e._orderByCalled)}}]),n}(hU);function bU(e,t){return Jj("startAfter","key",t,!0),new kU(e,t)}var wU=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this))._limit=e,r}return u(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qF(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(hU);function _U(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new wU(e)}var xU=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this))._limit=e,r}return u(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qF(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(hU);function EU(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new xU(e)}var IU=function(e){m(n,e);var t=w(n);function n(e){var r;return a(this,n),(r=t.call(this))._path=e,r}return u(n,[{key:"_apply",value:function(e){BF(e,"orderByChild");var t=new gD(this._path);if(CD(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new pL(t),r=AL(e._queryParams,n);return zF(r),new qF(e._repo,e._path,r,!0)}}]),n}(hU);function SU(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return eF("orderByChild","path",e,!1),new IU(e)}var CU=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"_apply",value:function(e){BF(e,"orderByKey");var t=AL(e._queryParams,BD);return zF(t),new qF(e._repo,e._path,t,!0)}}]),n}(hU);function TU(){return new CU}var NU=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"_apply",value:function(e){BF(e,"orderByPriority");var t=AL(e._queryParams,aL);return zF(t),new qF(e._repo,e._path,t,!0)}}]),n}(hU);function PU(){return new NU}var AU=function(e){m(n,e);var t=w(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"_apply",value:function(e){BF(e,"orderByValue");var t=AL(e._queryParams,mL);return zF(t),new qF(e._repo,e._path,t,!0)}}]),n}(hU);function RU(){return new AU}var OU=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this))._value=e,i._key=r,i}return u(n,[{key:"_apply",value:function(e){if(Qj("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new dU(this._value,this._key)._apply(new yU(this._value,this._key)._apply(e))}}]),n}(hU);function DU(e,t){return Jj("equalTo","key",t,!0),new OU(e,t)}function LU(e){for(var t=ge(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){N(!qM,"__referenceConstructor has already been defined"),qM=e}(KF),function(e){N(!ZM,"__referenceConstructor has already been defined"),ZM=e}(KF);var MU={},jU=!1;function FU(e,t,n,r){e.repoInfo_=new eD("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function UU(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||NO("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),SO("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=LF(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/microgreens",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=LF(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new QO(QO.OWNER):new ZO(e.name,e.options,t);nF("Invalid Firebase Database URL",u),CD(u.path)||NO("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=MU[t.name];i||(i={},MU[t.name]=i);var a=i[e.toURLString()];a&&NO("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new lF(e,jU,n,r),i[e.toURLString()]=a,a}(s,e,l,new GO(e.name,n));return new VU(f,e)}var VU=function(){function e(t,n){a(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return u(e,[{key:"_repo",get:function(){return this._instanceStarted||(fF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new KF(this._repo,kD())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=MU[t];n&&n[e.key]===e||NO("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),_F(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&NO("Cannot call "+e+" on a deleted database.")}}]),e}();function qU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=ge(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&NO("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&NO('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new QO(QO.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:F(r.mockUserToken,e.app.options.projectId);a=new QO(o)}FU(i,t,n,a)}function BU(e){(e=ge(e))._checkNotDeleted("goOffline"),_F(e._repo)}function zU(e){var t;(e=ge(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(cF)}function WU(e,t){IO(e,t)}var KU={".sv":"timestamp"};var HU=function(){function e(t,n){a(this,e),this.committed=t,this.snapshot=n}return u(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function GU(e,t,n){var r;if(e=ge(e),tF("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new j,o=oU(e,(function(){}));return function(e,t,n,r,i,a){xF(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:bO(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=IF(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Yj("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=Lj(e.transactionQueueTree_,t),f=Mj(l)||[];f.push(o),jj(l,f),"object"===typeof s&&null!==s&&ee(s,".priority")?(c=te(s,".priority"),N(Zj(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(pj(e.serverSyncTree_,t)||fL.EMPTY_NODE).getPriority().val();var h=dF(e),d=dL(s,c),p=Rj(d,u,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=yF(e);var v=sj(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);oF(e.eventQueue_,t,v),SF(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new HF(r,new KF(e._repo,e._path),aL),a.resolve(new HU(n,i)))}),o,i),a.promise}jD.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},jD.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){dO(at),Xe(new Te("database",(function(e,t){var n=t.instanceIdentifier;return UU(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ft(lO,fO,e),ft(lO,fO,"esm2017")}();var ZU=new qe("@firebase/database-compat"),QU=function(e){var t="FIREBASE WARNING: "+e;ZU.warn(t)},YU=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(pe(e,t)+"must be a boolean.")},$U=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(pe(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},XU=function(){function e(t){a(this,e),this._delegate=t}return u(e,[{key:"cancel",value:function(e){de("OnDisconnect.cancel",0,1,arguments.length),ve("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){de("OnDisconnect.remove",0,1,arguments.length),ve("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){de("OnDisconnect.set",1,2,arguments.length),ve("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){de("OnDisconnect.setWithPriority",2,3,arguments.length),ve("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(de("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,QU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ve("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),JU=function(){function e(t,n){a(this,e),this.committed=t,this.snapshot=n}return u(e,[{key:"toJSON",value:function(){return de("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),eV=function(){function e(t,n){a(this,e),this._database=t,this._delegate=n}return u(e,[{key:"val",value:function(){return de("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return de("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return de("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return de("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return de("DataSnapshot.child",0,1,arguments.length),t=String(t),eF("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return de("DataSnapshot.hasChild",1,1,arguments.length),eF("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return de("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return de("DataSnapshot.forEach",1,1,arguments.length),ve("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return de("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return de("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return de("DataSnapshot.ref",0,0,arguments.length),new nV(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),tV=function(){function e(t,n){a(this,e),this.database=t,this._delegate=n}return u(e,[{key:"on",value:function(t,n,r,i){var a,o=this;de("Query.on",2,4,arguments.length),ve("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new eV(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return oU(this._delegate,s,c),n;case"child_added":return uU(this._delegate,s,c),n;case"child_removed":return lU(this._delegate,s,c),n;case"child_changed":return sU(this._delegate,s,c),n;case"child_moved":return cU(this._delegate,s,c),n;default:throw new Error(pe("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(de("Query.off",0,3,arguments.length),$U("Query.off",e,!0),ve("Query.off","callback",t,!0),me("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,fU(this._delegate,e,r)}else fU(this._delegate,e)}},{key:"get",value:function(){var e=this;return nU(this._delegate).then((function(t){return new eV(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;de("Query.once",1,4,arguments.length),ve("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new j,s=function(e,t){var r=new eV(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":oU(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":uU(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":lU(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":sU(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":cU(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(pe("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return de("Query.limitToFirst",1,1,arguments.length),new e(this.database,LU(this._delegate,_U(t)))}},{key:"limitToLast",value:function(t){return de("Query.limitToLast",1,1,arguments.length),new e(this.database,LU(this._delegate,EU(t)))}},{key:"orderByChild",value:function(t){return de("Query.orderByChild",1,1,arguments.length),new e(this.database,LU(this._delegate,SU(t)))}},{key:"orderByKey",value:function(){return de("Query.orderByKey",0,0,arguments.length),new e(this.database,LU(this._delegate,TU()))}},{key:"orderByPriority",value:function(){return de("Query.orderByPriority",0,0,arguments.length),new e(this.database,LU(this._delegate,PU()))}},{key:"orderByValue",value:function(){return de("Query.orderByValue",0,0,arguments.length),new e(this.database,LU(this._delegate,RU()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return de("Query.startAt",0,2,arguments.length),new e(this.database,LU(this._delegate,gU(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return de("Query.startAfter",0,2,arguments.length),new e(this.database,LU(this._delegate,bU(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return de("Query.endAt",0,2,arguments.length),new e(this.database,LU(this._delegate,pU(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return de("Query.endBefore",0,2,arguments.length),new e(this.database,LU(this._delegate,mU(t,n)))}},{key:"equalTo",value:function(t,n){return de("Query.equalTo",1,2,arguments.length),new e(this.database,LU(this._delegate,DU(t,n)))}},{key:"toString",value:function(){return de("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return de("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(de("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new nV(this.database,new KF(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,ve(e,"cancel",r.cancel,!0),r.context=n,me(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(pe(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),nV=function(e){m(n,e);var t=w(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,new qF(r._repo,r._path,new TL,!1))).database=e,i._delegate=r,i}return u(n,[{key:"getKey",value:function(){return de("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return de("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,QF(this._delegate,e))}},{key:"getParent",value:function(){de("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return de("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){de("Reference.set",1,2,arguments.length),ve("Reference.set","onComplete",t,!0);var n=XF(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(de("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,QU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tF("Reference.update",this._delegate._path),ve("Reference.update","onComplete",t,!0);var i=tU(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){de("Reference.setWithPriority",2,3,arguments.length),ve("Reference.setWithPriority","onComplete",n,!0);var r=eU(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){de("Reference.remove",0,1,arguments.length),ve("Reference.remove","onComplete",e,!0);var t=$F(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;de("Reference.transaction",1,3,arguments.length),ve("Reference.transaction","transactionUpdate",e,!1),ve("Reference.transaction","onComplete",t,!0),YU("Reference.transaction","applyLocally",n,!0);var i=GU(this._delegate,e,{applyLocally:n}).then((function(e){return new JU(e.committed,new eV(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){de("Reference.setPriority",1,2,arguments.length),ve("Reference.setPriority","onComplete",t,!0);var n=JF(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;de("Reference.push",0,2,arguments.length),ve("Reference.push","onComplete",t,!0);var i=YF(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return tF("Reference.onDisconnect",this._delegate._path),new XU(new VF(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(tV),rV=function(){function e(t,n){var r=this;a(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return u(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qU(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(de("database.ref",0,1,arguments.length),e instanceof nV){var t=ZF(this._delegate,e.toString());return new nV(this,t)}var n=GF(this._delegate,e);return new nV(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";de(t,1,1,arguments.length);var n=ZF(this._delegate,e);return new nV(this,n)}},{key:"goOffline",value:function(){return de("database.goOffline",0,0,arguments.length),BU(this._delegate)}},{key:"goOnline",value:function(){return de("database.goOnline",0,0,arguments.length),zU(this._delegate)}}]),e}();rV.ServerValue={TIMESTAMP:KU,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var iV,aV=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;dO(r);var s=new Pe("auth-internal",new Oe("database-standalone"));return s.setComponent(new Te("auth-internal",(function(){return i}),"PRIVATE")),{instance:new rV(UU(t,s,void 0,n,u),t),namespace:a}}}),oV=rV.ServerValue;!function(e){e.INTERNAL.registerComponent(new Te("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new rV(i,r)}),"PUBLIC").setServiceProps({Reference:nV,Query:tV,Database:rV,DataSnapshot:eV,enableLogging:WU,INTERNAL:aV,ServerValue:oV}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.8")}(Lt);var uV=new Uint8Array(16);function sV(){if(!iV&&!(iV="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iV(uV)}var cV=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var lV=function(e){return"string"===typeof e&&cV.test(e)},fV=[],hV=0;hV<256;++hV)fV.push((hV+256).toString(16).substr(1));var dV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(fV[e[t+0]]+fV[e[t+1]]+fV[e[t+2]]+fV[e[t+3]]+"-"+fV[e[t+4]]+fV[e[t+5]]+"-"+fV[e[t+6]]+fV[e[t+7]]+"-"+fV[e[t+8]]+fV[e[t+9]]+"-"+fV[e[t+10]]+fV[e[t+11]]+fV[e[t+12]]+fV[e[t+13]]+fV[e[t+14]]+fV[e[t+15]]).toLowerCase();if(!lV(n))throw TypeError("Stringified UUID is invalid");return n};var pV=function(e,t,n){var r=(e=e||{}).random||(e.rng||sV)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return dV(r)},vV=I().mark(yV),mV=I().mark(gV);function yV(e){var t;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.prev=1,n.next=4,(0,GI.call)(tR.auth.createUserWithEmailAndPassword,e.email,e.password);case 4:return t=n.sent,n.next=7,(0,GI.put)(OE(t));case 7:return n.next=9,(0,GI.call)(tR.firestore.addDocument,"usersInfo",{id:pV(),email:e.email,password:e.password,phoneNumber:"",lvl:0,street:"",home:"",flat:""});case 9:n.sent,n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.log(n.t0),console.log(e.password);case 16:case"end":return n.stop()}}),vV,null,[[1,12]])}function gV(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,GI.takeEvery)(RE,yV);case 2:case"end":return e.stop()}}),mV)}var kV=I().mark(wV),bV=I().mark(_V);function wV(e){var t;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.prev=1,n.next=4,(0,GI.call)(tR.auth.signInWithEmailAndPassword,e.loginEmail,e.loginPassword);case 4:return t=n.sent,n.next=7,(0,GI.put)(OE(t));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0);case 12:case"end":return n.stop()}}),kV,null,[[1,9]])}function _V(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,GI.takeEvery)(AE,wV);case 2:case"end":return e.stop()}}),bV)}var xV=I().mark(EV);function EV(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,GI.all)([aR(),gV(),_V()]);case 2:case"end":return e.stop()}}),xV)}var IV=(0,qI.MT)(zI,HI);KI.run(EV);var SV=n(1250),CV=document.getElementById("root");(0,SV.s)(CV).render((0,Pb.jsx)($x,{children:(0,Pb.jsx)(Eg,{store:IV,children:(0,Pb.jsx)(UI,{})})})),VI()}()}();
//# sourceMappingURL=main.2845e32c.js.map